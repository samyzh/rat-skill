<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º | å·¥ä½œå®è·µä½“ç³»</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/rat-skill/img/favicon.ico">
    <link rel="manifest" href="/rat-skill/manifest.json">
    <script charset="utf-8" src="/rat-skill/js/readmore.js"></script>
    <meta name="description" content="ClickHouseæ˜¯ä¸€ä¸ªé¢å‘åˆ—çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼Œç”¨äºåœ¨çº¿åˆ†æå¤„ç†æŸ¥è¯¢ï¼ˆOLAPï¼‰ã€‚">
    <meta name="image" content="https://my.samyz.cn/_image/24.clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º/ç‰¹æ€§.png">
    <meta name="twitter:title" content="clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º">
    <meta name="twitter:description" content="ClickHouseæ˜¯ä¸€ä¸ªé¢å‘åˆ—çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼Œç”¨äºåœ¨çº¿åˆ†æå¤„ç†æŸ¥è¯¢ï¼ˆOLAPï¼‰ã€‚">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://my.samyz.cn/_image/24.clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º/ç‰¹æ€§.png">
    <meta name="twitter:url" content="https://my.samyz.cn/03.%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B2/02.%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/53.wdp%E6%95%B0%E6%8D%AE%E5%BA%95%E5%BA%A7/24.clickhouse%E5%AE%89%E8%A3%85%E5%8F%8A%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html">
    <meta property="og:type" content="article">
    <meta property="og:title" content="clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º">
    <meta property="og:description" content="ClickHouseæ˜¯ä¸€ä¸ªé¢å‘åˆ—çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼Œç”¨äºåœ¨çº¿åˆ†æå¤„ç†æŸ¥è¯¢ï¼ˆOLAPï¼‰ã€‚">
    <meta property="og:image" content="https://my.samyz.cn/_image/24.clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º/ç‰¹æ€§.png">
    <meta property="og:url" content="https://my.samyz.cn/03.%E5%AE%9E%E8%B7%B5%E9%83%A8%E7%BD%B2/02.%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/53.wdp%E6%95%B0%E6%8D%AE%E5%BA%95%E5%BA%A7/24.clickhouse%E5%AE%89%E8%A3%85%E5%8F%8A%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html">
    <meta property="og:site_name" content="samyzh">
    <meta property="article:published_time" content="2023-11-17T05:08:16.000Z">
    <meta property="article:tag" content="null">
    <meta itemprop="name" content="clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º">
    <meta itemprop="description" content="ClickHouseæ˜¯ä¸€ä¸ªé¢å‘åˆ—çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼Œç”¨äºåœ¨çº¿åˆ†æå¤„ç†æŸ¥è¯¢ï¼ˆOLAPï¼‰ã€‚">
    <meta itemprop="image" content="https://my.samyz.cn/_image/24.clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º/ç‰¹æ€§.png">
    <meta name="keywords" content="vuepress,theme,doc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/rat-skill/assets/css/0.styles.57ac925a.css" as="style"><link rel="preload" href="/rat-skill/assets/js/app.947bb335.js" as="script"><link rel="preload" href="/rat-skill/assets/js/3.1f8ba6b8.js" as="script"><link rel="preload" href="/rat-skill/assets/js/27.e105513b.js" as="script"><link rel="preload" href="/rat-skill/assets/js/31.630b2698.js" as="script"><link rel="prefetch" href="/rat-skill/assets/js/10.78eb95fc.js"><link rel="prefetch" href="/rat-skill/assets/js/100.1ad6fcf0.js"><link rel="prefetch" href="/rat-skill/assets/js/101.9b3112f3.js"><link rel="prefetch" href="/rat-skill/assets/js/102.001619c2.js"><link rel="prefetch" href="/rat-skill/assets/js/103.4ffe5960.js"><link rel="prefetch" href="/rat-skill/assets/js/104.47694d65.js"><link rel="prefetch" href="/rat-skill/assets/js/105.80d6cb2b.js"><link rel="prefetch" href="/rat-skill/assets/js/106.7b621d36.js"><link rel="prefetch" href="/rat-skill/assets/js/107.bbfb0e65.js"><link rel="prefetch" href="/rat-skill/assets/js/108.a6d01a19.js"><link rel="prefetch" href="/rat-skill/assets/js/109.f8b93482.js"><link rel="prefetch" href="/rat-skill/assets/js/11.56ef8e04.js"><link rel="prefetch" href="/rat-skill/assets/js/110.6d20f535.js"><link rel="prefetch" href="/rat-skill/assets/js/111.29971ea8.js"><link rel="prefetch" href="/rat-skill/assets/js/112.c07230d4.js"><link rel="prefetch" href="/rat-skill/assets/js/113.5ce7d841.js"><link rel="prefetch" href="/rat-skill/assets/js/114.46296e18.js"><link rel="prefetch" href="/rat-skill/assets/js/115.887dcfd0.js"><link rel="prefetch" href="/rat-skill/assets/js/116.0dd39693.js"><link rel="prefetch" href="/rat-skill/assets/js/117.e1a22141.js"><link rel="prefetch" href="/rat-skill/assets/js/118.09a1b9bb.js"><link rel="prefetch" href="/rat-skill/assets/js/119.dd79b443.js"><link rel="prefetch" href="/rat-skill/assets/js/12.cc7eb64e.js"><link rel="prefetch" href="/rat-skill/assets/js/120.0b19db32.js"><link rel="prefetch" href="/rat-skill/assets/js/121.8f2ef349.js"><link rel="prefetch" href="/rat-skill/assets/js/122.6d69cf2c.js"><link rel="prefetch" href="/rat-skill/assets/js/123.facec994.js"><link rel="prefetch" href="/rat-skill/assets/js/124.b8587f86.js"><link rel="prefetch" href="/rat-skill/assets/js/125.fdbf2855.js"><link rel="prefetch" href="/rat-skill/assets/js/126.963cdb72.js"><link rel="prefetch" href="/rat-skill/assets/js/127.9e11a47a.js"><link rel="prefetch" href="/rat-skill/assets/js/128.11190c6b.js"><link rel="prefetch" href="/rat-skill/assets/js/129.dc6e7e7a.js"><link rel="prefetch" href="/rat-skill/assets/js/13.12189ca1.js"><link rel="prefetch" href="/rat-skill/assets/js/130.85b096ae.js"><link rel="prefetch" href="/rat-skill/assets/js/131.aa48c0f8.js"><link rel="prefetch" href="/rat-skill/assets/js/132.88c5af64.js"><link rel="prefetch" href="/rat-skill/assets/js/133.351a1b73.js"><link rel="prefetch" href="/rat-skill/assets/js/134.eef9e302.js"><link rel="prefetch" href="/rat-skill/assets/js/135.845e7408.js"><link rel="prefetch" href="/rat-skill/assets/js/136.28ef6e93.js"><link rel="prefetch" href="/rat-skill/assets/js/137.18b514d0.js"><link rel="prefetch" href="/rat-skill/assets/js/138.e2f8bff3.js"><link rel="prefetch" href="/rat-skill/assets/js/139.1d4bf74c.js"><link rel="prefetch" href="/rat-skill/assets/js/14.44e2a8c2.js"><link rel="prefetch" href="/rat-skill/assets/js/140.086f526a.js"><link rel="prefetch" href="/rat-skill/assets/js/141.32f3444d.js"><link rel="prefetch" href="/rat-skill/assets/js/142.1b2c7d2f.js"><link rel="prefetch" href="/rat-skill/assets/js/143.b5cc2a88.js"><link rel="prefetch" href="/rat-skill/assets/js/144.4a74a7d4.js"><link rel="prefetch" href="/rat-skill/assets/js/145.fd5727f9.js"><link rel="prefetch" href="/rat-skill/assets/js/146.ef305f52.js"><link rel="prefetch" href="/rat-skill/assets/js/147.b7d806cf.js"><link rel="prefetch" href="/rat-skill/assets/js/148.1c61be01.js"><link rel="prefetch" href="/rat-skill/assets/js/15.18a001a2.js"><link rel="prefetch" href="/rat-skill/assets/js/16.4beb4206.js"><link rel="prefetch" href="/rat-skill/assets/js/17.bb0e949d.js"><link rel="prefetch" href="/rat-skill/assets/js/18.236e7269.js"><link rel="prefetch" href="/rat-skill/assets/js/19.471b5180.js"><link rel="prefetch" href="/rat-skill/assets/js/20.adf9b969.js"><link rel="prefetch" href="/rat-skill/assets/js/21.cf0da7dd.js"><link rel="prefetch" href="/rat-skill/assets/js/22.83aa2573.js"><link rel="prefetch" href="/rat-skill/assets/js/23.9ca61b52.js"><link rel="prefetch" href="/rat-skill/assets/js/24.bf7d6dcb.js"><link rel="prefetch" href="/rat-skill/assets/js/25.5f7972e6.js"><link rel="prefetch" href="/rat-skill/assets/js/26.f224a8a5.js"><link rel="prefetch" href="/rat-skill/assets/js/28.0f5c5b4a.js"><link rel="prefetch" href="/rat-skill/assets/js/29.f840b0e2.js"><link rel="prefetch" href="/rat-skill/assets/js/30.7eaf3162.js"><link rel="prefetch" href="/rat-skill/assets/js/32.83dc0cb8.js"><link rel="prefetch" href="/rat-skill/assets/js/33.9a349a02.js"><link rel="prefetch" href="/rat-skill/assets/js/34.0d25fb0a.js"><link rel="prefetch" href="/rat-skill/assets/js/35.f3a917a8.js"><link rel="prefetch" href="/rat-skill/assets/js/36.bcf0eda4.js"><link rel="prefetch" href="/rat-skill/assets/js/37.25adb871.js"><link rel="prefetch" href="/rat-skill/assets/js/38.30585aa9.js"><link rel="prefetch" href="/rat-skill/assets/js/39.eaa3beda.js"><link rel="prefetch" href="/rat-skill/assets/js/4.be88bb1f.js"><link rel="prefetch" href="/rat-skill/assets/js/40.f44a5157.js"><link rel="prefetch" href="/rat-skill/assets/js/41.a2cd87d0.js"><link rel="prefetch" href="/rat-skill/assets/js/42.2b0ab31d.js"><link rel="prefetch" href="/rat-skill/assets/js/43.f7f91232.js"><link rel="prefetch" href="/rat-skill/assets/js/44.50c6e85e.js"><link rel="prefetch" href="/rat-skill/assets/js/45.a8132190.js"><link rel="prefetch" href="/rat-skill/assets/js/46.a463469e.js"><link rel="prefetch" href="/rat-skill/assets/js/47.261ba81e.js"><link rel="prefetch" href="/rat-skill/assets/js/48.1839a75b.js"><link rel="prefetch" href="/rat-skill/assets/js/49.2c5e9cc8.js"><link rel="prefetch" href="/rat-skill/assets/js/5.008161f8.js"><link rel="prefetch" href="/rat-skill/assets/js/50.c2bd266e.js"><link rel="prefetch" href="/rat-skill/assets/js/51.47e5f1cd.js"><link rel="prefetch" href="/rat-skill/assets/js/52.52f3c415.js"><link rel="prefetch" href="/rat-skill/assets/js/53.db58fdac.js"><link rel="prefetch" href="/rat-skill/assets/js/54.5295d7e7.js"><link rel="prefetch" href="/rat-skill/assets/js/55.14327caf.js"><link rel="prefetch" href="/rat-skill/assets/js/56.b90e8ff8.js"><link rel="prefetch" href="/rat-skill/assets/js/57.6db5ac2e.js"><link rel="prefetch" href="/rat-skill/assets/js/58.e95da9ff.js"><link rel="prefetch" href="/rat-skill/assets/js/59.ef58975c.js"><link rel="prefetch" href="/rat-skill/assets/js/6.7d17eb4f.js"><link rel="prefetch" href="/rat-skill/assets/js/60.4520132f.js"><link rel="prefetch" href="/rat-skill/assets/js/61.1566554e.js"><link rel="prefetch" href="/rat-skill/assets/js/62.877f8bf7.js"><link rel="prefetch" href="/rat-skill/assets/js/63.1205cf30.js"><link rel="prefetch" href="/rat-skill/assets/js/64.5017319f.js"><link rel="prefetch" href="/rat-skill/assets/js/65.2674f679.js"><link rel="prefetch" href="/rat-skill/assets/js/66.17d45c86.js"><link rel="prefetch" href="/rat-skill/assets/js/67.3e000178.js"><link rel="prefetch" href="/rat-skill/assets/js/68.c03fa3f1.js"><link rel="prefetch" href="/rat-skill/assets/js/69.497b01ca.js"><link rel="prefetch" href="/rat-skill/assets/js/7.6e68e13b.js"><link rel="prefetch" href="/rat-skill/assets/js/70.8c00d21a.js"><link rel="prefetch" href="/rat-skill/assets/js/71.619bd13f.js"><link rel="prefetch" href="/rat-skill/assets/js/72.d295efaf.js"><link rel="prefetch" href="/rat-skill/assets/js/73.a3bbddd0.js"><link rel="prefetch" href="/rat-skill/assets/js/74.08cc3761.js"><link rel="prefetch" href="/rat-skill/assets/js/75.283288f7.js"><link rel="prefetch" href="/rat-skill/assets/js/76.93407aa3.js"><link rel="prefetch" href="/rat-skill/assets/js/77.2c2dfd65.js"><link rel="prefetch" href="/rat-skill/assets/js/78.ab328917.js"><link rel="prefetch" href="/rat-skill/assets/js/79.4cb04278.js"><link rel="prefetch" href="/rat-skill/assets/js/8.de04ac36.js"><link rel="prefetch" href="/rat-skill/assets/js/80.14b22c18.js"><link rel="prefetch" href="/rat-skill/assets/js/81.49bb0853.js"><link rel="prefetch" href="/rat-skill/assets/js/82.7a430867.js"><link rel="prefetch" href="/rat-skill/assets/js/83.cc250af8.js"><link rel="prefetch" href="/rat-skill/assets/js/84.3bd58217.js"><link rel="prefetch" href="/rat-skill/assets/js/85.3f95dab7.js"><link rel="prefetch" href="/rat-skill/assets/js/86.cde0b95d.js"><link rel="prefetch" href="/rat-skill/assets/js/87.5c212674.js"><link rel="prefetch" href="/rat-skill/assets/js/88.27fb6403.js"><link rel="prefetch" href="/rat-skill/assets/js/89.5db52909.js"><link rel="prefetch" href="/rat-skill/assets/js/9.e10c30e6.js"><link rel="prefetch" href="/rat-skill/assets/js/90.d1e0926e.js"><link rel="prefetch" href="/rat-skill/assets/js/91.c06a372f.js"><link rel="prefetch" href="/rat-skill/assets/js/92.f4af5fd6.js"><link rel="prefetch" href="/rat-skill/assets/js/93.4bd20811.js"><link rel="prefetch" href="/rat-skill/assets/js/94.3501d091.js"><link rel="prefetch" href="/rat-skill/assets/js/95.b5b9cc97.js"><link rel="prefetch" href="/rat-skill/assets/js/96.ea480507.js"><link rel="prefetch" href="/rat-skill/assets/js/97.b24eb3bc.js"><link rel="prefetch" href="/rat-skill/assets/js/98.63adb2de.js"><link rel="prefetch" href="/rat-skill/assets/js/99.39172efd.js"><link rel="prefetch" href="/rat-skill/assets/js/vendors~dplayer.9c515013.js">
    <link rel="stylesheet" href="/rat-skill/assets/css/0.styles.57ac925a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/rat-skill/" class="home-link router-link-active"><img src="/rat-skill/img/logo.png" alt="å·¥ä½œå®è·µä½“ç³»" class="logo"> <span class="site-name can-hide">å·¥ä½œå®è·µä½“ç³»</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/rat-skill/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/rat-skill/rule/" class="nav-link">è§„èŒƒæ¨¡å¼Rule</a></div><div class="nav-item"><a href="/rat-skill/comp/" class="nav-link">å…¬å…±ç»„ä»¶Comp</a></div><div class="nav-item"><a href="/rat-skill/devops/" class="nav-link">å®è·µéƒ¨ç½²Ops</a></div><div class="nav-item"><a href="/rat-skill/wiki/" class="nav-link">ä½“ç³»å®è·µWiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†ä½“ç³»Map" class="dropdown-title"><a href="/rat-skill/map/" class="link-title">çŸ¥è¯†ä½“ç³»Map</a> <span class="title" style="display:none;">çŸ¥è¯†ä½“ç³»Map</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>æ•™ç¨‹ç›¸å…³</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/rat-skill/pages/online_md/" class="nav-link">ä½¿ç”¨mdç¼–å†™åœ¨çº¿æ–‡æ¡£</a></li></ul></li><li class="dropdown-item"><h4>æŠ€æœ¯æ–‡æ¡£</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/rat-skill/pages/b78a79/" class="nav-link">gitä½¿ç”¨æ•™ç¨‹</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ¹å¿«æ·å…¥å£" class="dropdown-title"><a href="/rat-skill/link/" class="link-title">ğŸŒ¹å¿«æ·å…¥å£</a> <span class="title" style="display:none;">ğŸŒ¹å¿«æ·å…¥å£</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å¿«æ·é“¾æ¥</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/rat-skill/pages/devLink/" class="nav-link">å¼€å‘æ”¶è—</a></li></ul></li><li class="dropdown-item"><h4>ğŸ’–ä½“ç³»å…¥å£</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://my.samyz.cn/rat-skill" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å·¥ä½œå®è·µä½“ç³»
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://my.samyz.cn/rat-summ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å†™ä½œè®¤çŸ¥ä½“ç³»
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://my.samyz.cn/rat-invest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æŠ•èµ„ç†è´¢ä½“ç³»
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/samyzh/rat-skill" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/rat-skill/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/rat-skill/rule/" class="nav-link">è§„èŒƒæ¨¡å¼Rule</a></div><div class="nav-item"><a href="/rat-skill/comp/" class="nav-link">å…¬å…±ç»„ä»¶Comp</a></div><div class="nav-item"><a href="/rat-skill/devops/" class="nav-link">å®è·µéƒ¨ç½²Ops</a></div><div class="nav-item"><a href="/rat-skill/wiki/" class="nav-link">ä½“ç³»å®è·µWiki</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="çŸ¥è¯†ä½“ç³»Map" class="dropdown-title"><a href="/rat-skill/map/" class="link-title">çŸ¥è¯†ä½“ç³»Map</a> <span class="title" style="display:none;">çŸ¥è¯†ä½“ç³»Map</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>æ•™ç¨‹ç›¸å…³</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/rat-skill/pages/online_md/" class="nav-link">ä½¿ç”¨mdç¼–å†™åœ¨çº¿æ–‡æ¡£</a></li></ul></li><li class="dropdown-item"><h4>æŠ€æœ¯æ–‡æ¡£</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/rat-skill/pages/b78a79/" class="nav-link">gitä½¿ç”¨æ•™ç¨‹</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸŒ¹å¿«æ·å…¥å£" class="dropdown-title"><a href="/rat-skill/link/" class="link-title">ğŸŒ¹å¿«æ·å…¥å£</a> <span class="title" style="display:none;">ğŸŒ¹å¿«æ·å…¥å£</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å¿«æ·é“¾æ¥</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/rat-skill/pages/devLink/" class="nav-link">å¼€å‘æ”¶è—</a></li></ul></li><li class="dropdown-item"><h4>ğŸ’–ä½“ç³»å…¥å£</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://my.samyz.cn/rat-skill" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å·¥ä½œå®è·µä½“ç³»
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://my.samyz.cn/rat-summ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å†™ä½œè®¤çŸ¥ä½“ç³»
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://my.samyz.cn/rat-invest" target="_blank" rel="noopener noreferrer" class="nav-link external">
  æŠ•èµ„ç†è´¢ä½“ç³»
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/samyzh/rat-skill" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å¸¸ç”¨å…¥å£</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/sysLink/" class="sidebar-link">ç³»ç»Ÿé“¾æ¥</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>éƒ¨ç½²æŠ€èƒ½</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/a8b2ea/" class="sidebar-link">nginxéƒ¨ç½²ç›¸å…³</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>é¡¹ç›®å®è·µ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ç”µå•†CRMå•†åŸApp</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/d72e37/" class="sidebar-link">é¡¹ç›®ä»‹ç»</a></li><li><a href="/rat-skill/pages/1f6324/" class="sidebar-link">æ´»åŠ¨æ‰“æŠ˜ç­–ç•¥</a></li><li><a href="/rat-skill/pages/f69316/" class="sidebar-link">é‡æ„lib-ext</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ä¼šè®®æ–‡æ¡£ç³»ç»Ÿmeeting</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/576e3d/" class="sidebar-link">é¡¹ç›®ä»‹ç»</a></li><li><a href="/rat-skill/pages/014913/" class="sidebar-link">ä¼šè®®ç³»ç»Ÿéƒ¨ç½²ä¼˜åŒ–</a></li><li><a href="/rat-skill/pages/944cda/" class="sidebar-link">éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¥æœé˜³</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ç”µå­å±ç³»ç»Ÿkinfo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/f6a16a/" class="sidebar-link">é¡¹ç›®ä»‹ç»</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ç”µå­æ ‡ç­¾etag</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/48afcd/" class="sidebar-link">é¡¹ç›®ä»‹ç»</a></li><li><a href="/rat-skill/pages/abc62a/" class="sidebar-link">ç”µå­æ ‡ç­¾æ€»ç»“ã€ä¼˜åŒ–</a></li><li><a href="/rat-skill/pages/056a62/" class="sidebar-link">ç”µå­æ ‡ç­¾éƒ¨ç½²</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>å†…å®¹ç®¡ç†ç³»ç»Ÿcms</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/aefe23/" class="sidebar-link">é¡¹ç›®ä»‹ç»</a></li><li><a href="/rat-skill/pages/7d22dd/" class="sidebar-link">å†…å®¹çˆ¬è™«ä¹¦æœ¬</a></li><li><a href="/rat-skill/pages/869270/" class="sidebar-link">å„ç§è´¦æˆ·å¯¼å…¥åŠŸèƒ½</a></li><li><a href="/rat-skill/pages/c7d753/" class="sidebar-link">docker-nginxæ¶‰åŠåˆ°å‰ç«¯çš„æ•´åˆéƒ¨ç½²</a></li><li><a href="/rat-skill/pages/2b859d/" class="sidebar-link">è®¾å¤‡ç®¡ç†ç‰ˆæœ¬æ›´æ–°åå°äº¤äº’åŠé€»è¾‘</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ä¸Šäº‘é—¨æˆ·ç›¸å…³</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/bdp-portal-use/" class="sidebar-link">é—¨æˆ·åŠå­ç³»ç»Ÿä½¿ç”¨</a></li><li><a href="/rat-skill/pages/0b6867/" class="sidebar-link">èœå•ç³»ç»Ÿè·¯ç”±é…ç½®è§„åˆ™</a></li><li><a href="/rat-skill/pages/a9988d/" class="sidebar-link">é—¨æˆ·dockeråŒ–éƒ¨ç½²</a></li><li><a href="/rat-skill/pages/56e320/" class="sidebar-link">é—¨æˆ·é‡æ„</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>æ™ºèƒ½å·¡æ£€</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/b36588/" class="sidebar-link">æ™ºèƒ½å·¡æ£€ä»‹ç»åŠæŠ€æœ¯è¦ç‚¹</a></li><li><a href="/rat-skill/pages/c4dfb7/" class="sidebar-link">é¦–é¡µå›¾è¡¨</a></li><li><a href="/rat-skill/pages/452c61/" class="sidebar-link">å·¡æ£€æŠ¥å‘Šå¯¼å‡ºæ–¹æ¡ˆ</a></li><li><a href="/rat-skill/pages/5e458c/" class="sidebar-link">dockerå®¹å™¨åŒ–éƒ¨ç½²å‰åç«¯</a></li><li><a href="/rat-skill/pages/f9ca73/" class="sidebar-link">è„šæ‰‹æ¶ç”Ÿäº§ä¸šåŠ¡æ¨¡æ¿</a></li><li><a href="/rat-skill/pages/d97d44/" class="sidebar-link">pdfè½¬æ¢puppeteerè®¾ç½®</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>å®æ—¶å¼•æ“</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/b90ad8/" class="sidebar-link">å®æ—¶å¼•æ“ä»‹ç»åŠæŠ€æœ¯è¦ç‚¹</a></li><li><a href="/rat-skill/pages/7c07b6/" class="sidebar-link">é¦–é¡µæµç¨‹åŠ¨ç”»</a></li><li><a href="/rat-skill/pages/807b37/" class="sidebar-link">x6å®ç°æ¨¡å‹å¼€å‘æµç¨‹</a></li><li><a href="/rat-skill/pages/807b38/" class="sidebar-link">x6å®ç°æ³³é“å›¾æµç¨‹</a></li><li><a href="/rat-skill/pages/3ff69f/" class="sidebar-link">å®æ—¶ç›‘æ§å›¾è¡¨</a></li><li><a href="/rat-skill/pages/004cf1/" class="sidebar-link">å®æ—¶å¼•æ“å‰ç«¯éƒ¨ç½²</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>wdpæ•°æ®åº•åº§</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/3fa682/" class="sidebar-link">æ•°æ®åº•åº§å’Œwdpä»‹ç»åŠæŠ€æœ¯è¦ç‚¹</a></li><li><a href="/rat-skill/pages/9025b2/" class="sidebar-link">ambariå‰ç«¯æ”¹é€ åŠéƒ¨ç½²</a></li><li><a href="/rat-skill/pages/dba298/" class="sidebar-link">rangerç»„ä»¶å›½é™…åŒ–åŠéƒ¨ç½²</a></li><li><a href="/rat-skill/pages/e7ce72/" class="sidebar-link">wdpé¡¹ç›®å¼€å‘åŠéƒ¨ç½²</a></li><li><a href="/rat-skill/pages/a54c6f/" class="sidebar-link">wdpæ–°åŠŸèƒ½åµŒå…¥åŠå¾®å‰ç«¯å®è·µ</a></li><li><a href="/rat-skill/pages/8d1f89/" class="sidebar-link">wdpè¾…åŠ©åŠŸèƒ½</a></li><li><a href="/rat-skill/pages/7a56a7/" class="sidebar-link">wdpé¡¹ç›®å‰ç«¯ä¼˜åŒ–</a></li><li><a href="/rat-skill/pages/d87e61/" class="sidebar-link">wdp-ambariå‰ç«¯ç»„ä»¶æ ·å¼å°è£…ç‚¹</a></li><li><a href="/rat-skill/pages/fb64e5/" class="sidebar-link">wdpè¦æ”¹é€ amberiå‰ç«¯çš„ç‚¹</a></li><li><a href="/rat-skill/pages/1b4edf/" class="sidebar-link">wdpé¡¹ç›®ä¸­emberé…åˆvueä½¿ç”¨</a></li><li><a href="/rat-skill/pages/e7cb18/" class="sidebar-link">wdpé¡¹ç›®dockeråŠk8sä¹‹CI&amp;CDå®è·µ</a></li><li><a href="/rat-skill/pages/cd02e5/" class="sidebar-link">ambariå‰ç«¯åŠŸèƒ½ä¸šåŠ¡å†æ¬¡æ•´ç†</a></li><li><a href="/rat-skill/pages/1da590/" class="sidebar-link">wdpå‰ç«¯ç›¸å…³äº¤æ¥æ–‡æ¡£</a></li><li><a href="/rat-skill/pages/85ec6d/" class="sidebar-link">wdpåŠŸèƒ½ä»‹ç»</a></li><li><a href="/rat-skill/pages/5b6d52/" class="sidebar-link">wdpå„ç»„ä»¶å…³ç³»</a></li><li><a href="/rat-skill/pages/ef6048/" class="sidebar-link">wdpå®‰è£…æ‰‹å†Œè¯´æ˜</a></li><li><a href="/rat-skill/pages/2b174a/" class="sidebar-link">wdpä¸­pkgå’Œinstallæ•´åˆJKS</a></li><li><a href="/rat-skill/pages/6feed0/" class="sidebar-link">hadoop-yarn-uié¡¹ç›®</a></li><li><a href="/rat-skill/pages/f36ea0/" aria-current="page" class="active sidebar-link">clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#ç‰¹æ€§" class="sidebar-link">ç‰¹æ€§</a></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#åº”ç”¨åœºæ™¯" class="sidebar-link">åº”ç”¨åœºæ™¯</a></li></ul></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#å®‰è£…" class="sidebar-link">å®‰è£…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#å•ç‹¬å‘½ä»¤å®‰è£…" class="sidebar-link">å•ç‹¬å‘½ä»¤å®‰è£…</a></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#æå‰ç¦»çº¿ä¸‹è½½åŒ…" class="sidebar-link">æå‰ç¦»çº¿ä¸‹è½½åŒ…</a></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#å¸è½½é‡è£…" class="sidebar-link">å¸è½½é‡è£…</a></li></ul></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#é…ç½®å¯åŠ¨" class="sidebar-link">é…ç½®å¯åŠ¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#é…ç½®ç›¸å…³" class="sidebar-link">é…ç½®ç›¸å…³</a></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#å¯åŠ¨æœåŠ¡" class="sidebar-link">å¯åŠ¨æœåŠ¡</a></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#clickhouse-client" class="sidebar-link">clickhouse-client</a></li></ul></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#éƒ¨ç½²é›†ç¾¤" class="sidebar-link">éƒ¨ç½²é›†ç¾¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#zookeeperé…ç½®" class="sidebar-link">zookeeperé…ç½®</a></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#shardå’Œreplicaè®¾ç½®" class="sidebar-link">Shardå’ŒReplicaè®¾ç½®</a></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#é›†ç¾¤æ­å»º" class="sidebar-link">é›†ç¾¤æ­å»º</a></li></ul></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#åˆ†å¸ƒå¼è¡¨" class="sidebar-link">åˆ†å¸ƒå¼è¡¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#macrosè®¾ç½®" class="sidebar-link">macrosè®¾ç½®</a></li></ul></li><li class="sidebar-sub-header"><a href="/rat-skill/pages/f36ea0/#å‚è€ƒé“¾æ¥" class="sidebar-link">å‚è€ƒé“¾æ¥</a></li></ul></li><li><a href="/rat-skill/pages/344331/" class="sidebar-link">ckmanéƒ¨ç½²å®è·µ</a></li><li><a href="/rat-skill/pages/b71ec4/" class="sidebar-link">ckmanè„šæœ¬æ“ä½œ</a></li><li><a href="/rat-skill/pages/f3578d/" class="sidebar-link">wdpæ–°ç‰ˆæœ¬è®¾è®¡åŠé‡æ„</a></li><li><a href="/rat-skill/pages/59a48b/" class="sidebar-link">cdp&amp;FusionInsightç›¸å…³å¯¹æ ‡</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>äº‘IDE</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/a0317c/" class="sidebar-link">theiaä»‹ç»åŠè®¾ç½®ç›¸å…³</a></li><li><a href="/rat-skill/pages/2690df/" class="sidebar-link">OpenSumiå®˜ç½‘æ–‡æ¡£ç†Ÿæ‚‰</a></li><li><a href="/rat-skill/pages/62ca24/" class="sidebar-link">sumiéƒ¨ç½²</a></li><li><a href="/rat-skill/pages/9aaa4b/" class="sidebar-link">sumiå®è·µä¸åˆ†æ</a></li><li><a href="/rat-skill/pages/ce3542/" class="sidebar-link">åœ¨çº¿ideç¦»çº¿å¼€å‘åŠŸèƒ½å®ç°</a></li><li><a href="/rat-skill/pages/46656f/" class="sidebar-link">åœ¨çº¿ideéƒ¨ç½²</a></li><li><a href="/rat-skill/pages/34fa26/" class="sidebar-link">å·¥ä½œç©ºé—´workspaceæ¨¡å—åˆ†æ</a></li><li><a href="/rat-skill/pages/06607e/" class="sidebar-link">æ–‡ä»¶fileæ¨¡å—åˆ†æ</a></li><li><a href="/rat-skill/pages/41cfb8/" class="sidebar-link">ç»„ä»¶æ¨¡å—åˆ†æ</a></li><li><a href="/rat-skill/pages/a448ff/" class="sidebar-link">ç¼–è¾‘å™¨editæ¨¡å—åˆ†æ</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ubr</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/d4438d/" class="sidebar-link">é¡¹ç›®ä»‹ç»</a></li><li><a href="/rat-skill/pages/0ac066/" class="sidebar-link">ubr-h5æ­å»ºåŠä¼˜åŒ–</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>ç›‘ç®¡å¹³å°App</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/rat-skill/pages/3c551c/" class="sidebar-link">ç¯å¢ƒåŠä»‹ç»</a></li><li><a href="/rat-skill/pages/58cd18/" class="sidebar-link">ç›®å‰é¡¹ç›®nginxé…ç½®</a></li><li><a href="/rat-skill/pages/58087c/" class="sidebar-link">uni-appè„šæœ¬åŠè‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²</a></li><li><a href="/rat-skill/pages/3756d6/" class="sidebar-link">ä¸¤appé¡¹ç›®é‡æ„è¦è€ƒè™‘æ¢³ç†</a></li><li><a href="/rat-skill/pages/e78988/" class="sidebar-link">uni-appé¡¹ç›®å¼€å‘å®è·µh5ç«¯æ€»æ‹¬</a></li><li><a href="/rat-skill/pages/7eb6ea/" class="sidebar-link">uni-appé¡¹ç›®åŠ¨æ€è·¯ç”±å®è·µ</a></li><li><a href="/rat-skill/pages/a11c78/" class="sidebar-link">uni-appé¡¹ç›®è·¯ç”±æ‹¦æˆªåŠæƒé™å®è·µ</a></li><li><a href="/rat-skill/pages/8e3834/" class="sidebar-link">uni-appå‡çº§åŠŸèƒ½å®è·µ</a></li><li><a href="/rat-skill/pages/31895c/" class="sidebar-link">memsé¡¹ç›®éƒ¨ç½²å®è·µ</a></li><li><a href="/rat-skill/pages/3406fb/" class="sidebar-link">é¡¹ç›®ä¸­å›¾è¡¨ç›¸å…³å®è·µ</a></li></ul></section></li></ul></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- æ­£æ–¹å½¢ -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><ul class="breadcrumbs" data-v-33863c7e><li data-v-33863c7e><a href="/rat-skill/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-33863c7e></a></li> <li data-v-33863c7e><a href="/rat-skill/devops" title="å®è·µéƒ¨ç½²-ç›®å½•é¡µ" data-v-33863c7e>å®è·µéƒ¨ç½²</a></li> <li data-v-33863c7e><a href="/rat-skill/devops/#é¡¹ç›®å®è·µ" title="å®è·µéƒ¨ç½²#é¡¹ç›®å®è·µ" data-v-33863c7e>é¡¹ç›®å®è·µ</a></li> <li data-v-33863c7e><a href="/rat-skill/devops/#wdpæ•°æ®åº•åº§" title="å®è·µéƒ¨ç½²#wdpæ•°æ®åº•åº§" data-v-33863c7e>wdpæ•°æ®åº•åº§</a></li></ul> <div class="info" data-v-33863c7e><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-33863c7e><a href="https://github.com/samyzh" target="_blank" title="ä½œè€…" class="beLink" data-v-33863c7e>samyzh</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2023-11-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          clickhouseå®‰è£…åŠé›†ç¾¤æ­å»º
        </h1>  <div class="theme-vdoing-content content__default"><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <p>ClickHouseæ˜¯ä¸€ä¸ªé¢å‘åˆ—çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼Œç”¨äºåœ¨çº¿åˆ†æå¤„ç†æŸ¥è¯¢ï¼ˆOLAPï¼‰ã€‚</p> <p>ç®€å•çš„è¯´ClickHouseä½œä¸ºåˆ†æå‹æ•°æ®åº“ï¼Œä¸‰å¤§ç‰¹ç‚¹ï¼š<strong>ä¸€æ˜¯è·‘åˆ†å¿«ï¼Œ äºŒæ˜¯åŠŸèƒ½å¤š ï¼Œä¸‰æ˜¯æ–‡è‰ºèŒƒã€‚</strong></p> <h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="header-anchor">#</a> ç‰¹æ€§</h3> <ul><li>çœŸæ­£é¢å‘åˆ—çš„DBMSã€æ”¯æŒå‹ç¼©</li> <li>æ”¯æŒæ™®é€šç¡¬ç›˜å­˜å‚¨ã€æ”¯æŒå¤šæ ¸å¹¶è¡Œå¤„ç†</li> <li>æ”¯æŒSQLã€æ”¯æŒçŸ¢é‡å¼•æ“ã€æ”¯æŒå®æ—¶æ•°æ®æ›´æ–°</li> <li>æ”¯æŒç´¢å¼•ã€æ”¯æŒåœ¨çº¿æŸ¥è¯¢</li> <li>æ”¯æŒè¿‘ä¼¼è®¡ç®—ã€æ”¯æŒæ•°æ®è¾…åŠ©å’Œæ•°æ®å®Œæ•´æ€§</li></ul> <p><img src="/rat-skill/assets/img/ç‰¹æ€§.7f2f3341.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> <h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="header-anchor">#</a> åº”ç”¨åœºæ™¯</h3> <ul><li>ç»å¤§å¤šæ•°è¯·æ±‚éƒ½æ˜¯ç”¨äºè¯»è®¿é—®çš„ï¼Œæ•°æ®åªæ˜¯æ·»åŠ åˆ°æ•°æ®åº“ï¼Œæ²¡æœ‰å¿…è¦ä¿®æ”¹</li> <li>æ•°æ®éœ€è¦ä»¥å¤§æ‰¹é‡ï¼ˆå¤§äº1000è¡Œï¼‰è¿›è¡Œæ›´æ–°ï¼Œè€Œä¸æ˜¯å•è¡Œæ›´æ–°ï¼›æˆ–è€…æ ¹æœ¬æ²¡æœ‰æ›´æ–°æ“ä½œ</li> <li>è¯»å–æ•°æ®æ—¶ï¼Œä¼šä»æ•°æ®åº“ä¸­æå–å‡ºå¤§é‡çš„è¡Œï¼Œä½†åªç”¨åˆ°ä¸€å°éƒ¨åˆ†åˆ—</li> <li>è¡¨å¾ˆâ€œå®½â€ï¼Œå³è¡¨ä¸­åŒ…å«å¤§é‡çš„åˆ—</li> <li>æŸ¥è¯¢é¢‘ç‡ç›¸å¯¹è¾ƒä½ï¼ˆé€šå¸¸æ¯å°æœåŠ¡å™¨æ¯ç§’æŸ¥è¯¢æ•°ç™¾æ¬¡æˆ–æ›´å°‘ï¼‰</li> <li>å¯¹äºç®€å•æŸ¥è¯¢ï¼Œå…è®¸å¤§çº¦50æ¯«ç§’çš„å»¶è¿Ÿ</li> <li>åˆ—çš„å€¼æ˜¯æ¯”è¾ƒå°çš„æ•°å€¼å’ŒçŸ­å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼Œæ¯ä¸ªURLåªæœ‰60ä¸ªå­—èŠ‚ï¼‰</li> <li>åœ¨å¤„ç†å•ä¸ªæŸ¥è¯¢æ—¶éœ€è¦é«˜ååé‡ï¼ˆæ¯å°æœåŠ¡å™¨æ¯ç§’é«˜è¾¾æ•°åäº¿è¡Œï¼‰</li> <li>ä¸éœ€è¦äº‹åŠ¡ï¼Œæ•°æ®ä¸€è‡´æ€§è¦æ±‚è¾ƒä½</li> <li>æ¯æ¬¡æŸ¥è¯¢ä¸­åªä¼šæŸ¥è¯¢ä¸€ä¸ªå¤§è¡¨ã€‚é™¤äº†ä¸€ä¸ªå¤§è¡¨ï¼Œå…¶ä½™éƒ½æ˜¯å°è¡¨</li> <li>æŸ¥è¯¢ç»“æœæ˜¾è‘—å°äºæ•°æ®æºã€‚å³æ•°æ®æœ‰è¿‡æ»¤æˆ–èšåˆã€‚è¿”å›ç»“æœä¸è¶…è¿‡å•ä¸ªæœåŠ¡å™¨å†…å­˜å¤§å°</li></ul> <h2 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h2> <h3 id="å•ç‹¬å‘½ä»¤å®‰è£…"><a href="#å•ç‹¬å‘½ä»¤å®‰è£…" class="header-anchor">#</a> å•ç‹¬å‘½ä»¤å®‰è£…</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils
<span class="token function">sudo</span> yum-config-manager --add-repo https://packages.clickhouse.com/rpm/clickhouse.repo
<span class="token function">sudo</span> yum <span class="token function">install</span> -y clickhouse-server clickhouse-client

<span class="token comment">#å¦‚æœå®‰è£…æ—¶å‡ºç°warning: rpmts_HdrFromFdno: Header V4 RSA/SHA1 Signature, key ID e0c56bd4: NOKEYé”™è¯¯å¯¼è‡´æ— æ³•å®‰è£…ï¼Œéœ€è¦åœ¨å®‰è£…å‘½ä»¤ä¸­æ·»åŠ â€”nogpgcheckæ¥è§£å†³ã€‚</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> -y clickhouse-server clickhouse-client --nogpgcheck

<span class="token function">sudo</span> /etc/init.d/clickhouse-server start
clickhouse-client <span class="token comment"># or &quot;clickhouse-client --password&quot; if you set up a password.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="æå‰ç¦»çº¿ä¸‹è½½åŒ…"><a href="#æå‰ç¦»çº¿ä¸‹è½½åŒ…" class="header-anchor">#</a> æå‰ç¦»çº¿ä¸‹è½½åŒ…</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>yumdownloader --downloadonly clickhouse-server clickhouse-client  clickhouse-common-static

root@host116<span class="token punctuation">[</span>/var/www/html/files/ckman/clickhouse<span class="token punctuation">]</span><span class="token comment"># ls -lh</span>
æ€»ç”¨é‡ 120K
-rw-r--r-- <span class="token number">1</span> root root      <span class="token number">6511</span> <span class="token number">6</span>æœˆ   <span class="token number">2</span> <span class="token number">2018</span> clickhouse-client-1.1.54385-2.x86_64.rpm
-rw-r--r-- <span class="token number">1</span> root root     <span class="token number">30955</span> <span class="token number">2</span>æœˆ  <span class="token number">17</span> <span class="token number">22</span>:51 clickhouse-client-22.2.2.1-2.noarch.rpm
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">223610019</span> <span class="token number">2</span>æœˆ  <span class="token number">17</span> <span class="token number">22</span>:51 clickhouse-common-static-22.2.2.1-2.x86_64.rpm
-rw-r--r-- <span class="token number">1</span> root root     <span class="token number">21437</span> <span class="token number">6</span>æœˆ   <span class="token number">2</span> <span class="token number">2018</span> clickhouse-server-1.1.54385-2.x86_64.rpm
-rw-r--r-- <span class="token number">1</span> root root     <span class="token number">56238</span> <span class="token number">2</span>æœˆ  <span class="token number">17</span> <span class="token number">22</span>:51 clickhouse-server-22.2.2.1-2.noarch.rpm

<span class="token comment">#ç¦»çº¿å®‰è£…åªéœ€è¦ä¸‹é¢ä¸‰ä¸ªåŒ…</span>
-rw-r--r-- <span class="token number">1</span> root root     <span class="token number">30955</span> <span class="token number">2</span>æœˆ  <span class="token number">17</span> <span class="token number">22</span>:51 clickhouse-client-22.2.2.1-2.noarch.rpm
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">223610019</span> <span class="token number">2</span>æœˆ  <span class="token number">17</span> <span class="token number">22</span>:51 clickhouse-common-static-22.2.2.1-2.x86_64.rpm
-rw-r--r-- <span class="token number">1</span> root root     <span class="token number">56238</span> <span class="token number">2</span>æœˆ  <span class="token number">17</span> <span class="token number">22</span>:51 clickhouse-server-22.2.2.1-2.noarch.rpm

<span class="token function">rpm</span> -ivh clickhouse*.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="å¸è½½é‡è£…"><a href="#å¸è½½é‡è£…" class="header-anchor">#</a> å¸è½½é‡è£…</h3> <p>å¸è½½åŠåˆ é™¤å®‰è£…æ–‡ä»¶</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>yum list installed <span class="token operator">|</span> <span class="token function">grep</span> clickhouse
yum remove -y clickhouse-common-static
yum remove -y clickhouse-server-common

<span class="token comment">#yum remove -y clickhouse-common-static clickhouse-server-common clickhouse-server clickhouse-client</span>

<span class="token function">rm</span> -rf /var/lib/clickhouse /ckdata1
<span class="token function">rm</span> -rf /etc/clickhouse-*
<span class="token function">rm</span> -rf /var/log/clickhouse-server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸‹è½½rpmåŒ…</p> <p>https://packagecloud.io/app/Altinity/clickhouse/search?</p> <p>å®‰è£…</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>yum <span class="token function">install</span> -y clickhouse-common-static-18.12.17-1.el7.x86_64.rpm
yum <span class="token function">install</span> -y clickhouse-server-common-18.12.17-1.el7.x86_64.rpm
yum <span class="token function">install</span> -y clickhouse-server-18.12.17-1.el7.x86_64.rpm
yum <span class="token function">install</span> -y clickhouse-client-18.12.17-1.el7.x86_64.rpm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å¯åŠ¨æŸ¥è¯¢æœåŠ¡</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#å¯åŠ¨æœåŠ¡</span>
<span class="token function">service</span> clickhouse-server start

<span class="token comment">#æŸ¥è¯¢æœåŠ¡çŠ¶æ€</span>
<span class="token function">service</span> clickhouse-server status

<span class="token comment">#åˆ¤æ–­clientç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œé»˜è®¤ä¸º9000</span>
<span class="token function">netstat</span> -tunlp<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">9000</span>

<span class="token comment">#å ç”¨åˆ™å¯ä»¥ä¿®æ”¹serverçš„é…ç½®æ–‡ä»¶ã€‚å¼€å¯è®¿é—®æƒé™ ä¿®æ”¹serverçš„é…ç½®æ–‡ä»¶</span>
<span class="token operator">&lt;</span>listen_host<span class="token operator">&gt;</span>::<span class="token operator">&lt;</span>listen_host<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>listen_host<span class="token operator">&gt;</span>::<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>listen_host<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>listen_host<span class="token operator">&gt;</span><span class="token number">127.0</span>.0.<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>listen_host<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="é…ç½®å¯åŠ¨"><a href="#é…ç½®å¯åŠ¨" class="header-anchor">#</a> é…ç½®å¯åŠ¨</h2> <h3 id="é…ç½®ç›¸å…³"><a href="#é…ç½®ç›¸å…³" class="header-anchor">#</a> é…ç½®ç›¸å…³</h3> <h4 id="ç³»ç»Ÿé…ç½®"><a href="#ç³»ç»Ÿé…ç½®" class="header-anchor">#</a> ç³»ç»Ÿé…ç½®</h4> <p>clickhouseçš„serveré…ç½®ï¼Œåœ¨/etc/clickhouse-server/config.xmlåŠuser.xmlï¼›</p> <ul><li>å‰è€…æ˜¯clickhouse çš„ç³»ç»Ÿé…ç½®ï¼ŒåŒ…æ‹¬æ—¥å¿—ï¼ŒæœåŠ¡éƒ¨ç½²ipï¼Œzkç­‰é…ç½®ã€‚æœåŠ¡é…ç½®ï¼šconfig.xml</li> <li>åè€…æ˜¯å½“å‰èŠ‚ç‚¹æœåŠ¡çš„é…ç½®ï¼ŒåŒ…æ‹¬ç”¨æˆ·åå¯†ç ï¼Œ å†…å­˜å¤§å°é™åˆ¶ç­‰ã€‚ç”¨æˆ·é…ç½®ï¼šusers.xml</li></ul> <p><img src="/rat-skill/assets/img/image-20220525153905622.3633457d.png" alt="image-20220525153905622"></p> <h5 id="config-xml"><a href="#config-xml" class="header-anchor">#</a> config.xml</h5> <p><code>config.xml</code>æ–‡ä»¶æ˜¯<code>clickhouse</code>é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œè·¯å¾„ä¸º<code>/etc/clickhouse-server/config.xml</code>ã€‚</p> <p><code>config.xml</code>ä¸­å¯ä»¥é…ç½®çš„å†…å®¹æœ‰å¾ˆå¤šï¼Œä¸‹é¢èŠ‚é€‰ä¸€äº›æ¯”è¾ƒé‡è¦çš„é…ç½®é¡¹æ¥è¯´æ˜ä¸€ä¸‹ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>yandex</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- clickhouseæ—¥å¿—ç›¸å…³çš„é…ç½® --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">&gt;</span></span>trace<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log</span><span class="token punctuation">&gt;</span></span>/var/log/clickhouse-server/clickhouse-server.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--æ—¥å¿—è·¯å¾„--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>errorlog</span><span class="token punctuation">&gt;</span></span>/var/log/clickhouse-server/clickhouse-server.err.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>errorlog</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>size</span><span class="token punctuation">&gt;</span></span>1000M<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>size</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>count</span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>count</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>http_port</span><span class="token punctuation">&gt;</span></span>8123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>http_port</span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!--http å®¢æˆ·ç«¯è¿æ¥ckçš„ç«¯å£--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tcp_port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tcp_port</span><span class="token punctuation">&gt;</span></span>     <span class="token comment">&lt;!--tcp å®¢æˆ·ç«¯è¿æ¥ckçš„ç«¯å£ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql_port</span><span class="token punctuation">&gt;</span></span>9004<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql_port</span><span class="token punctuation">&gt;</span></span> 

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listen_host</span><span class="token punctuation">&gt;</span></span>::<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listen_host</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--ipåœ°å€ï¼Œé…ç½®æˆ::å¯ä»¥è¢«ä»»æ„ipv4å’Œipv6çš„å®¢æˆ·ç«¯è¿æ¥, éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæœºå™¨æœ¬èº«ä¸æ”¯æŒipv6ï¼Œè¿™æ ·é…ç½®æ˜¯æ— æ³•å¯åŠ¨clickhouseçš„ï¼Œè¿™æ—¶å€™å¯ä»¥æ”¹æˆ0.0.0.0 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/var/lib/clickhouse/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--ckå­˜æ”¾æ•°æ®åº“å†…å®¹çš„è·¯å¾„--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user_files_path</span><span class="token punctuation">&gt;</span></span>/var/lib/clickhouse/user_files/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user_files_path</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--File å¼•æ“æ–‡ä»¶å­˜æ”¾çš„è·¯å¾„ï¼Œä¸€èˆ¬å¯è®¾ç½®ä¸º/ï¼Œè¿™æ ·å°±å¯ä»¥æŒ‡å®šç»å¯¹è·¯å¾„--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>users_config</span><span class="token punctuation">&gt;</span></span>users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>users_config</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--æŒ‡å®šç”¨æˆ·é…ç½®æ–‡ä»¶--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default_database</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default_database</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--æŒ‡å®šé»˜è®¤æ•°æ®åº“--&gt;</span>
    
    <span class="token comment">&lt;!--é…ç½®prometheusä¿¡æ¯--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prometheus</span><span class="token punctuation">&gt;</span></span>     
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>endpoint</span><span class="token punctuation">&gt;</span></span>/metrics<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>endpoint</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9363<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>metrics</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>metrics</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>events</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>events</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>asynchronous_metrics</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>asynchronous_metrics</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>status_info</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>status_info</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prometheus</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include_from</span><span class="token punctuation">&gt;</span></span>/etc/clickhouse-server/metrika.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include_from</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--æŒ‡å®šmetrika.xmlé…ç½®æ–‡ä»¶--&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h5 id="users-xml"><a href="#users-xml" class="header-anchor">#</a> users.xml</h5> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>users</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--ç”¨æˆ·åä¸ºck--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ck</span><span class="token punctuation">&gt;</span></span>    
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--æ˜æ–‡å¯†ç --&gt;</span>
        <span class="token comment">&lt;!--
        SHA256åŠ å¯†å¯†ç ï¼Œå¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆï¼š
        PASSWORD=$(base64 &lt; /dev/urandom | head -c8); echo &quot;$PASSWORD&quot;; echo -n &quot;$PASSWORD&quot; | sha256sum | tr -d '-'
        &lt;password_sha256_hex&gt;8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92&lt;/password_sha256_hex&gt;
        SHA1åŠ å¯†æ–¹å¼åŠ å¯†çš„å¯†ç ï¼Œå¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆ
        PASSWORD=$(base64 &lt; /dev/urandom | head -c8); echo &quot;$PASSWORD&quot;; echo -n &quot;$PASSWORD&quot; | sha1sum | tr -d '-' | xxd -r -p | sha1sum | tr -d '-'
        &lt;password_double_sha1_hex&gt;7c4a8d09ca3762af61e59520943dc26494f8941b&lt;/password_double_sha1_hex&gt;
        --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>networks</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ip</span><span class="token punctuation">&gt;</span></span>::/0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ip</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>networks</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>quota</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>quota</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ck</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>users</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h5 id="metrika-xml"><a href="#metrika-xml" class="header-anchor">#</a> metrika.xml</h5> <p><code>metrika.xml</code>ä¸»è¦æ˜¯ç”¨æ¥æœåŠ¡äºé›†ç¾¤æ­å»ºçš„ã€‚å®ƒé‡Œé¢æ˜¯å…³äº<code>zookeeper</code>ã€<code>shard</code>ä»¥åŠ<code>replica</code>çš„é…ç½®ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œå°†åœ¨éƒ¨ç½²é›†ç¾¤ä¸­è¯¦ç»†è¯´æ˜ã€‚</p> <h4 id="æ—¥å¿—æ–‡ä»¶è·¯å¾„"><a href="#æ—¥å¿—æ–‡ä»¶è·¯å¾„" class="header-anchor">#</a> æ—¥å¿—æ–‡ä»¶è·¯å¾„</h4> <p>é»˜è®¤çš„æ—¥å¿—æ–‡ä»¶è·¯å¾„æ˜¯ï¼š<code>/var/log/clickhouse-server/</code></p> <p><img src="/rat-skill/assets/img/image-20220525153943727.2e2b1360.png" alt="image-20220525153943727"></p> <h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="header-anchor">#</a> å¯åŠ¨æœåŠ¡</h3> <ul><li>åå°æœåŠ¡å¯åŠ¨ï¼š<code>systemctl start clickhouse-server</code></li> <li>å‰ç«¯æœåŠ¡å¯åŠ¨ï¼š<code>clickhouse-server start</code></li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>systemctl start clickhouse-server

<span class="token punctuation">[</span>root@node5 ck<span class="token punctuation">]</span><span class="token comment"># clickhouse-client </span>
ClickHouse client version <span class="token number">20.9</span>.3.45 <span class="token punctuation">(</span>official build<span class="token punctuation">)</span>.
Connecting to localhost:9000 as user default.
Connected to ClickHouse server version <span class="token number">20.9</span>.3 revision <span class="token number">54439</span>.
node5 <span class="token builtin class-name">:</span><span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token number">1</span>
SELECT <span class="token number">1</span>
â”Œâ”€1â”€â”
â”‚ <span class="token number">1</span> â”‚
â””â”€â”€â”€â”˜
<span class="token number">1</span> rows <span class="token keyword">in</span> set. Elapsed: <span class="token number">0.003</span> sec. 
node5 <span class="token builtin class-name">:</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="clickhouse-client"><a href="#clickhouse-client" class="header-anchor">#</a> clickhouse-client</h3> <p>ClickHouseå®‰è£…åŒ…ä¸­æä¾›äº†clickhouse-clientå·¥å…·ï¼Œè¿™ä¸ªå®¢æˆ·ç«¯åœ¨è¿è¡Œshellç¯å¢ƒä¸­ï¼Œä½¿ç”¨TCP æ–¹å¼è¿æ¥clickhouse-serveræœåŠ¡ã€‚</p> <p><code>clickhouse-client</code>æ˜¯ä¸€ä¸ªå¸¦å‘½ä»¤è¡Œçš„å®¢æˆ·ç«¯å·¥å…·ï¼Œå®ƒé€šè¿‡<code>TCP</code>çš„<code>9000</code>ç«¯å£è¿æ¥<code>clickhouse-server</code>ï¼Œå¯ä»¥åœ¨è¯¥å‘½ä»¤è¡Œå·¥å…·é‡Œè¿›è¡Œå„ç§æ“ä½œã€‚é€šè¿‡ <code>clickhouse-client --help</code>å¯ä»¥æŸ¥çœ‹å·¥å…·çš„å¸®åŠ©æ–‡æ¡£ï¼Œå¯ä»¥çœ‹åˆ°è¯¥å·¥å…·æ”¯æŒå¾ˆå¤šå‚æ•°ï¼Œæ­¤å¤„ç®€è¦è¯´ä¸€ä¸‹ä¸€äº›å¸¸ç”¨çš„å‚æ•°ã€‚</p> <p>è¦è¿è¡Œè¯¥å®¢æˆ·ç«¯å·¥å…·å¯ä»¥é€‰æ‹©ä½¿ç”¨äº¤äº’å¼ä¸éäº¤äº’å¼ï¼ˆæ‰¹é‡ï¼‰ä¸¤ç§æ¨¡å¼ï¼š</p> <ul><li>ä½¿ç”¨éäº¤äº’å¼æŸ¥è¯¢æ—¶éœ€è¦æŒ‡å®š--queryå‚æ•°ï¼›</li> <li>åœ¨äº¤äº’æ¨¡å¼ä¸‹åˆ™éœ€è¦æ³¨æ„æ˜¯å¦ä½¿ç”¨â€”mutilineå‚æ•°æ¥å¼€å¯å¤šè¡Œæ¨¡å¼ã€‚</li></ul> <h4 id="å‚æ•°ä»‹ç»"><a href="#å‚æ•°ä»‹ç»" class="header-anchor">#</a> <strong>å‚æ•°ä»‹ç»</strong></h4> <p>clickhouse-clientæä¾›äº†å¾ˆå¤šå‚æ•°å¯ä¾›ä½¿ç”¨ï¼Œå¸¸ç”¨çš„</p> <ul><li>--host,-h æœåŠ¡ç«¯çš„ host åç§°, é»˜è®¤æ˜¯ 'localhost'ã€‚ æ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨ host åç§°æˆ–è€… IPv4 æˆ– IPv6 åœ°å€ã€‚</li> <li>--port è¿æ¥æœåŠ¡ç«¯çš„ç«¯å£ï¼Œé»˜è®¤å€¼9000</li> <li>--user,-u è®¿é—®çš„ç”¨æˆ·åï¼Œé»˜è®¤default</li> <li>--password è®¿é—®ç”¨æˆ·çš„å¯†ç ï¼Œé»˜è®¤ç©ºå­—ç¬¦ä¸²</li> <li>--query,-q éäº¤äº’æ¨¡å¼ä¸‹çš„æŸ¥è¯¢è¯­å¥</li> <li>--database,-d è¿æ¥çš„æ•°æ®åº“ï¼Œé»˜è®¤æ˜¯default</li> <li>--multiline,-m ä½¿ç”¨å¤šè¡Œæ¨¡å¼ï¼Œåœ¨å¤šè¡Œæ¨¡å¼ä¸‹ï¼Œå›è½¦é”®ä»…è¡¨ç¤ºæ¢è¡Œã€‚é»˜è®¤ä¸ä½¿ç”¨å¤šè¡Œæ¨¡å¼ã€‚</li> <li>--multiquery,-n ä½¿ç”¨â€,â€åˆ†å‰²çš„å¤šä¸ªæŸ¥è¯¢ï¼Œä»…åœ¨éäº¤äº’æ¨¡å¼ä¸‹æœ‰æ•ˆ</li> <li>--format, -f ä½¿ç”¨æŒ‡å®šæ ¼å¼åŒ–è¾“å‡ºç»“æœ</li> <li>--vertical, -E ä½¿ç”¨å‚ç›´æ ¼å¼è¾“å‡ºï¼Œå³æ¯ä¸ªå€¼ä½¿ç”¨ä¸€è¡Œæ˜¾ç¤º</li> <li>--time, -t æ‰“å°æŸ¥è¯¢æ—¶é—´åˆ°stderrä¸­</li> <li>--stacktrace å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œä¼šæ‰“å°å †æ ˆè·Ÿè¸ªä¿¡æ¯</li> <li>--config-file ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶</li> <li>--use_client_time_zone ä½¿ç”¨æœåŠ¡ç«¯æ—¶åŒº</li> <li>quit,exit è¡¨ç¤ºé€€å‡ºå®¢æˆ·ç«¯</li> <li>Ctrl+D,Ctrl+C è¡¨ç¤ºé€€å‡ºå®¢æˆ·ç«¯</li></ul> <table><thead><tr><th>å‚æ•°</th> <th>ç”¨æ³•ä¸¾ä¾‹</th> <th>è¯´æ˜</th> <th>å¤‡æ³¨</th></tr></thead> <tbody><tr><td><code>-h [ --host ]. |</code>-h 192.168.0.1<code></code>--host=192.168.0.1<code>| æŒ‡å®šè¿æ¥</code>clickhouse<code>æœåŠ¡çš„</code>host<code>åœ°å€ï¼Œä¸€èˆ¬æ˜¯è¿œç¨‹è¿æ¥å…¶ä»–æœºå™¨ä¸Šçš„</code>clickhouse<code>æœåŠ¡ã€‚ |</code>clickhouse<code>è¦æƒ³è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œéœ€è¦å°†é…ç½®æ–‡ä»¶ä¸­</code>&lt;listen_host&gt;::&lt;/listen_host&gt;`é€‰é¡¹å¼€å¯ã€‚</td> <td></td> <td></td> <td></td></tr> <tr><td><code>--port</code></td> <td><code>--port=9000</code></td> <td>æŒ‡å®šè¿œç¨‹è¿æ¥<code>clickhouse</code>æœåŠ¡çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸º<code>9000</code></td> <td>è¿™ä¸ªç«¯å£å·å¯é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®ï¼š<code>&lt;tcp_port&gt;9000&lt;/tcp_port&gt;</code></td></tr> <tr><td><code>-u [ --user ]. |</code>-u ck<code></code>--user=ck<code>| æŒ‡å®šç™»å½•</code>clickhouse<code>çš„ç”¨æˆ·ï¼Œé»˜è®¤æ˜¯</code>default<code>|</code>default<code>ç”¨æˆ·æ˜¯å†…ç½®çš„ç”¨æˆ·ã€‚å¯ä»¥é€šè¿‡</code>users.xml`é…ç½®æ–‡ä»¶è‡ªå®šä¹‰ç”¨æˆ·ä¿¡æ¯ã€‚</td> <td></td> <td></td> <td></td></tr> <tr><td><code>--password</code></td> <td><code>--password=123456</code></td> <td>æŒ‡å®šç™»å½•<code>clickhouse</code>çš„å¯†ç </td> <td><code>default</code>ç”¨æˆ·æ˜¯æ²¡æœ‰å¯†ç çš„ã€‚å¯†ç å¯é…ç½®æ˜æ–‡å¯†ç å’ŒåŠ å¯†å¯†ç </td></tr> <tr><td><code>-q [ --query ]</code></td> <td><code>-q &quot;show databases&quot;</code></td> <td>é€šè¿‡å‘½ä»¤è¡Œç›´æ¥è¾“å…¥<code>sql</code>ï¼Œå³æ—¶è¿”å›ï¼Œè€Œä¸éœ€è¦è¿›å…¥å®¢æˆ·ç«¯å†…éƒ¨</td> <td></td></tr> <tr><td><code>-m [ --multiline ]</code></td> <td></td> <td>åœ¨å®¢æˆ·ç«¯å†…æ”¯æŒå¤šè¡Œè¯­å¥æ“ä½œï¼Œä»¥åˆ†å·ä½œä¸ºç»“æŸç¬¦</td> <td>å¦‚æœä¸æŒ‡å®š<code>-m</code>å‚æ•°ï¼Œæ¯å¥<code>sql</code>è¯­æ³•åå¯åŠ åˆ†å·ï¼Œä¹Ÿå¯ä¸åŠ ï¼Œé»˜è®¤ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªè¯­å¥</td></tr> <tr><td><code>-n [ --multiquery ]</code></td> <td></td> <td>å‘½ä»¤è¡Œç›´æ¥è¾“å…¥è¯­å¥æ—¶æ”¯æŒå¤šæ¡sqlè¯­å¥ï¼Œä¸€èˆ¬å’Œ<code>-q</code>ç»“åˆä½¿ç”¨</td> <td>æ³¨æ„<code>-n</code>çš„ä½ç½®ä¸èƒ½åœ¨<code>-q</code>å’Œ<code>sql</code>è¯­å¥ä¹‹é—´</td></tr> <tr><td><code>-f [ --format ]</code></td> <td><code>-f JSON</code></td> <td>è®¾ç½®è¾“å‡ºçš„æ˜¾ç¤ºæ ¼å¼</td> <td>æ”¯æŒ<code>JSON</code>ã€<code>CSV</code>ã€<code>TSV</code>ç­‰ï¼Œè¯¦è§<a href="https://link.segmentfault.com/?enc=%2BwolcuGgtnIUraMKq3%2FH7Q%3D%3D.lR%2B1R2ScPKxhG3aHdDECDD1VOGcbXPiFufchl4vbOrCNHbuiJYlvg27HcCUiXQnQ30POVXHPLzlSYq4oE2LtHw%3D%3D" target="_blank" rel="noopener noreferrer">https://clickhouse.tech/docs/...<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr></tbody></table> <h4 id="ç™»å½•å‘½ä»¤"><a href="#ç™»å½•å‘½ä»¤" class="header-anchor">#</a> <strong>ç™»å½•å‘½ä»¤</strong></h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>clickhouse-client -m --host node2.xxx.cn --port <span class="token number">9999</span> --user root --password <span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="header-anchor">#</a> å¯¼å…¥æ•°æ®</h4> <p>å‡è®¾æˆ‘ä»¬åœ¨<code>default</code>æ•°æ®åº“ä¸‹æœ‰ä¸€å¼ <code>test</code>è¡¨ï¼Œåœ¨<code>/data01</code>ç›®å½•ä¸‹æœ‰ä¸€ä¸ª<code>file.csv</code>çš„æ–‡ä»¶ï¼Œå¯é€šè¿‡å¦‚ä¸‹æ–¹å¼å°†æ•°æ®å¯¼å…¥åˆ°<code>test</code>è¡¨ä¸­ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>clickhouse<span class="token operator">-</span>client <span class="token comment">--database=test --query=&quot;INSERT INTO test FORMAT CSV&quot; &lt; /data01/file.csv</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="éƒ¨ç½²é›†ç¾¤"><a href="#éƒ¨ç½²é›†ç¾¤" class="header-anchor">#</a> éƒ¨ç½²é›†ç¾¤</h2> <p><code>Clickhouse</code> çš„é›†ç¾¤æ˜¯ä¾èµ–äº<code>zookeeper</code>çš„ã€‚æ‰€ä»¥åœ¨æ­å»º<code>clickhouse</code>é›†ç¾¤ä¹‹å‰ï¼Œé¦–å…ˆè¦æœ‰ä¸€ä¸ª<code>zookeeper</code>é›†ç¾¤ã€‚</p> <p>å…³äº<code>zookeeper</code>é›†ç¾¤çš„æ­å»ºï¼Œæ­¤å¤„ä¸å†å±•å¼€è¯¦è¿°ï¼Œå¦‚æœ‰ä¸æ¸…æ¥šçš„è¯·è‡ªè¡Œç™¾åº¦ã€‚(æœ¬æ–‡é»˜è®¤<code>zookeeper</code>é›†ç¾¤å·²ç»æ­å»ºå¥½)</p> <p>å‰é¢è¯´è¿‡ï¼Œ<code>clickhouse</code>é›†ç¾¤çš„ç›¸å…³é…ç½®éƒ½åœ¨<code>metrika.xml</code>é…ç½®æ–‡ä»¶é‡Œï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘ä»¬éœ€è¦é…ç½®å¥½<code>metrika.xml</code>ã€‚<code>metrika.xml</code>çš„è·¯å¾„å¯ä»¥åœ¨<code>config.xml</code>ä¸­é€šè¿‡<code>&lt;include_from&gt;</code>æŒ‡å®šã€‚</p> <h3 id="zookeeperé…ç½®"><a href="#zookeeperé…ç½®" class="header-anchor">#</a> zookeeperé…ç½®</h3> <p><code>zookeeper</code> ä¸ä¸€å®šè¦å’Œ<code>ck</code>çš„èŠ‚ç‚¹å®‰è£…åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œåªè¦<code>ck</code>çš„å‡ ç‚¹èƒ½å¤Ÿè®¿é—®zkå³å¯ã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zookeeper-servers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zookeeper-servers</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="shardå’Œreplicaè®¾ç½®"><a href="#shardå’Œreplicaè®¾ç½®" class="header-anchor">#</a> Shardå’ŒReplicaè®¾ç½®</h3> <p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ºä¸€ä¸ªå®Œæ•´çš„<code>shard</code>å’Œ<code>Replica</code>çš„é…ç½®ï¼Œä»¥ä¸‹ä¸º<code>test</code>é›†ç¾¤é…ç½®<code>2</code>åˆ†ç‰‡<code>2</code>å‰¯æœ¬ã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>clickhouse_remote_servers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>      <span class="token comment">&lt;!--é›†ç¾¤çš„åå­—--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shard</span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!--shardåˆ†ç‰‡çš„é…ç½®--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>internal_replication</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>internal_replication</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--æ˜¯å¦åªå°†æ•°æ®å†™å…¥å…¶ä¸­ä¸€ä¸ªå‰¯æœ¬ï¼Œé»˜è®¤ä¸ºfalse--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!--shardå‰¯æœ¬çš„é…ç½®--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shard</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shard</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>internal_replication</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>internal_replication</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shard</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>clickhouse_remote_servers</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ä¸€ä¸ªå®Œæ•´çš„<code>metrika.xml</code>å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>yandex</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zookeeper-servers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zookeeper-servers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>clickhouse_remote_servers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>      <span class="token comment">&lt;!--é›†ç¾¤çš„åå­—--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shard</span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!--shardåˆ†ç‰‡çš„é…ç½®--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>internal_replication</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>internal_replication</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--æ˜¯å¦åªå°†æ•°æ®å†™å…¥å…¶ä¸­ä¸€ä¸ªå‰¯æœ¬ï¼Œé»˜è®¤ä¸ºfalse--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!--replicaå‰¯æœ¬çš„é…ç½®--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shard</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shard</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>internal_replication</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>internal_replication</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shard</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>clickhouse_remote_servers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>yandex</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="é›†ç¾¤æ­å»º"><a href="#é›†ç¾¤æ­å»º" class="header-anchor">#</a> é›†ç¾¤æ­å»º</h3> <p>é¦–å…ˆæŒ‰ç…§å•èŠ‚ç‚¹å®‰è£…çš„æ–¹å¼ï¼Œåœ¨<code>node1</code>ï¼Œ<code>node2</code>ï¼Œ<code>node3</code>ï¼Œ<code>node4</code>å››ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…å¥½<code>clickhouse</code>ã€‚</p> <p>ä¿®æ”¹<code>config.xml</code>ï¼Œä¸»è¦ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--1. å¢åŠ listen_hostï¼Œå…è®¸è¿œç¨‹è®¿é—®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listen_host</span><span class="token punctuation">&gt;</span></span>::<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listen_host</span><span class="token punctuation">&gt;</span></span>   

<span class="token comment">&lt;!--2. ä¿®æ”¹pathè·¯å¾„ï¼ŒæŒ‡å®šæ•°æ®å­˜æ”¾ä½ç½®ï¼Œæˆ‘è¿™é‡ŒæŒ‡å®š/data01/clickhouseç›®å½•--&gt;</span>
<span class="token comment">&lt;!-- éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè·¯å¾„å¿…é¡»æå‰å­˜åœ¨ï¼Œä¸”clickhouseç”¨æˆ·æœ‰æƒé™è®¿é—® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/data01/clickhouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tmp_path</span><span class="token punctuation">&gt;</span></span>/data01/clickhouse/tmp/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tmp_path</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user_files_path</span><span class="token punctuation">&gt;</span></span>/data01/clickhouse/user_files/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user_files_path</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>access_control_path</span><span class="token punctuation">&gt;</span></span>/data01/clickhouse/access/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>access_control_path</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--3.æŒ‡å®šmetrika.xmlæ–‡ä»¶--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include_from</span><span class="token punctuation">&gt;</span></span>/etc/clickhouse-server/metrika.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include_from</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!--4. é‡æ–°åˆ¶å®štcp_port --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tcp_port</span><span class="token punctuation">&gt;</span></span>19000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tcp_port</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--è¿™ä¸€æ­¥ä¸æ˜¯å¿…é¡»çš„ï¼Œæˆ‘è¿™é‡Œä¹‹æ‰€ä»¥é‡æ–°åˆ¶å®šï¼Œæ˜¯å› ä¸ºå‘ç°æˆ‘çš„æœºå™¨ä¸Š9000ç«¯å£å·²ç»è¢«å ç”¨äº†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„9000å³å¯--&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ä¿®æ”¹<code>users.xml</code>ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œä¸“é—¨ç”¨æ¥ç®¡ç†<code>cluster</code>ã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--åœ¨&lt;users&gt;é‡Œé¢æ–°å¢å¦‚ä¸‹å†…å®¹ï¼Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·åä¸ºckï¼Œå¯†ç ä¸º123456çš„ç”¨æˆ·--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ck</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>networks</span> <span class="token attr-name">incl</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>networks<span class="token punctuation">&quot;</span></span> <span class="token attr-name">replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>replace<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ip</span><span class="token punctuation">&gt;</span></span>::/0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ip</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>networks</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>quota</span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>quota</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ck</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>åˆ›å»º<code>metrika.xml</code>æ–‡ä»¶ã€‚</p> <p>åœ¨/<code>etc/clickhouse-server</code>è·¯å¾„ä¸‹åˆ›å»º<code>metrika.xml</code>æ–‡ä»¶ï¼ˆè¿™ä¸ªè·¯å¾„ä¸ºä¸Šé¢<code>config.xml</code>ä¸­é…ç½®çš„<code>include_from</code>çš„è·¯å¾„ï¼‰ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>yandex</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zookeeper-servers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zookeeper-servers</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>clickhouse_remote_servers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>      
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shard</span><span class="token punctuation">&gt;</span></span>   
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>  
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--è¿™é‡Œçš„ç«¯å£å·è¦å’Œconfig.xmlä¸­tcp_portä¿æŒä¸€è‡´ï¼Œå¦‚æœé‚£é‡Œæ”¹äº†ï¼Œè¿™é‡Œä¹Ÿè¦å¯¹åº”çš„æ”¹--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shard</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shard</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>host</span><span class="token punctuation">&gt;</span></span>192.168.0.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>host</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shard</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>clickhouse_remote_servers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>yandex</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>ä»¥ä¸Šé…ç½®åœ¨å››å°æœºå™¨ä¸ŠåŒæ­¥ï¼Œç„¶åé‡å¯<code>clickhouse</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl restart clickhouse-server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœå¯åŠ¨æˆåŠŸï¼Œå°±èƒ½çœ‹åˆ°<code>clickhouse-server</code>çš„è¿›ç¨‹å·²ç»åœ¨è¿è¡Œäº†ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node2 test<span class="token punctuation">]</span><span class="token comment"># ps -ef |grep clickhouse</span>
clickho+ <span class="token number">17548</span>     <span class="token number">1</span>  <span class="token number">1</span> <span class="token number">11</span>:11 ?        00:00:00 /usr/bin/clickhouse-server --config<span class="token operator">=</span>/etc/clickhouse-server/config.xml --pid-file<span class="token operator">=</span>/run/clickhouse-server/clickhouse-server.pid
root     <span class="token number">17738</span> <span class="token number">10683</span>  <span class="token number">0</span> <span class="token number">11</span>:11 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto clickhouse
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æˆ‘ä»¬ä½¿ç”¨<code>clickhouse-client</code>å·¥å…·ï¼Œç™»å½•åˆ°å…¶ä¸­ä¸€å°æœºå™¨ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span>root<span class="token variable">@node4</span> test<span class="token punctuation">]</span><span class="token comment"># clickhouse-client -u ck --password=123456 -m</span>
ClickHouse client version <span class="token number">20.9</span><span class="token number">.3</span><span class="token number">.45</span> <span class="token punctuation">(</span>official build<span class="token punctuation">)</span><span class="token punctuation">.</span>
Connecting <span class="token keyword">to</span> localhost:<span class="token number">9000</span> <span class="token keyword">as</span> <span class="token keyword">user</span> ck<span class="token punctuation">.</span>
Connected <span class="token keyword">to</span> ClickHouse server version <span class="token number">20.9</span><span class="token number">.3</span> revision <span class="token number">54439.</span>

node4 :<span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æŸ¥è¯¢<code>system.clusters</code>è¡¨ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>node4 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> system<span class="token punctuation">.</span>clusters <span class="token keyword">where</span> cluster <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> system<span class="token punctuation">.</span>clusters
<span class="token keyword">WHERE</span> cluster <span class="token operator">=</span> <span class="token string">'test'</span>

â”Œâ”€clusterâ”€â”¬â”€shard_numâ”€â”¬â”€shard_weightâ”€â”¬â”€replica_numâ”€â”¬â”€host_nameâ”€â”€â”€â”€â”€â”¬â”€host_addressâ”€â”€â”¬â”€â”€portâ”€â”¬â”€is_localâ”€â”¬â”€<span class="token keyword">user</span>â”€â”€â”€â”€â”¬â”€default_databaseâ”€â”¬â”€errors_countâ”€â”¬â”€estimated_recovery_timeâ”€â”
â”‚ test    â”‚         <span class="token number">1</span> â”‚            <span class="token number">1</span> â”‚           <span class="token number">1</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.1</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.1</span> â”‚ <span class="token number">9000</span> â”‚        <span class="token number">0</span> â”‚ <span class="token keyword">default</span> â”‚                  â”‚            <span class="token number">0</span> â”‚                       <span class="token number">0</span> â”‚
â”‚ test    â”‚         <span class="token number">1</span> â”‚            <span class="token number">1</span> â”‚           <span class="token number">2</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.2</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.2</span> â”‚ <span class="token number">9000</span> â”‚        <span class="token number">0</span> â”‚ <span class="token keyword">default</span> â”‚                  â”‚            <span class="token number">0</span> â”‚                       <span class="token number">0</span> â”‚
â”‚ test    â”‚         <span class="token number">2</span> â”‚            <span class="token number">1</span> â”‚           <span class="token number">1</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.3</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.3</span> â”‚ <span class="token number">9000</span> â”‚        <span class="token number">0</span> â”‚ <span class="token keyword">default</span> â”‚                  â”‚            <span class="token number">0</span> â”‚                       <span class="token number">0</span> â”‚
â”‚ test    â”‚         <span class="token number">2</span> â”‚            <span class="token number">1</span> â”‚           <span class="token number">2</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.4</span> â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.4</span> â”‚ <span class="token number">9000</span> â”‚        <span class="token number">1</span> â”‚ <span class="token keyword">default</span> â”‚                  â”‚            <span class="token number">0</span> â”‚                       <span class="token number">0</span> â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å‡ºç°ä¸Šé¢æ‰€ç¤ºçš„ç»“æœï¼Œè¯´æ˜é…ç½®é›†ç¾¤æˆåŠŸã€‚</p> <h2 id="åˆ†å¸ƒå¼è¡¨"><a href="#åˆ†å¸ƒå¼è¡¨" class="header-anchor">#</a> åˆ†å¸ƒå¼è¡¨</h2> <p>æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨é›†ç¾¤é‡Œåˆ›å»ºåˆ†å¸ƒå¼è¡¨äº†ã€‚</p> <p>é¦–å…ˆåœ¨é›†ç¾¤çš„å„ä¸ªèŠ‚ç‚¹åˆ›å»ºæœ¬åœ°è¡¨ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_cluster <span class="token keyword">ON</span> CLUSTER test <span class="token punctuation">(</span>
id Int16<span class="token punctuation">,</span>
name String<span class="token punctuation">,</span>
birth <span class="token keyword">Date</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> MergeTree<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> toYYYYMM<span class="token punctuation">(</span>birth<span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç™»å½•åˆ°ä»»æ„èŠ‚ç‚¹ï¼Œæ‰§è¡Œä»¥ä¸Š<code>sql</code>ï¼Œå‡ºç°å¦‚ä¸‹æç¤ºï¼Œè¯´æ˜æ‰§è¡ŒæˆåŠŸï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>node4 :<span class="token punctuation">)</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">default</span><span class="token punctuation">.</span>t_cluster <span class="token keyword">ON</span> CLUSTER test <span class="token punctuation">(</span> id Int16<span class="token punctuation">,</span> name String<span class="token punctuation">,</span> birth <span class="token keyword">Date</span> <span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> MergeTree<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> toYYYYMM<span class="token punctuation">(</span>birth<span class="token punctuation">)</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">default</span><span class="token punctuation">.</span>t_cluster <span class="token keyword">ON</span> CLUSTER test
<span class="token punctuation">(</span>
    <span class="token punctuation">`</span>id<span class="token punctuation">`</span> Int16<span class="token punctuation">,</span>
    <span class="token punctuation">`</span>name<span class="token punctuation">`</span> String<span class="token punctuation">,</span>
    <span class="token punctuation">`</span>birth<span class="token punctuation">`</span> <span class="token keyword">Date</span>
<span class="token punctuation">)</span>
<span class="token keyword">ENGINE</span> <span class="token operator">=</span> MergeTree<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> toYYYYMM<span class="token punctuation">(</span>birth<span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id

â”Œâ”€hostâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€portâ”€â”¬â”€<span class="token keyword">status</span>â”€â”¬â”€errorâ”€â”¬â”€num_hosts_remainingâ”€â”¬â”€num_hosts_activeâ”€â”
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.1</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">3</span> â”‚                <span class="token number">0</span> â”‚
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.2</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">2</span> â”‚                <span class="token number">0</span> â”‚
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.3</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">1</span> â”‚                <span class="token number">0</span> â”‚
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.4</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">0</span> â”‚                <span class="token number">0</span> â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.108</span> sec<span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>æˆ‘ä»¬å¯ä»¥ç™»å½•ä»»æ„ä¸€å°æœºå™¨ï¼Œéƒ½èƒ½æŸ¥è¯¢åˆ°<code>t_cluster</code>è¡¨ï¼Œè¿™å°±è¯´æ˜å·²ç»åœ¨<code>test</code>é›†ç¾¤ä¸Šæ‰€æœ‰èŠ‚ç‚¹åˆ›å»ºäº†ä¸€ä¸ª<code>t_cluster</code>æœ¬åœ°è¡¨ã€‚</p> <p>è¿™ä¸ªæ—¶å€™å¦‚æœå¾€<code>t_cluster</code>è¡¨æ’å…¥æ•°æ®ï¼Œä»ç„¶æ˜¯åœ¨æ‰€åœ¨èŠ‚ç‚¹çš„æœ¬åœ°è¡¨ä¸­æ“ä½œï¼Œåœ¨å…¶ä»–é›†ç¾¤ä¸­æ˜¯æ— æ³•çœ‹è§çš„ã€‚</p> <p>å¦‚æˆ‘ä»¬åœ¨<code>node1</code>èŠ‚ç‚¹æ’å…¥å¦‚ä¸‹æ•°æ®ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>node1 :<span class="token punctuation">)</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t_cluster <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token string">'2021-02-01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">,</span> <span class="token string">'2021-02-02'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_cluster <span class="token keyword">VALUES</span>

Ok<span class="token punctuation">.</span>

<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>åœ¨<code>node1</code>èŠ‚ç‚¹æŸ¥è¯¢ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>node1 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">1</span> â”‚ aa   â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> â”‚
â”‚  <span class="token number">2</span> â”‚ bb   â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>node2</code>èŠ‚ç‚¹æŸ¥è¯¢ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>node2 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_cluster

Ok<span class="token punctuation">.</span>

<span class="token number">0</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>node3</code>å’Œ<code>node4</code>æŸ¥è¯¢ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p> <p>è¿™å°±å……åˆ†è¯´æ˜äº†å¦‚æœç›´æ¥æ“ä½œ<code>t_cluster</code>è¡¨ï¼Œæ“ä½œçš„æ•°æ®å…¶å®åªæ˜¯å½“å‰èŠ‚ç‚¹çš„æ•°æ®ã€‚æœ‰äººå¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæˆ‘ä¸æ˜¯æ˜æ˜æŒ‡å®šäº†<code>node1</code>å’Œ<code>node2</code>äº’ä¸º<code>replica</code>å—ï¼Ÿä¸ºä»€ä¹ˆ<code>node1</code>çš„æ•°æ®ä¹Ÿæ²¡æœ‰åŒæ­¥åˆ°<code>node2</code>ä¸Šé¢å»ï¼Ÿ</p> <p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„å¼•æ“æŒ‡å®šçš„æ˜¯<code>MergerTree</code>ï¼Œè€Œä¸æ˜¯<code>ReplicaMergeTree</code>ï¼Œå¦‚æœæŒ‡å®šçš„æ˜¯<code>ReplicaMergeTree</code>ï¼Œçš„ç¡®æ˜¯ä¼šåŒæ­¥åˆ°å¯¹åº”çš„<code>replica</code>ä¸Šé¢å»çš„ï¼Œä½†è¿™é‡Œåˆ›å»ºçš„ä»…ä»…æ˜¯<code>MergeTree</code>ï¼Œè¿™ä¸ªå¼•æ“æœ¬èº«ä¸å…·å¤‡åŒæ­¥å‰¯æœ¬çš„åŠŸèƒ½ï¼Œæ‰€ä»¥<code>node2</code>ä¸Šå¹¶æ²¡æœ‰åŒæ­¥æ•°æ®ã€‚</p> <blockquote><p>ä¸€èˆ¬åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåˆ›å»ºåˆ†å¸ƒå¼è¡¨æŒ‡å®šçš„éƒ½æ˜¯<code>Replica</code>çš„è¡¨ï¼Œè¿™é‡Œä»…ä»…æ˜¯åšä¸€ä¸ªä¾‹å­è¯´æ˜ã€‚</p></blockquote> <p>é‚£ä¹ˆæ—¢ç„¶å¦‚æ­¤ï¼Œè¿™ä¸ªé›†ç¾¤ä¸­çš„è¡¨æ•°æ®ä¸èƒ½äº’ç›¸å…³è”èµ·æ¥ï¼Œä¸å°±å¤±å»äº†é›†ç¾¤çš„æ„ä¹‰äº†å—ï¼Ÿ</p> <p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œä»è€Œå¼•å…¥äº†åˆ†å¸ƒå¼è¡¨ã€‚</p> <p>åˆ†å¸ƒå¼è¡¨çš„åˆ›å»ºæ˜¯è¿™æ ·çš„ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">default</span><span class="token punctuation">.</span>dist_t_cluster <span class="token keyword">ON</span> CLUSTER test <span class="token keyword">as</span> t_cluster <span class="token keyword">engine</span> <span class="token operator">=</span> <span class="token keyword">Distributed</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">,</span> t_cluster<span class="token punctuation">,</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Distributed</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¼•æ“ï¼Œç”¨æ¥åˆ›å»ºåˆ†å¸ƒå¼è¡¨ã€‚å®ƒæœ¬èº«å…·æœ‰å››ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºé›†ç¾¤çš„åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ•°æ®åº“çš„åå­—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºè¡¨çš„åå­—ï¼Œç¬¬å››ä¸ªå‚æ•°ä¸º<code>sharding key</code>ï¼Œå®ƒå†³å®šæœ€ç»ˆæ•°æ®è½åœ¨å“ªä¸€ä¸ªåˆ†ç‰‡ä¸Šï¼Œæœ€åä¸€ä¸ªå‚æ•°å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™å®ç”¨é…ç½®æ–‡ä»¶ä¸­çš„<code>weight</code>åˆ†ç‰‡æƒé‡ã€‚</p> <p>ä¸Šé¢çš„è¯­å¥å°±æ˜¯åˆ›å»ºä¸€å¼ åä¸º<code>dist_t_cluster</code>çš„åˆ†å¸ƒå¼è¡¨ï¼Œè¯¥åˆ†å¸ƒå¼è¡¨æ˜¯åŸºäº<code>test</code>é›†ç¾¤ä¸­çš„<code>default.t_cluster</code>è¡¨ã€‚<code>as t_cluster</code>è¡¨ç¤ºè¿™å¼ è¡¨çš„ç»“æ„å’Œ<code>t_cluster</code>ä¸€æ¨¡ä¸€æ ·ã€‚</p> <p>åˆ†å¸ƒå¼è¡¨æœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œæ•°æ®å­˜å‚¨å…¶å®è¿˜æ˜¯ç”±æœ¬åœ°è¡¨<code>t_cluster</code>å®Œæˆçš„ã€‚è¿™ä¸ª<code>dist_t_cluster</code>ä»…ä»…åšä¸€ä¸ªä»£ç†çš„ä½œç”¨ã€‚</p> <p>å¦‚ä¸‹æ‰€ç¤ºï¼Œè¡¨ç¤ºåˆ†å¸ƒå¼è¡¨åˆ›å»ºæˆåŠŸã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>node1 :<span class="token punctuation">)</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">default</span><span class="token punctuation">.</span>dist_t_cluster <span class="token keyword">ON</span> CLUSTER test <span class="token keyword">as</span> t_cluster <span class="token keyword">engine</span> <span class="token operator">=</span> <span class="token keyword">Distributed</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">,</span> t_cluster<span class="token punctuation">,</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">default</span><span class="token punctuation">.</span>dist_t_cluster <span class="token keyword">ON</span> CLUSTER test <span class="token keyword">AS</span> t_cluster
<span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">Distributed</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">,</span> t_cluster<span class="token punctuation">,</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

â”Œâ”€hostâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€portâ”€â”¬â”€<span class="token keyword">status</span>â”€â”¬â”€errorâ”€â”¬â”€num_hosts_remainingâ”€â”¬â”€num_hosts_activeâ”€â”
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.1</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">3</span> â”‚                <span class="token number">0</span> â”‚
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.2</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">2</span> â”‚                <span class="token number">0</span> â”‚
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.3</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">1</span> â”‚                <span class="token number">0</span> â”‚
â”‚ <span class="token number">192.168</span><span class="token number">.0</span><span class="token number">.4</span> â”‚ <span class="token number">9000</span> â”‚      <span class="token number">0</span> â”‚       â”‚                   <span class="token number">0</span> â”‚                <span class="token number">0</span> â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.106</span> sec<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨åˆ†å¸ƒå¼è¡¨å‘é›†ç¾¤ä¸­æ’å…¥æ•°æ®ï¼Œè§‚å¯Ÿç°è±¡ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>node1 :<span class="token punctuation">)</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> dist_t_cluster <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token string">'2021-02-01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'bbb'</span><span class="token punctuation">,</span> <span class="token string">'2021-02-02'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dist_t_cluster <span class="token keyword">VALUES</span>

Ok<span class="token punctuation">.</span>

<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¿™æ—¶å€™æˆ‘ä»¬åœ¨ä¸åŒèŠ‚ç‚¹ä¸ŠæŸ¥è¯¢<code>dist_t_cluster</code>è¡¨ï¼Œå¾—åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/* node1 æŸ¥è¯¢ç»“æœ */</span>
node1 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dist_t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> dist_t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">2</span> â”‚ bbb  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">1</span> â”‚ aaa  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.005</span> sec<span class="token punctuation">.</span> 

<span class="token comment">/* node2 æŸ¥è¯¢ç»“æœ */</span>
node2 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dist_t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> dist_t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">2</span> â”‚ bbb  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">1</span> â”‚ aaa  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.005</span> sec<span class="token punctuation">.</span>

<span class="token comment">/* node3 æŸ¥è¯¢ç»“æœ */</span>
node3 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dist_t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> dist_t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">1</span> â”‚ aaa  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">2</span> â”‚ bbb  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.006</span> sec<span class="token punctuation">.</span> 

<span class="token comment">/* node4 æŸ¥è¯¢ç»“æœ */</span>
node4 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dist_t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> dist_t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">1</span> â”‚ aaa  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">2</span> â”‚ bbb  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.005</span> sec<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p>æˆ‘ä»¬å†å»çœ‹å„ä¸ªèŠ‚ç‚¹çš„æœ¬åœ°è¡¨<code>t_cluster</code>è¡¨ä¸­æ•°æ®åˆ†å¸ƒæƒ…å†µï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/* node1 æŸ¥è¯¢ç»“æœ */</span>
node1 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">2</span> â”‚ bbb  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span>

<span class="token comment">/* node2 æŸ¥è¯¢ç»“æœ */</span>
node2 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">2</span> â”‚ bbb  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">02</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span> 

<span class="token comment">/* node3 æŸ¥è¯¢ç»“æœ */</span>
node3 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">1</span> â”‚ aaa  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span>

<span class="token comment">/* node4 æŸ¥è¯¢ç»“æœ */</span>
node4 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_cluster<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_cluster

â”Œâ”€idâ”€â”¬â”€nameâ”€â”¬â”€â”€â”€â”€â”€â”€birthâ”€â”
â”‚  <span class="token number">1</span> â”‚ aaa  â”‚ <span class="token number">2021</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">01</span> â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.002</span> sec<span class="token punctuation">.</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>ç”±ä»¥ä¸Šç»“æœå¯çŸ¥ï¼Œ<code>node1</code>å’Œ<code>node2</code>ä¸Šé¢å­˜å‚¨çš„æ•°æ®ä¸€æ ·ï¼Œ<code>node3</code>å’Œ<code>node4</code>ä¸Šé¢å­˜å‚¨çš„æ•°æ®ä¸€æ ·ï¼Œä½†æ˜¯<code>node1</code>å’Œ<code>node3</code>ä¸Šé¢çš„æ•°æ®ä¸ä¸€æ ·ã€‚<code>node1</code>ï¼ˆ<code>node2</code>ï¼‰å’Œ<code>node3</code>ï¼ˆ<code>node4</code>ï¼‰çš„æ•°æ®ç»„æˆäº†<code>dist_t_cluster</code>è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p> <p>è¿™æ˜¯å› ä¸º<code>node1</code>å’Œ<code>node2</code>ã€<code>node3</code>å’Œ <code>node4</code>äº’ä¸ºå‰¯æœ¬ï¼Œæ‰€ä»¥å®ƒä»¬çš„æ•°æ®ä¼šè‡ªåŠ¨åŒæ­¥ã€‚è€Œ<code>node1</code>ï¼ˆ<code>node2</code>ï¼‰å’Œ<code>node3</code>ï¼ˆ<code>node4</code>ï¼‰å±äºä¸åŒçš„åˆ†ç‰‡ï¼Œæ‰€ä»¥æ•°æ®æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼ˆ<code>sharding key</code>ï¼‰è½åœ¨äº†ä¸åŒåˆ†ç‰‡ã€‚</p> <p>å¦‚æœæˆ‘ä»¬æ‰“å¼€å­˜å‚¨æ•°æ®çš„ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°<code>dist_t_cluster</code>è¡¨ä¸­ä»…ä»…æœ‰ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œå¹¶æ²¡æœ‰å®é™…å­˜å‚¨æ•°æ®ï¼Œå› ä¸ºæ•°æ®æ˜¯å­˜å‚¨åœ¨<code>t_cluster</code>æœ¬åœ°è¡¨ä¸­çš„ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node1 chenyc<span class="token punctuation">]</span><span class="token comment"># ls -l  /data01/clickhouse/data/default/dist_t_cluster/</span>
æ€»ç”¨é‡ <span class="token number">0</span>
drwxr-x--- <span class="token number">3</span> clickhouse clickhouse <span class="token number">17</span> <span class="token number">2</span>æœˆ  <span class="token number">25</span> <span class="token number">13</span>:57 default@192%2E168%2E21%2E52:9000
drwxr-x--- <span class="token number">3</span> clickhouse clickhouse <span class="token number">17</span> <span class="token number">2</span>æœˆ  <span class="token number">25</span> <span class="token number">13</span>:57 default@192%2E168%2E21%2E53:9000
drwxr-x--- <span class="token number">2</span> clickhouse clickhouse  <span class="token number">6</span> <span class="token number">2</span>æœˆ  <span class="token number">25</span> <span class="token number">13</span>:57 default@192%2E168%2E21%2E54:9000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="macrosè®¾ç½®"><a href="#macrosè®¾ç½®" class="header-anchor">#</a> macrosè®¾ç½®</h3> <p><code>macros</code>ç¿»è¯‘è¿‡æ¥æ˜¯å®çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å®ƒï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å®å®šä¹‰åœ¨<code>SQL</code>å˜é‡ä¸­è¿›è¡Œæ›¿æ¢ï¼Œæ¯”å¦‚<code>shard number</code>ï¼Œ<code>replica</code>çš„åç§°ç­‰ã€‚è¿™ä¸€ç‚¹åœ¨éœ€è¦åˆ›å»º<code>Replicated</code>å¼•æ“è¡¨çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ã€‚</p> <p><code>Replicated</code>å¼•æ“æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªä¸º<code>zoo_path</code>ï¼Œè¡¨ç¤º<code>zookeeper</code>ä¸­è¯¥è¡¨çš„è·¯å¾„ï¼›å¦ä¸€ä¸ªå‚æ•°ä¸º<code>replica_name</code>ï¼Œä»£è¡¨è¯¥è¡¨æ‰€åœ¨çš„å‰¯æœ¬åç§°ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ENGINE</span> <span class="token operator">=</span> ReplicatedMergeTree<span class="token punctuation">(</span><span class="token string">'/clickhouse/tables/{cluster}/{shard}/default/dbtest'</span><span class="token punctuation">,</span> <span class="token string">'{replica}'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå°±æ˜¯ä¸€ä¸ª<code>Replicated</code>å¼•æ“åœ¨åˆ›å»ºè¡¨æ—¶éœ€è¦æŒ‡å®šçš„å‚æ•°ã€‚</p> <p>å…¶ä¸­ï¼š</p> <table><thead><tr><th>å‚æ•°</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td>/clickhouse/tables</td> <td>clickhouseåœ¨zookeeperçš„å®˜æ–¹è·¯å¾„</td></tr> <tr><td>{cluster}</td> <td>é›†ç¾¤åç§°</td></tr> <tr><td>{shard}</td> <td>shard number</td></tr> <tr><td>default</td> <td>æ•°æ®åº“å</td></tr> <tr><td>dbtest</td> <td>è¡¨åï¼Œæœ€å¥½è·Ÿå®é™…çš„è¡¨åä¸€è‡´</td></tr> <tr><td>{replica}</td> <td>å‰¯æœ¬åç§°</td></tr></tbody></table> <p>å…ˆå‡è®¾æˆ‘ä»¬ä¸è®¾ç½®<code>macros</code>ï¼Œå¦‚æœæˆ‘ä»¬è¦åœ¨<code>node1</code>~<code>node4</code>å››ä¸ªèŠ‚ç‚¹ä¸Šåˆ›å»º<code>Replicated</code>è¡¨ï¼Œå…¶ä¸­<code>node1</code>å’Œ<code>node2</code>ä½äº<code>shard1</code>ï¼Œ<code>node3</code>å’Œ<code>node4</code>ä½äº<code>shard2</code>ï¼Œ<code>node1</code>ä¸<code>node2</code>äº’ä¸ºå‰¯æœ¬ï¼Œ<code>node3</code>ä¸<code>node4</code>äº’ä¸ºå‰¯æœ¬ã€‚éœ€è¦æ€ä¹ˆåˆ›å»ºï¼Ÿ</p> <p>æˆ‘ä»¬éœ€è¦åœ¨<code>node1</code>ä¸Šåˆ›å»ºè¡¨<code>dbtest</code>ï¼Œè¯­å¥å¦‚ä¸‹ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dbtest<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> ReplicatedMergeTree<span class="token punctuation">(</span><span class="token string">'/clickhouse/tables/test/1/default/dbtest'</span><span class="token punctuation">,</span> <span class="token string">'node1'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç„¶ååœ¨<code>node2</code>~<code>node4</code>ä¸Šåˆ†åˆ«åˆ›å»º<code>dbtest</code>è¡¨ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*node2æ‰§è¡Œ*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dbtest<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> ReplicatedMergeTree<span class="token punctuation">(</span><span class="token string">'/clickhouse/tables/test/1/default/dbtest'</span><span class="token punctuation">,</span> <span class="token string">'node2'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 
<span class="token comment">/*node3æ‰§è¡Œ*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dbtest<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> ReplicatedMergeTree<span class="token punctuation">(</span><span class="token string">'/clickhouse/tables/test/2/default/dbtest'</span><span class="token punctuation">,</span> <span class="token string">'node3'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 
<span class="token comment">/*node4æ‰§è¡Œ*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dbtest<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> ReplicatedMergeTree<span class="token punctuation">(</span><span class="token string">'/clickhouse/tables/test/2/default/dbtest'</span><span class="token punctuation">,</span> <span class="token string">'node4'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>å¦‚æœé›†ç¾¤é‡ŒèŠ‚ç‚¹ç‰¹åˆ«å¤šï¼Œé‚£ä¹ˆè¿™æ ·åˆ°æ¯ä¸ªèŠ‚ç‚¹ä¸‹å»æ‰§è¡Œï¼Œå®åœ¨å¤ªè¿‡ç´¯äººã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼ä½¿ç”¨ä¸Šé¢çš„ç±»ä¼¼ <code>ON CLUSTER</code>çš„æ–¹å¼è‡ªåŠ¨åˆ›å»ºå‘¢ï¼Ÿ</p> <p>ç­”æ¡ˆå½“ç„¶æ˜¯æœ‰ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦å€ŸåŠ©<code>macros</code>å®äº†ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥åœ¨<code>metrika.xml</code>æ–‡ä»¶ä¸­é¢„å…ˆç¼–å†™å¥½ä¸€äº›å®ï¼Œç„¶ååœ¨<code>SQL</code>å˜é‡ä¸­ä½¿ç”¨<code>{}</code>æ‹¬èµ·æ¥ç›´æ¥æ›¿æ¢å³å¯ã€‚</p> <p>åœ¨<code>metrika.xml</code>ä¸­é…ç½®å®å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>macros</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cluster</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cluster</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shard</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shard</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>replica</span><span class="token punctuation">&gt;</span></span>vm10140<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>replica</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>macros</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æœ‰äº†ä»¥ä¸Šé…ç½®ï¼Œé‚£ä¹ˆåœ¨<code>Replicated</code>å¼•æ“ä¸­ä¼ å‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>{cluster}</code>ä»£æ›¿<code>test</code>ï¼Œä½¿ç”¨<code>{shard}</code>ä»£æ›¿<code>1</code>ï¼Œç”¨<code>{replica}</code>ä»£æ›¿<code>vm10140</code>ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šé…ç½®å¥½å¯¹åº”çš„å®å˜é‡ï¼Œé‚£ä¹ˆï¼Œåœ¨åˆ›å»º<code>Replicated</code>å¼•æ“è¡¨çš„æ—¶å€™ï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­å¥å°±å¯ä»¥äº†ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dbtest <span class="token keyword">ON</span> CLUSTER test<span class="token punctuation">(</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> ReplicatedMergeTree<span class="token punctuation">(</span><span class="token string">'/clickhouse/tables/{cluster}/{shard}/default/dbtest'</span><span class="token punctuation">,</span> <span class="token string">'{replica}'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä»¥ä¸Šè¯­å¥åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œåœ¨<code>node1</code>ä¸‹ï¼Œ<code>{cluster}</code>ã€<code>{shard}</code>å’Œ<code>{replica}</code>å–çš„æ˜¯<code>node1</code>çš„å®å¯¹åº”çš„å€¼ï¼Œåœ¨<code>node2</code>ä¸‹å–çš„æ˜¯<code>node2</code>çš„å®è®¾ç½®çš„å€¼ï¼Œè‡ªåŠ¨æ›¿æ¢ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p> <p>åªè¦<code>macros</code>é…ç½®æ­£ç¡®ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šè¿°è¯­å¥åœ¨é›†ç¾¤çš„å„ä¸ªèŠ‚ç‚¹å»åˆ›å»ºè¡¨äº†ï¼Œè€Œä¸å¿…åˆ°æ¯ä¸ªèŠ‚ç‚¹ä¸‹å»æ‰‹åŠ¨åˆ›å»ºä¸€éã€‚</p> <p>æ­¤æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡<code>zookeeper</code>å¯ä»¥æŸ¥çœ‹åˆ°<code>Replicated</code>ä¸­<code>zoo_path</code>çš„å…·ä½“æƒ…å†µï¼š</p> <p>é¡ºä¾¿ä¸€æï¼Œ<code>macros</code>çš„ä¿¡æ¯éƒ½ä¿å­˜åœ¨<code>system.macros</code>è¡¨ä¸­ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>vm10140 :<span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> system<span class="token punctuation">.</span>macros<span class="token punctuation">;</span>
 
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> system<span class="token punctuation">.</span>macros
 
â”Œâ”€macroâ”€â”€â”€â”¬â”€substitutionâ”€â”
â”‚ cluster â”‚ test         â”‚
â”‚ replica â”‚ vm10140      â”‚
â”‚ shard   â”‚ <span class="token number">1</span>            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">.</span> Elapsed: <span class="token number">0.005</span> sec<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>å› æ­¤ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°ä»è¿™ä¸ªåœ°æ–¹çœ‹åˆ°å“ªäº›å®æ˜¯å¯ä»¥ç”¨çš„ã€‚</p> <h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="header-anchor">#</a> å‚è€ƒé“¾æ¥</h2> <ul><li>http://www.clickhouse.com.cn/</li> <li>https://segmentfault.com/a/1190000039291994</li></ul></div></div> <div class="page-slot page-slot-bottom"><!-- æ¨ªå‘è‡ªé€‚åº” -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2023/11/17, 05:08:19</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/rat-skill/pages/6feed0/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">hadoop-yarn-uié¡¹ç›®</div></a> <a href="/rat-skill/pages/344331/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">ckmanéƒ¨ç½²å®è·µ</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/rat-skill/pages/6feed0/" class="prev">hadoop-yarn-uié¡¹ç›®</a></span> <span class="next"><a href="/rat-skill/pages/344331/">ckmanéƒ¨ç½²å®è·µ</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:yessz@foxmail.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/samyzh" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
    Copyright Â© 2015-2023
    <span><a href='https://my.samyz.cn' target='_blank'>å‹ä¸€å‡ | yessz</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">è·Ÿéšç³»ç»Ÿ</li><li class="iconfont icon-rijianmoshi">æµ…è‰²æ¨¡å¼</li><li class="iconfont icon-yejianmoshi">æ·±è‰²æ¨¡å¼</li><li class="iconfont icon-yuedu">é˜…è¯»æ¨¡å¼</li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">Ã—</i> <div><!-- å›ºå®š160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;width:160px;height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/rat-skill/assets/js/app.947bb335.js" defer></script><script src="/rat-skill/assets/js/3.1f8ba6b8.js" defer></script><script src="/rat-skill/assets/js/27.e105513b.js" defer></script><script src="/rat-skill/assets/js/31.630b2698.js" defer></script>
  </body>
</html>