(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{510:function(s,a,t){s.exports=t.p+"assets/img/wpsbUEJ5u.21b84c8f.jpg"},511:function(s,a,t){s.exports=t.p+"assets/img/wps2Sw3ke.96ade87d.jpg"},512:function(s,a,t){s.exports=t.p+"assets/img/image-20220507113730843.5b4f6ffa.png"},513:function(s,a,t){s.exports=t.p+"assets/img/image-20220506150719615.e72e3a64.png"},514:function(s,a,t){s.exports=t.p+"assets/img/image-20220506172620399.762c6a8c.png"},515:function(s,a,t){s.exports=t.p+"assets/img/wpsxRNn96.62aba14e.jpg"},516:function(s,a,t){s.exports=t.p+"assets/img/wpsEQaXHN.92e13c4b.jpg"},517:function(s,a,t){s.exports=t.p+"assets/img/wpse0dwKh.1f63e4a0.jpg"},518:function(s,a,t){s.exports=t.p+"assets/img/wps8DbqcE.38ee3bb1.jpg"},519:function(s,a,t){s.exports=t.p+"assets/img/wpsrWYGb2.48fcdecd.jpg"},520:function(s,a,t){s.exports=t.p+"assets/img/wpsji2mah.362c9e34.jpg"},521:function(s,a,t){s.exports=t.p+"assets/img/wpsNQMSrk.ed02a8dc.jpg"},522:function(s,a,t){s.exports=t.p+"assets/img/wpspKClkt.49b04784.jpg"},523:function(s,a,t){s.exports=t.p+"assets/img/wpswFTDeV.2d4ff7c9.jpg"},524:function(s,a,t){s.exports=t.p+"assets/img/wpsvq8hz9.5164b899.jpg"},525:function(s,a,t){s.exports=t.p+"assets/img/wpswXhMNP.a0f1ceaa.jpg"},526:function(s,a,t){s.exports=t.p+"assets/img/wpsX0AffF.b45b78a8.jpg"},527:function(s,a,t){s.exports=t.p+"assets/img/wps3dRfF9.e3801b0d.jpg"},528:function(s,a,t){s.exports=t.p+"assets/img/image-20220509144004264.d03de0ff.png"},529:function(s,a,t){s.exports=t.p+"assets/img/wpsYypsUD.33e8256f.jpg"},530:function(s,a,t){s.exports=t.p+"assets/img/wpsGnk46k.8366cced.jpg"},531:function(s,a,t){s.exports=t.p+"assets/img/wpsWqMhia.81f81525.jpg"},532:function(s,a,t){s.exports=t.p+"assets/img/wpslbS5cr.f5bee456.jpg"},533:function(s,a,t){s.exports=t.p+"assets/img/wpsQJmCSa.b44fad7f.jpg"},534:function(s,a,t){s.exports=t.p+"assets/img/wpsGbKDqE.76be8f27.jpg"},535:function(s,a,t){s.exports=t.p+"assets/img/wpsqH1bOF.db7a8ca7.jpg"},536:function(s,a,t){s.exports=t.p+"assets/img/wpsw4p6dK.6d06a116.jpg"},537:function(s,a,t){s.exports=t.p+"assets/img/wpsN2zn6f.2eb4747a.jpg"},538:function(s,a,t){s.exports=t.p+"assets/img/wpsmhSMZq.2f2ead48.jpg"},539:function(s,a,t){s.exports=t.p+"assets/img/wpsGqC6Lx.7a9f1117.jpg"},540:function(s,a,t){s.exports=t.p+"assets/img/wpsN4b8AL.2692c5e8.jpg"},541:function(s,a,t){s.exports=t.p+"assets/img/wpshUPz7Q.c81d4602.jpg"},542:function(s,a,t){s.exports=t.p+"assets/img/wpsDKjyeX.7b14011b.jpg"},543:function(s,a,t){s.exports=t.p+"assets/img/wpsviCiLV.4ce644c1.jpg"},544:function(s,a,t){s.exports=t.p+"assets/img/wpsDwo639.c8ecd938.jpg"},545:function(s,a,t){s.exports=t.p+"assets/img/wpsSizwjj.5ca652c9.jpg"},546:function(s,a,t){s.exports=t.p+"assets/img/wps9TUG2Q.eb2c5744.jpg"},547:function(s,a,t){s.exports=t.p+"assets/img/wpsZAjwB2.a6f36863.jpg"},548:function(s,a,t){s.exports=t.p+"assets/img/wpsPOvqDB.8f3917c0.jpg"},549:function(s,a,t){s.exports=t.p+"assets/img/wpslI0JIW.f4a2bf01.jpg"},550:function(s,a,t){s.exports=t.p+"assets/img/wpsvkB7Tb.7d9593a6.jpg"},551:function(s,a,t){s.exports=t.p+"assets/img/wps280SLx.ce46244b.jpg"},552:function(s,a,t){s.exports=t.p+"assets/img/wpsTv8MwP.ed071796.jpg"},553:function(s,a,t){s.exports=t.p+"assets/img/wpsl4m6F0.f649aa9f.jpg"},554:function(s,a,t){s.exports=t.p+"assets/img/wpsoiAjNU.e4ac81dd.jpg"},555:function(s,a,t){s.exports=t.p+"assets/img/wpsg4cTV4.910eb3f2.jpg"},556:function(s,a,t){s.exports=t.p+"assets/img/wps878veu.0aa588f9.jpg"},779:function(s,a,t){"use strict";t.r(a);var e=t(31),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"安装前的准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装前的准备"}},[s._v("#")]),s._v(" 安装前的准备")]),s._v(" "),e("h3",{attrs:{id:"前置软件安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前置软件安装"}},[s._v("#")]),s._v(" 前置软件安装")]),s._v(" "),e("p",[s._v("安装系统之前，需要确保系统中已经具备了这些基本的软件：")]),s._v(" "),e("ul",[e("li",[s._v("yum and rpm (RHEL/CentOS/Oracle/Amazon Linux)")]),s._v(" "),e("li",[s._v("zypper and php_curl (SLES)")]),s._v(" "),e("li",[s._v("apt (Debian/Ubuntu)")]),s._v(" "),e("li",[s._v("scp, curl, unzip, tar, wget, and gcc*")]),s._v(" "),e("li",[s._v("OpenSSL (v1.01, build 16 or later)")]),s._v(" "),e("li",[s._v("Python (with python-devel*)")])]),s._v(" "),e("h3",{attrs:{id:"系统设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#系统设置"}},[s._v("#")]),s._v(" 系统设置")]),s._v(" "),e("p",[s._v("安装前需要进行系统参数的默认设置: 包括 系统最大文件打开数量，主机的hostname, ssh的面密码登录，ntp时钟同步设置和关闭防火墙")]),s._v(" "),e("h4",{attrs:{id:"修改默认的最大文件打开数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改默认的最大文件打开数"}},[s._v("#")]),s._v(" 修改默认的最大文件打开数")]),s._v(" "),e("p",[s._v("官方建议最大打开数修改到10000或者更多。")]),s._v(" "),e("p",[s._v("在每台主机上执行以下命令:")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("ulimit")]),s._v(" -Sn\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("ulimit")]),s._v(" -Hn \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果返回的数量小于200000，执行命令进行设置：")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("ulimit")]),s._v(" -n "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("400000")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("永久设置：")]),s._v(" "),e("p",[e("code",[s._v("vi /etc/security/limits.conf")])]),s._v(" "),e("p",[s._v("添加：")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# End of file")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#* - nofile 199990")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#* - noproc 199990")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("soft nofile 65536")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("hard nofile 65536")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("或者")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"* - nofile 199990"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/security/limits.conf\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"* - noproc 199990"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/security/limits.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"设置主机的host"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置主机的host"}},[s._v("#")]),s._v(" 设置主机的host")]),s._v(" "),e("p",[s._v("必须确保能够使用hostname进行主机通信，可以配置dns或者设置/etc/hosts")]),s._v(" "),e("p",[s._v("例如：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@host116 ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hosts")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1  localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1     localhost localhost.localdomain localhost6 localhost6.localdomain6 \n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xx.116  host116\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xx.117  host117\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xx.118  host118\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xx.120  host120\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xx.121  host121\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xx.122  host122  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@host151-131 ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hosts")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xxx.131 host151-131\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xxx.132 host151-132\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xxx.133 host151-133\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),s._v(".xxx.116 host116\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h4",{attrs:{id:"配置安装主机和其他节点的ssh免密码登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置安装主机和其他节点的ssh免密码登录"}},[s._v("#")]),s._v(" 配置安装主机和其他节点的SSH免密码登录")]),s._v(" "),e("p",[s._v("安装主机运行："),e("code",[s._v("ssh-keygen")])]),s._v(" "),e("p",[s._v("然后再运行其他主机的面密码登录设置命令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("ssh-copy-id root@host116\nssh-copy-id root@host117\nssh-copy-id root@host118\nssh-copy-id root@vhost-118-24\nssh-copy-id root@oracle24\nssh-copy-id root@crms-10-10-177-40\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h4",{attrs:{id:"配置ntp-时钟同步"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置ntp-时钟同步"}},[s._v("#")]),s._v(" 配置ntp 时钟同步")]),s._v(" "),e("p",[s._v("安装ntp:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("yum install ntp\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("主节点配置：")])]),s._v(" "),e("p",[e("code",[s._v("vi /etc/ntp.conf")])]),s._v(" "),e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#允许任何IP的客户机都可以进行时间同步")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将“restrict default nomodify notrap noquery”这行修改成：")]),s._v("\nrestrict default nomodify notrap\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#必须添加网段的支持")]),s._v("\nrestrict "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".93")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" mask "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".255")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#最后添加：")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.127")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" iburst\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("strong",[s._v("其他节点配置：")])]),s._v(" "),e("p",[e("code",[s._v("vi /etc/ntp.conf")])]),s._v(" "),e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除默认的同步配置")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 0.centos.pool.ntp.org iburst")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 1.centos.pool.ntp.org iburst")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 2.centos.pool.ntp.org iburst")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#server 3.centos.pool.ntp.org iburst")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置和主节点同步：")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" host116 prefer \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("启动ntp服务：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl start ntpd\nsystemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" ntpd \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"关闭防火墙"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭防火墙"}},[s._v("#")]),s._v(" 关闭防火墙")]),s._v(" "),e("p",[s._v("HADOOP需要使用很多端口，所以集群之间的机器应该是互信的，需要关闭防火墙")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl stop firewalld.service\nsystemctl disable firewalld.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("这里也需要确认是disabled； "),e("code",[s._v("/etc/selinux/config")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@host120 ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/selinux/config")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This file controls the state of SELinux on the system.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SELINUX= can take one of these three values:")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   enforcing - SELinux security policy is enforced.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   permissive - SELinux prints warnings instead of enforcing.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   disabled - No SELinux policy is loaded.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SELINUX")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disabled\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("脚本直接替换")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/SELINUX=enforcing/SELINUX=disabled/g'")]),s._v(" /etc/selinux/config \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"设置本地仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置本地仓库"}},[s._v("#")]),s._v(" 设置本地仓库")]),s._v(" "),e("p",[s._v("WDP的安装过程中，需要通过网络安装相关的软件。由于在部署系统中一般都在内网中，所以需要设置本地私有仓库。")]),s._v(" "),e("h3",{attrs:{id:"安装和配置http服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装和配置http服务"}},[s._v("#")]),s._v(" 安装和配置http服务")]),s._v(" "),e("p",[s._v("仓库主机安装软件：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-utils createrepo httpd \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("启动httpd服务：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl start httpd.service\nsystemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" httpd.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("创建文件夹")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /var/www/html/hdp-install/ \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("配置权限")])]),s._v(" "),e("p",[s._v("编辑配置文件： "),e("code",[s._v("vi /etc/httpd/conf/httpd.conf")])]),s._v(" "),e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Listen 12.34.56.78:80")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Listen")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("58888")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Directory "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/www/html"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Require all granted")]),s._v("\n    Options Indexes FollowSymLinks\n    AllowOverride None\n    Order "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("allow")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("deny")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Allow")]),s._v(" from all\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Directory"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h3",{attrs:{id:"配置wdp软件包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置wdp软件包"}},[s._v("#")]),s._v(" 配置WDP软件包")]),s._v(" "),e("p",[s._v("下载解压后，存放到目录：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/www/html/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /var/www/html/WDP/centos7/develop\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("iwdp@host68 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ ll\ntotal "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),s._v(" Mar  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":31 bigtop-jsvc\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":16 bigtop-utils\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":12 hadoop\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("286")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":57 hbase\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Mar  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":31 hive\ndrwxrwxr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("93")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":33 kafka\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("95")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":34 phoenix\ndrwxrwxr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":34 repodata\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":37 spark\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("61")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":58 tez\ndrwxrwxr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("78")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 09:56 wdp-agent\ndrwxrwxr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("241")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":36 wdp-metrics\n-rw-r--r-- "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("97")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":57 wdp.repo\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v(" Mar  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":31 wdp-select\ndrwxrwxr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 09:53 wdp-server\ndrwxr-xr-x "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" iwdp iwdp  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),s._v(" Mar "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":24 zookeeper\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("p",[s._v("然后createrepo:")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/www/html/WDP/centos7/develop\ncreaterepo /var/www/html/WDP/centos7/develop\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("访问私库地址：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(510),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"配置wdp节点的库地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置wdp节点的库地址"}},[s._v("#")]),s._v(" 配置WDP节点的库地址")]),s._v(" "),e("p",[s._v("配置yum库的地址")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/yum.repos.d/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" wdp.repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("内容如下：")]),s._v(" "),e("p",[s._v("Baseurl根据仓库地址进行调整;")]),s._v(" "),e("blockquote",[e("p",[s._v("注意这里的baseurl记得跟前端的登陆验证版本一致；")])]),s._v(" "),e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("WDP"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nname"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("WDP\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#目前release默认的都是cookie验证版本；")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#baseurl=http://10.45.xxx.116:58888/files/wdp/1.1-release/1.1-release")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#token验证版本；")]),s._v("\nbaseurl"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("http")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.45")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("116")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("58888")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("files"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wdp"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev\ngpgcheck"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nenabled"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\npriority"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("strong",[s._v("注意需要设置 gpgcheck=0")])]),s._v(" "),e("p",[s._v("基础仓库 : "),e("code",[s._v("base.repo")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Base\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://10.45.xxx.116:58888/files/wdp/thirdparty/centos7-base/centos7-base/\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("priority")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("mysql仓库: "),e("code",[s._v("mysql.repo")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MYSQL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://10.45.xxx.116:58888/files/wdp/1.0-release/mysql-5.7.35/\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("priority")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h2",{attrs:{id:"安装和配置mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装和配置mysql"}},[s._v("#")]),s._v(" 安装和配置mysql")]),s._v(" "),e("p",[s._v("由于WDP的管理器 wdp-server和hive的元数据需要存储在关系数据库中，这里使用mysql作为关系数据库存储元数据。所以需要先进行mysql的安装和配置：")]),s._v(" "),e("h3",{attrs:{id:"安装mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[s._v("#")]),s._v(" 安装mysql")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#wget https://repo.mysql.com//mysql57-community-release-el7-11.noarch.rpm")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#yum install mysql57-community-release-el7-11.noarch.rpm ")]),s._v("\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-community-server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("修改相应的配置")]),s._v(" "),e("p",[e("code",[s._v("vi /etc/my.cnf")])]),s._v(" "),e("p",[s._v("添加：")]),s._v(" "),e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[s._v("skip"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("grant"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("tables\ncharacter_set_server"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\ninit_connect"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET NAMES utf8'")]),s._v("\nlower_case_table_names"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("启动：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl start mysqld.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("设置密码：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql\nflush privileges;\nupdate mysql.user set authentication_string=password('Pass-xxx') where user='root';\nflush privileges;\n\n#mysql 8.0\nALTER USER 'root'@'localhost' IDENTIFIED BY 'Pass-xxx'; \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("关闭:")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl stop mysqld.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("修改完毕密码后，需要把免密码认证取消：")]),s._v(" "),e("p",[e("code",[s._v("vi /etc/my.cnf")])]),s._v(" "),e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#skip-grant-tables这一行注释掉")]),s._v("\nskip"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("grant"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("tables\ncharacter_set_server"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\ninit_connect"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SET NAMES utf8'")]),s._v("\nlower_case_table_names"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("启动：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl start mysqld.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("允许远程：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pPass"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xxx\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" PASSWORD "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PASSWORD"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" identified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" identified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'vhost-118-21'")]),s._v(" identified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.45.xx.61'")]),s._v(" identified "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Mysql 8.0 :")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v("IDENTIFIED "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OPTION")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user1'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" IDENTIFIED "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" host "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" IDENTIFIED "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),s._v(" PASSWORD EXPIRE NEVER"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" IDENTIFIED "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" mysql_native_password "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Pass-xxx'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("p",[s._v("开机自动启动")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" mysqld.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"数据库相关用户的创建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库相关用户的创建"}},[s._v("#")]),s._v(" 数据库相关用户的创建")]),s._v(" "),e("p",[s._v("创建 wdp/hive 用户以及相关的库：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE USER 'wdp'@'%' IDENTIFIED BY 'Pass-xxx';\nGRANT ALL PRIVILEGES ON *.* TO 'wdp'@'%';\nCREATE USER 'wdp'@'localhost' IDENTIFIED BY 'Pass-xxx';\nGRANT ALL PRIVILEGES ON *.* TO 'wdp'@'localhost';\nCREATE USER 'wdp'@'[主机名请替换]' IDENTIFIED BY 'Pass-xxx';\nGRANT ALL PRIVILEGES ON *.* TO 'wdp'@'[主机名请替换]';\nFLUSH PRIVILEGES;\n\n#安装hive组件相关初始化表；\nCREATE USER 'hive'@'%' IDENTIFIED BY 'Pass-xxx-hive';\nGRANT ALL PRIVILEGES ON *.* TO 'hive'@'%';\nCREATE USER 'hive'@'localhost' IDENTIFIED BY 'Pass-xxx-hive';\nGRANT ALL PRIVILEGES ON *.* TO 'hive'@'localhost';\nCREATE USER 'hive'@'[主机名请替换]' IDENTIFIED BY 'Pass-xxx-hive';\nGRANT ALL PRIVILEGES ON *.* TO 'hive'@'[主机名请替换]';\nFLUSH PRIVILEGES;\n\n#ranger组件相关，目前没有用到\nCREATE USER 'ranger'@'%' IDENTIFIED BY 'Pass-xxx-ranger';\nGRANT ALL PRIVILEGES ON *.* TO 'hive'@'%';\nCREATE USER 'ranger'@'localhost' IDENTIFIED BY 'Pass-xxx-ranger';\nGRANT ALL PRIVILEGES ON *.* TO 'ranger'@'localhost';\nCREATE USER 'ranger'@'[主机名请替换]' IDENTIFIED BY 'Pass-xxx-ranger';\nGRANT ALL PRIVILEGES ON *.* TO 'ranger'@'[主机名请替换]';\nFLUSH PRIVILEGES;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("p",[s._v("用户进入创建库：")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uhive "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pPass"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xxx"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hive\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" hive"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("开机自动启动")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enable")]),s._v(" mysqld"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"启动服务和安装软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动服务和安装软件"}},[s._v("#")]),s._v(" 启动服务和安装软件")]),s._v(" "),e("h3",{attrs:{id:"安装软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装软件"}},[s._v("#")]),s._v(" 安装软件")]),s._v(" "),e("h4",{attrs:{id:"每台主机安装jdk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#每台主机安装jdk"}},[s._v("#")]),s._v(" 每台主机安装jdk")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" jdk -y\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/profile\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在最后一行插入")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/lib/jvm/jdk1.8.0_241\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CLASSPATH")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".:"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/dt.jar:"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/tools.jar\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#通过source命令重新加载/etc/profile文件，使得修改后的内容在当前shell窗口有效：")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /etc/profile\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注：jdk安装路径为：/usr/lib/jvm/jdk1.8.0_241")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h4",{attrs:{id:"通过yum安装wdp-server【常用】"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过yum安装wdp-server【常用】"}},[s._v("#")]),s._v(" 通过yum安装"),e("code",[s._v("wdp-server")]),s._v("【常用】")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" wdp-server -y\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发模式可以安装指定的包；否则采用新源")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install http://10.45.xxx.116:58888/files/wdp/1.1.1-release/wdp-server-1.0-1.x86_64.rpm --nodeps --force")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -ivh http://10.45.xxx.116:58888/files/wdp/1.1-release/1.1-release-en/wdp-server-1.0-1.x86_64.rpm --nodeps --force")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"数据库脚本导入-【常用】"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库脚本导入-【常用】"}},[s._v("#")]),s._v(" 数据库脚本导入 【常用】")]),s._v(" "),e("p",[s._v("将安装了wdp-server的服务器的")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/var/lib/wdp-server/resources/Wdp-DDL-MySQL-CREATE.sql 文件拷贝到安装了mysql的服务器:/root/Wdp-DDL-MySQL-CREATE.sql;")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /var/lib/wdp-server/resources/Wdp-DDL-MySQL-CREATE.sql /root/Wdp-DDL-MySQL-CREATE.sql")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("导入脚本信息：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql -u root -pPass-xxx\ncreate database wdp;\nuse wdp;\n#source /root/Wdp-DDL-MySQL-CREATE.sql;\nsource /var/lib/wdp-server/resources/Wdp-DDL-MySQL-CREATE.sql;\nexit;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"命令行设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令行设置"}},[s._v("#")]),s._v(" 命令行设置")]),s._v(" "),e("p",[s._v("进入到wdp-server的主机，进行如下设置：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(511),alt:"img"}})]),s._v(" "),e("p",[e("code",[s._v("vi /var/lib/wdp-server/resources/template-for-installing-wdp.txt")])]),s._v(" "),e("p",[s._v("进行如下修改：")]),s._v(" "),e("div",{staticClass:"language-nginx line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[s._v("JAVA_HOME"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jvm"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jdk1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v("_241\nmysql_hostname_ip"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("vhost"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("118")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("\nmysql_port"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nmysql_database_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wdp\nmysql_username"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("\nmysql_password"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pass"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xxx \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("修改完之后，执行设置命令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("wdp-install.sh /var/lib/wdp-server/resources/template-for-installing-wdp.txt\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#报错则执行下面的,再执行；")]),s._v("\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y postgresql-server\nwdp-install.sh /var/lib/wdp-server/resources/template-for-installing-wdp.txt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("strong",[s._v("初始化hive jdbc设置")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("wdp-server setup --jdbc-db"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --jdbc-driver"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/share/java/mysql-connector-java-5.1.27.jar\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#mysql 8.0")]),s._v("\nwdp-server setup --jdbc-db"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --jdbc-driver"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/share/java/mysql-connector-java-8.0.22.jar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"liecnes替换"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#liecnes替换"}},[s._v("#")]),s._v(" LIECNES替换")]),s._v(" "),e("blockquote",[e("p",[s._v("后端版本，新版本1.1.1才支持cpu的License，原理的是服务器ip生产License;")])]),s._v(" "),e("p",[e("a",{attrs:{href:"https://xxx/licensemanager/#/fishx-base/",target:"_blank",rel:"noopener noreferrer"}},[s._v("注册地址"),e("OutboundLink")],1),s._v(", 目前通过服务器ip(mysql数据库的ip)生成license; 放license到目录："),e("strong",[s._v("记得项目中公钥和私钥要对应上；")])]),s._v(" "),e("ul",[e("li",[s._v("public.key")]),s._v(" "),e("li",[s._v("wdp.license")])]),s._v(" "),e("p",[s._v("可以借助http，再通过wget下载；")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/wdp-server/conf/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xxx.116:58888/files/wdp/jks/license/public.key\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xxx.116:58888/files/wdp/jks/license/wdp.license\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("内部测试阶段，统一一起生成签名，便于测试使用；"),e("strong",[s._v("对应的项目的公钥和私钥要一样处理；")])]),s._v(" "),e("p",[e("img",{staticStyle:{zoom:"67%"},attrs:{src:"_image/19.wdp安装手册说明/image-20220507113654942.png",alt:"image-20220507113654942"}}),e("img",{attrs:{src:t(512),alt:"image-20220507113730843"}})]),s._v(" "),e("h3",{attrs:{id:"服务启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务启动"}},[s._v("#")]),s._v(" 服务启动")]),s._v(" "),e("p",[s._v("前面的设置完毕后，执行命令行启动wdp")]),s._v(" "),e("p",[e("code",[s._v("wdp-server start")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@host151-133 yum.repos.d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wdp-server start")]),s._v("\nUsing python  /usr/bin/python\nStarting wdp-server\nWdp Server running with administrator privileges.\nOrganizing resource files at /var/lib/wdp-server/resources"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nWARNING: Multiple versions of mysql-connector-java.jar found "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" java class path "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/share/java/mysql-connector-java-5.1.27.jar and /usr/lib/wdp-server/mysql-connector-java-5.1.27.jar"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n Make sure that you include only one mysql-connector-java.jar "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the java class path "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/etc/wdp-server/conf:/usr/lib/wdp-server/*:/usr/share/java/mysql-connector-java-5.1.27.jar:/usr/share/java/mysql-connector-java.jar'")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nWdp database consistency check started"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nServer PID at: /var/run/wdp-server/wdp-server.pid\nServer out at: /var/log/wdp-server/wdp-server.out\nServer log at: /var/log/wdp-server/wdp-server.log\nWaiting "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" server start"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nServer started listening on "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n\nDB configs consistency check: no errors and warnings were found.\nWdp Server "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'start'")]),s._v(" completed successfully.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[s._v("然后通过访问8080端口，进行WDP的集群配置")]),s._v(" "),e("p",[e("img",{attrs:{src:t(513),alt:"image-20220506150719615"}})]),s._v(" "),e("p",[s._v("初始用户密码： adminxx/xxx")]),s._v(" "),e("p",[s._v("如果报错提示；以下提示错误；得挺住wdp-server; 修改license再次启动；")]),s._v(" "),e("p",[e("img",{attrs:{src:t(514),alt:"image-20220506172620399"}})]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("wdp-server stop\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xxx.116:58888/files/wdp/jks/license/wdp.license.33\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" wdp.license wdp.license.old\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" wdp.license.33 wdp.license\n\nwdp-server start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("检查前端版本，发现前端版本不是最新的，单独更新前端：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xx.116:58888/files/wdp/web/getWeb.sh\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" getWeb.sh\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检查前端版本")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" localhost:8080/version.json\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"curBranch"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.2.0"')]),s._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitID"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"d4a6a5b"')]),s._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitTime"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2022-04-29 18:00:43 +0800"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"buildCfg"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"buildTime"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2022-04-29 18:01:29"')]),s._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"envName"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('".env.default"')]),s._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isPro"')]),s._v(":true,\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultLang"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh"')]),s._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isHideLang"')]),s._v(":false,\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isTokenAuth"')]),s._v(":true\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h3",{attrs:{id:"卸载重装wdp-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#卸载重装wdp-server"}},[s._v("#")]),s._v(" 卸载重装wdp-server")]),s._v(" "),e("blockquote",[e("p",[s._v("有时候要单独更新后端服务，可以直接卸载再重新安装；重复上面的安装软件，再出事后脚本启动；")])]),s._v(" "),e("h4",{attrs:{id:"卸载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[s._v("#")]),s._v(" 卸载")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@host151-133 yum.repos.d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum remove wdp-server")]),s._v("\n已加载插件：fastestmirror\n正在解决依赖关系\n--"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 正在检查事务\n---"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 软件包 wdp-server.x86_64.0.1.0-1 将被 删除\n--"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 解决依赖关系完成\n\n依赖关系解决\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n Package                            架构                           版本                          源                            大小\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n正在删除:\n wdp-server                         x86_64                         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("-1                         @WDP                         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("362")]),s._v(" M\n\n事务概要\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n移除  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 软件包\n\n安装大小：362 M\n是否继续？"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：y\nDownloading packages:\nRunning transaction check\nRunning transaction "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\nTransaction "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" succeeded\nRunning transaction\n  正在删除    "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" wdp-server-1.0-1.x86_64                                                                                         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1\n  验证中      "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" wdp-server-1.0-1.x86_64                                                                                         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1\n\n删除:\n  wdp-server.x86_64 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":1.0-1\n\n完毕！\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br")])]),e("h4",{attrs:{id:"安装【要点】"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装【要点】"}},[s._v("#")]),s._v(" 安装【要点】")]),s._v(" "),e("p",[s._v("重复上面的步骤；")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" wdp-server -y\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#yum install http://10.45.xxx.116:58888/files/wdp/test/wdp-server-1.0-1.x86_64.rpm --nodeps --force")]),s._v("\n\nmysql -u root -pPass-xxx\ncreate database wdp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nuse wdp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" /var/lib/wdp-server/resources/Wdp-DDL-MySQL-CREATE.sql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /var/lib/wdp-server/resources/template-for-installing-wdp.txt \n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/lib/jvm/jdk1.8.0_241\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可能要真实ip")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mysql_hostname_ip")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("vhost-118-24\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mysql_port")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mysql_database_name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wdp\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mysql_username")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mysql_password")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Pass-xxx \n\nwdp-install.sh /var/lib/wdp-server/resources/template-for-installing-wdp.txt\nwdp-server start\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#更新license")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/wdp-server/conf "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" public.key public.key.old "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" wdp.license wdp.license.old\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xxx.116:58888/files/wdp/jks/license/public.key\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xxx.116:58888/files/wdp/jks/license/wdp.license\nwdp-server restart\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#更新前端")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf installWeb.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xx.116:58888/files/wdp/jsk/web/installWeb.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" installWeb.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检查前端版本")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" localhost:8080/version.json\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br")])]),e("h5",{attrs:{id:"封装成脚本installserver-sh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#封装成脚本installserver-sh"}},[s._v("#")]),s._v(" 封装成脚本"),e("code",[s._v("installServer.sh")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\nyum remove -y wdp-server "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y wdp-server\nmysql -uroot -pPass-xxx -e "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\n  create database wdp;\n  use wdp;\n  source /var/lib/wdp-server/resources/Wdp-DDL-MySQL-CREATE.sql;\n  exit;\n"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("templateCfg")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lib/wdp-server/resources/template-for-installing-wdp.txt\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("localIp")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\<inet\\>'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{ print "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("}'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NR==1'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s/mysql_hostname_ip=10.45.47.68/mysql_hostname_ip='),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$localIp")]),s._v('/g"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$templateCfg")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#sed -i 's/mysql_hostname_ip=10.45.47.68/mysql_hostname_ip=127.0.0.1/g' $templateCfg")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/mysql_database_name=wdp_data/mysql_database_name=wdp/g'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$templateCfg")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/mysql_password=Pass-xxx/mysql_password=Pass-xxx/g'")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$templateCfg")]),s._v("\nwdp-install.sh "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$templateCfg")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseHttp")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://10.45.xx.116:58888/files/wdp/jks\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#更新license")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/wdp-server/conf "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" -f public.key public.key.old "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" -f wdp.license wdp.license.old\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$baseHttp")]),s._v("/license/public.key "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$baseHttp")]),s._v("/license/wdp.license\nwdp-server restart\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tail -n 100 -f /var/log/wdp-server/wdp-server.log")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#更新前端")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cd /srv && rm -rf installWeb.sh && wget $baseHttp/web/installWeb.sh && sh installWeb.sh")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("h5",{attrs:{id:"安装使用【推荐】"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装使用【推荐】"}},[s._v("#")]),s._v(" 安装使用【推荐】")]),s._v(" "),e("p",[s._v("再封装前后端，调用使用；"),e("code",[s._v("installServerWeb.sh")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseHttp")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://10.45.xx.116:58888/files/wdp/jks\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /srv "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf installWeb.sh installServer.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后端")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$baseHttp")]),s._v("/server/installServer.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" installServer.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#前端")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$baseHttp")]),s._v("/web/installWeb.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" installWeb.sh\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统一")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cd /srv && rm -rf installWeb.sh installServer.sh && wget http://10.45.xx.116:58888/files/wdp/jks/server/installServer.sh && sh installServer.sh && wget http://10.45.xx.116:58888/files/wdp/jks/web/installWeb.sh && sh installWeb.sh")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("使用：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#单独安装server")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /srv "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf installServer.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xx.116:58888/files/wdp/jks/server/installServer.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" installServer.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#单独更新web")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /srv "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf installWeb.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xx.116:58888/files/wdp/jks/web/installWeb.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" installWeb.sh\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#前后端一起更新")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /srv "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf installServerWeb.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://10.45.xx.116:58888/files/wdp/jks/installServerWeb.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" installServerWeb.sh\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h4",{attrs:{id:"完全卸载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完全卸载"}},[s._v("#")]),s._v(" 完全卸载")]),s._v(" "),e("p",[s._v("脚本操作参考，"),e("code",[s._v("wdp-install")]),s._v("项目中的脚本；")]),s._v(" "),e("h2",{attrs:{id:"集群配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群配置"}},[s._v("#")]),s._v(" 集群配置")]),s._v(" "),e("h3",{attrs:{id:"向导配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#向导配置"}},[s._v("#")]),s._v(" 向导配置")]),s._v(" "),e("p",[s._v("设定集群名称")]),s._v(" "),e("p",[e("img",{attrs:{src:t(515),alt:"img"}})]),s._v(" "),e("p",[s._v("填写WDP软件的私有仓库地址，并且勾选 Skip Repository Base; 跟"),e("code",[s._v("/etc/yum.repos.d/wdp.repo")]),s._v("中的baseurl一致；")]),s._v(" "),e("p",[e("img",{attrs:{src:t(516),alt:"img"}})]),s._v(" "),e("p",[s._v("填写需要安装的主机列表：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(517),alt:"img"}})]),s._v(" "),e("p",[s._v("填写 ambari 节点的ssh密钥信息")]),s._v(" "),e("p",[e("img",{attrs:{src:t(518),alt:"img"}})]),s._v(" "),e("p",[s._v("开始安装：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(519),alt:"img"}})]),s._v(" "),e("p",[e("img",{attrs:{src:t(520),alt:"img"}})]),s._v(" "),e("p",[s._v("选择安装软件包： 内部简单测试话优先安装"),e("code",[s._v("YARN+MR")]),s._v(","),e("code",[s._v("Tez")]),s._v(","),e("code",[s._v("HBase")]),s._v(","),e("code",[s._v("Zookeeper")])]),s._v(" "),e("p",[e("img",{attrs:{src:t(521),alt:"img"}})]),s._v(" "),e("p",[e("img",{attrs:{src:t(522),alt:"img"}})]),s._v(" "),e("p",[s._v("填写hive元数据对于的mysql的用户密码：(hive123xxxx)")]),s._v(" "),e("p",[e("img",{attrs:{src:t(523),alt:"img"}})]),s._v(" "),e("p",[s._v("设定HIVE的元数据是已有的mysql")]),s._v(" "),e("p",[e("img",{attrs:{src:t(524),alt:"img"}})]),s._v(" "),e("p",[s._v("填写datanode,namenode磁盘目录信息。")]),s._v(" "),e("p",[s._v("如果有多个磁盘目录，使用逗号隔开\n"),e("img",{attrs:{src:t(525),alt:"img"}})]),s._v(" "),e("p",[s._v("账号信息一般选择默认即可：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(526),alt:"img"}})]),s._v(" "),e("p",[s._v("资源信息参考后面的章节：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(527),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"hdfs-yarn-hbase-hive-spark-llap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hdfs-yarn-hbase-hive-spark-llap"}},[s._v("#")]),s._v(" hdfs,yarn,hbase,hive,spark,llap")]),s._v(" "),e("blockquote",[e("p",[s._v("Hive要设置数据库，Ranger要配置相关很多；其他组件还好；")])]),s._v(" "),e("p",[e("img",{attrs:{src:t(528),alt:"image-20220509144004264"}})]),s._v(" "),e("h2",{attrs:{id:"参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数调整"}},[s._v("#")]),s._v(" 参数调整")]),s._v(" "),e("blockquote",[e("p",[s._v("优先安装"),e("code",[s._v("YARN+MR")]),s._v(","),e("code",[s._v("Tez")]),s._v(","),e("code",[s._v("HBase")]),s._v(","),e("code",[s._v("Zookeeper")])])]),s._v(" "),e("h3",{attrs:{id:"hdfs参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hdfs参数调整"}},[s._v("#")]),s._v(" HDFS参数调整")]),s._v(" "),e("p",[s._v("Namenode 内存：")]),s._v(" "),e("p",[s._v("内存跟文件数量相关")]),s._v(" "),e("p",[s._v("一个文件大概需要150个字节，1亿个文件大概需要15G")]),s._v(" "),e("p",[e("img",{attrs:{src:t(529),alt:"img"}})]),s._v(" "),e("p",[s._v("Datanode 内存：")]),s._v(" "),e("p",[s._v("一般配置2-4G即可")]),s._v(" "),e("p",[e("img",{attrs:{src:t(530),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"yarn参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yarn参数调整"}},[s._v("#")]),s._v(" YARN参数调整")]),s._v(" "),e("p",[s._v("YARN参数主要是涉及到资源的配置")]),s._v(" "),e("p",[s._v("每个物理节点上的内存分配给yarn的可支配空间")]),s._v(" "),e("p",[e("img",{attrs:{src:t(531),alt:"img"}})]),s._v(" "),e("p",[s._v("建议分配65%给yarn使用。如果节点还部署了hbase等其他占用内存的应用，这个值应该确保不会超过节点的物理内存限制。")]),s._v(" "),e("p",[s._v("YARN容器建议最小分配内存，这个建议值是1GB")]),s._v(" "),e("p",[e("img",{attrs:{src:t(532),alt:"img"}})]),s._v(" "),e("p",[s._v("CPU配置：")]),s._v(" "),e("p",[s._v("物理节点上分配给YARN使用的CPU比例，根据实际需要，建议50%或者更多。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(533),alt:"img"}})]),s._v(" "),e("p",[s._v("容器分配的最小CPU，建议1个")]),s._v(" "),e("p",[e("img",{attrs:{src:t(534),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"zookeeper参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper参数调整"}},[s._v("#")]),s._v(" ZOOKEEPER参数调整")]),s._v(" "),e("p",[s._v("主要调整连接数maxClientCnxns，默认的连接数是60，建议调整到500")]),s._v(" "),e("p",[s._v("需要在Custom zoo.cfg中进行调整")]),s._v(" "),e("p",[e("img",{attrs:{src:t(535),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"hbase参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hbase参数调整"}},[s._v("#")]),s._v(" HBASE参数调整")]),s._v(" "),e("p",[s._v("Master内存调整：")]),s._v(" "),e("p",[s._v("Master只负责元数据等信息的控制，不参与存储和计算，一般设置1GB即可。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(536),alt:"img"}})]),s._v(" "),e("p",[s._v("Regionserver 内存调整：")]),s._v(" "),e("p",[s._v("Regionserver  提供存取服务，需要配置较多的内存，内存不足会导致频繁GC和性能下降。一般建议配置10GB以上。")]),s._v(" "),e("p",[e("img",{attrs:{src:t(537),alt:"img"}})]),s._v(" "),e("p",[s._v("读缓存配置，一般建议配置40%")]),s._v(" "),e("p",[e("img",{attrs:{src:t(538),alt:"img"}})]),s._v(" "),e("p",[s._v("Memstore 刷盘阈值，一般设置128MB")]),s._v(" "),e("p",[e("img",{attrs:{src:t(539),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"spark参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spark参数调整"}},[s._v("#")]),s._v(" SPARK参数调整")]),s._v(" "),e("p",[s._v("Spark这里配置的是提供SQL服务器的thriftserver:")]),s._v(" "),e("p",[s._v("一般使用动态资源分配")]),s._v(" "),e("p",[e("img",{attrs:{src:t(540),alt:"img"}})]),s._v(" "),e("p",[s._v("Custom spark2-thrift-sparkconf")]),s._v(" "),e("p",[e("img",{attrs:{src:t(541),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"hive参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hive参数调整"}},[s._v("#")]),s._v(" HIVE参数调整")]),s._v(" "),e("p",[s._v("Tez 容器设置，这个一般设置4G")]),s._v(" "),e("p",[e("img",{attrs:{src:t(542),alt:"img"}})]),s._v(" "),e("p",[s._v("tez - > Advanced tez-site")]),s._v(" "),e("p",[s._v("tez.runtime.io.sort.mb")]),s._v(" "),e("p",[s._v("这个内存用于排序的，建议配置容器的40%")]),s._v(" "),e("p",[e("img",{attrs:{src:t(543),alt:"img"}})]),s._v(" "),e("p",[s._v("tez.am.resource.memory.mb")]),s._v(" "),e("p",[s._v("一般配置4GB")]),s._v(" "),e("p",[e("img",{attrs:{src:t(544),alt:"img"}})]),s._v(" "),e("p",[s._v("HIVESERVER2 内存，建议配置4GB")]),s._v(" "),e("p",[e("img",{attrs:{src:t(545),alt:"img"}})]),s._v(" "),e("p",[s._v("Metastore 内存，建议配置1GB")]),s._v(" "),e("p",[e("img",{attrs:{src:t(546),alt:"img"}})]),s._v(" "),e("h3",{attrs:{id:"llap参数调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#llap参数调整"}},[s._v("#")]),s._v(" LLAP参数调整")]),s._v(" "),e("p",[s._v("LLAP是常驻的HIVE服务，配置和HIVE类似，值得注意的是和tez相关的配置都在LLAP的配置项中，相同和配置参数和HIVE的配置位置是独立的，HIVE配置的参数不作用于LLAP，反之亦然。")]),s._v(" "),e("p",[s._v("Yarn 启动资源预占")]),s._v(" "),e("p",[e("img",{attrs:{src:t(547),alt:"img"}})]),s._v(" "),e("p",[s._v("开启LLAP")]),s._v(" "),e("p",[e("img",{attrs:{src:t(548),alt:"img"}})]),s._v(" "),e("p",[s._v("选择LLAP队列")]),s._v(" "),e("p",[e("img",{attrs:{src:t(549),alt:"img"}})]),s._v(" "),e("p",[s._v("设定LLAP守护进程的资源配置，注意这个资源的配置应该在LLAP队列的限制范围内")]),s._v(" "),e("p",[s._v("总体VCORE = 节点数*节点核心")]),s._v(" "),e("p",[s._v("总体内存 = 节点数*节点内存")]),s._v(" "),e("p",[s._v("节点数，下图配置是2")]),s._v(" "),e("p",[e("img",{attrs:{src:t(550),alt:"img"}})]),s._v(" "),e("p",[s._v("节点内存，下图配置和是60G")]),s._v(" "),e("p",[e("img",{attrs:{src:t(551),alt:"img"}})]),s._v(" "),e("p",[s._v("节点核心，下图配置是18")]),s._v(" "),e("p",[e("img",{attrs:{src:t(552),alt:"img"}})]),s._v(" "),e("p",[s._v("这里使用了总体CPU vCores = 2*18 = 36")]),s._v(" "),e("p",[s._v("总体的YARN内存 2*60G = 120G")]),s._v(" "),e("p",[s._v("另外还需要设置JVM的大小和缓存参数")]),s._v(" "),e("p",[e("img",{attrs:{src:t(553),alt:"img"}})]),s._v(" "),e("p",[s._v("进入 Advance hive-interactive-env 需要调整 LLAP Daemon Heap Size和 LLAP Daemon Container Max Headroom")]),s._v(" "),e("p",[e("img",{attrs:{src:t(554),alt:"img"}})]),s._v(" "),e("p",[s._v("必须确保")]),s._v(" "),e("p",[s._v("HeapSize+Headroom+Cache <= Memory per Deamon")]),s._v(" "),e("p",[s._v("也就是说 JVM程序+缓存+剩余空间 < yarn容器大小")]),s._v(" "),e("p",[s._v("一般按照这个分配原则:")]),s._v(" "),e("p",[s._v("HeapSize = Memory per Deamon * 80%")]),s._v(" "),e("p",[s._v("Headroom = Memory per Deamon * 10%")]),s._v(" "),e("p",[s._v("Cache = Memory per Deamon * 10%")]),s._v(" "),e("p",[s._v("tez.am.resource.memory.mb 这个参数在hive页面的Advance tez-interactive-site中")]),s._v(" "),e("p",[e("img",{attrs:{src:t(555),alt:"img"}})]),s._v(" "),e("p",[s._v("建议配置4G")]),s._v(" "),e("p",[s._v("tez.runtime.io.sort.mb, 也是在hive页面的Advance tez-interactive-site中")]),s._v(" "),e("p",[e("img",{attrs:{src:t(556),alt:"img"}})]),s._v(" "),e("p",[s._v("建议配置JVM的10%左右")])])}),[],!1,null,null,null);a.default=r.exports}}]);