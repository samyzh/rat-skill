(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{481:function(s,t,a){s.exports=a.p+"assets/img/image-20211011151423115.73c30542.png"},482:function(s,t,a){s.exports=a.p+"assets/img/image-20211015122611602.3e5a2f88.png"},483:function(s,t,a){s.exports=a.p+"assets/img/image-20211015172621150.9b04d0f5.png"},770:function(s,t,a){"use strict";a.r(t);var e=a(31),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"依赖安装方面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#依赖安装方面"}},[s._v("#")]),s._v(" 依赖安装方面")]),s._v(" "),e("h3",{attrs:{id:"bower提前解压依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bower提前解压依赖"}},[s._v("#")]),s._v(" bower提前解压依赖")]),s._v(" "),e("p",[s._v("对应admin/capacity-scheduler/files项目；之前的依赖先压缩号，每次构建再解压到指定文件夹内；")]),s._v(" "),e("h3",{attrs:{id:"分包构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分包构建"}},[s._v("#")]),s._v(" 分包构建")]),s._v(" "),e("p",[s._v("通过bash脚本，指定某个项目构建即可；")]),s._v(" "),e("h2",{attrs:{id:"部署方面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署方面"}},[s._v("#")]),s._v(" 部署方面")]),s._v(" "),e("p",[e("strong",[s._v("场景")]),s._v("：要涉及部分老项目jsp或者fish的老系统交付部署；之前项目是前后端一起项目，只能通过jks统一构建；")]),s._v(" "),e("p",[e("strong",[s._v("方案")]),s._v("：已实现通过脚手架单独部署前端；"),e("strong",[s._v("从10min的Jks构建压缩下40s内更新开发环境前端；开发效率提升到20+倍")])]),s._v(" "),e("h2",{attrs:{id:"构建方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建方案"}},[s._v("#")]),s._v(" 构建方案")]),s._v(" "),e("h3",{attrs:{id:"构建速度"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建速度"}},[s._v("#")]),s._v(" 构建速度")]),s._v(" "),e("p",[e("strong",[s._v("场景")]),s._v("：Vue多页面的pages项目，构建速度非常慢，要3min;")]),s._v(" "),e("p",[s._v("单页面现在优化后单页面压缩到一半；"),e("strong",[s._v("通过loader,sourcemap,externals处理；把生成构建速度从1min压缩10s内；")])]),s._v(" "),e("p",[e("strong",[s._v("方案")]),s._v("：")]),s._v(" "),e("h3",{attrs:{id:"构建包的大小"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建包的大小"}},[s._v("#")]),s._v(" 构建包的大小")]),s._v(" "),e("h4",{attrs:{id:"pages-vue项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pages-vue项目"}},[s._v("#")]),s._v(" Pages Vue项目")]),s._v(" "),e("p",[e("strong",[s._v("场景")]),s._v("：Vue多页面的pages项目，单个页面就是很大；2.5～3M；主要是vendors文件比较大； 要考虑extends;")]),s._v(" "),e("p",[e("img",{attrs:{src:a(481),alt:"image-20211011151423115"}})]),s._v(" "),e("p",[e("strong",[s._v("方案")]),s._v("：")]),s._v(" "),e("p",[s._v("模块间加载方向；优化后；")]),s._v(" "),e("p",[e("img",{attrs:{src:a(482),alt:"image-20211015122611602"}})]),s._v(" "),e("p",[e("img",{attrs:{src:a(483),alt:"image-20211015172621150"}})]),s._v(" "),e("p",[s._v("多线程，babel缓存，其他loader缓存")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("productionSourceMap"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" buildCfg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("isUploadSourcemap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nexternals"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" isProd "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" buildCfg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("isUseCdn "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" cdn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("externals "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  module"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        include"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        exclude"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("node_modules")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'thread-loader'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cache-loader'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-loader?cacheDirectory'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    \n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" plugins "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("webpack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IgnorePlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("^\\.\\/locale$")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("moment$")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HardSourceWebpackPlugin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);