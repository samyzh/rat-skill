(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{565:function(s,a,t){s.exports=t.p+"assets/img/image-20220520100642910.c78376b1.png"},566:function(s,a,t){s.exports=t.p+"assets/img/image-20220520153930797.c5e44358.png"},567:function(s,a,t){s.exports=t.p+"assets/img/image-20220520134701111.9feb76af.png"},568:function(s,a,t){s.exports=t.p+"assets/img/wps2.27064f4e.jpg"},569:function(s,a,t){s.exports=t.p+"assets/img/wps3.85bb20a3.jpg"},570:function(s,a,t){s.exports=t.p+"assets/img/wps4.63606304.jpg"},571:function(s,a,t){s.exports=t.p+"assets/img/wps5.f4959693.jpg"},572:function(s,a,t){s.exports=t.p+"assets/img/wps6.d6fb030e.jpg"},573:function(s,a,t){s.exports=t.p+"assets/img/image-20220607105315782.a56f1185.png"},574:function(s,a,t){s.exports=t.p+"assets/img/image-20220520173259317.7e066355.png"},575:function(s,a,t){s.exports=t.p+"assets/img/image-20210726101544141.43339741.png"},576:function(s,a,t){s.exports=t.p+"assets/img/image-20210726135133819.5a761261.png"},577:function(s,a,t){s.exports=t.p+"assets/img/image-20210726105430879.0fc0021f.png"},578:function(s,a,t){s.exports=t.p+"assets/img/image-20210302181407722.fdc22d8f.png"},579:function(s,a,t){s.exports=t.p+"assets/img/image-20210726134249068.7568e8c8.png"},580:function(s,a,t){s.exports=t.p+"assets/img/image-20210302133411795.43c0668c.png"},581:function(s,a,t){s.exports=t.p+"assets/img/image-20210726141459318.b05d347e.png"},582:function(s,a,t){s.exports=t.p+"assets/img/image-20210301151056577.fd028e0b.png"},583:function(s,a,t){s.exports=t.p+"assets/img/image-20210726112101073.5186ba1f.png"},584:function(s,a,t){s.exports=t.p+"assets/img/image-20210301151624044.d03b6f23.png"},585:function(s,a,t){s.exports=t.p+"assets/img/wps9.54cec5b1.jpg"},586:function(s,a,t){s.exports=t.p+"assets/img/wps10.3e5719b9.jpg"},587:function(s,a,t){s.exports=t.p+"assets/img/wps11.272ae6d9.jpg"},588:function(s,a,t){s.exports=t.p+"assets/img/wps12.316228a6.jpg"},589:function(s,a,t){s.exports=t.p+"assets/img/wps13.fb158ea4.jpg"},783:function(s,a,t){"use strict";t.r(a);var e=t(31),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"clickhouseåŒ…å‡†å¤‡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clickhouseåŒ…å‡†å¤‡"}},[s._v("#")]),s._v(" clickhouseåŒ…å‡†å¤‡")]),s._v(" "),e("h3",{attrs:{id:"å•ç‹¬å‘½ä»¤å®‰è£…"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å•ç‹¬å‘½ä»¤å®‰è£…"}},[s._v("#")]),s._v(" å•ç‹¬å‘½ä»¤å®‰è£…")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --add-repo https://packages.clickhouse.com/rpm/clickhouse.repo\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y clickhouse-server clickhouse-client\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" /etc/init.d/clickhouse-server start\nclickhouse-client "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# or "clickhouse-client --password" if you set up a password.')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"æå‰ç¦»çº¿ä¸‹è½½åŒ…"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æå‰ç¦»çº¿ä¸‹è½½åŒ…"}},[s._v("#")]),s._v(" æå‰ç¦»çº¿ä¸‹è½½åŒ…")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yumdownloader --downloadonly clickhouse-server clickhouse-client\n\nroot@host116"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("/var/www/html/files/ckman/clickhouse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -lh")]),s._v("\næ€»ç”¨é‡ 120K\n-rw-r--r-- "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".4K "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("æœˆ   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" clickhouse-client-1.1.54385-2.x86_64.rpm\n-rw-r--r-- "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  31K "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("æœˆ  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":51 clickhouse-client-22.2.2.1-2.noarch.rpm\n-rw-r--r-- "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  21K "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("æœˆ   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" clickhouse-server-1.1.54385-2.x86_64.rpm\n-rw-r--r-- "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  55K "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("æœˆ  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":51 clickhouse-server-22.2.2.1-2.noarch.rpm\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"ckmanä»‹ç»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ckmanä»‹ç»"}},[s._v("#")]),s._v(" Ckmanä»‹ç»")]),s._v(" "),e("p",[e("code",[s._v("ckman")]),s._v("ï¼Œå…¨ç§°æ˜¯"),e("code",[s._v("ClickHouse Management Console")]),s._v("ï¼Œ å³"),e("code",[s._v("ClickHouse")]),s._v("ç®¡ç†å¹³å°ã€‚å®ƒæ˜¯ç”±æ“åˆ›ç§‘æŠ€æ•°æ®åº“å›¢é˜Ÿä¸»å¯¼ç ”å‘çš„ä¸€æ¬¾ç”¨æ¥ç®¡ç†å’Œç›‘æ§"),e("code",[s._v("ClickHouse")]),s._v("é›†ç¾¤çš„å¯è§†åŒ–è¿ç»´å·¥å…·ã€‚ç›®å‰è¯¥å·¥å…·å·²åœ¨"),e("code",[s._v("github")]),s._v("ä¸Šå¼€æºï¼Œå¼€æºåœ°å€ä¸ºï¼š"),e("a",{attrs:{href:"https://github.com/housepower/ckman",target:"_blank",rel:"noopener noreferrer"}},[s._v("github.com/housepower/ckman"),e("OutboundLink")],1),s._v("ã€‚")]),s._v(" "),e("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦æœ‰ckman"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦æœ‰ckman"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆè¦æœ‰ckman")]),s._v(" "),e("p",[s._v("æˆ‘ä»¬ä¸å¦¨æ€è€ƒä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šå¦‚æœè¦éƒ¨ç½²ä¸€ä¸ª"),e("code",[s._v("ClickHouse")]),s._v("é›†ç¾¤ï¼Œéœ€è¦æ€ä¹ˆåšï¼Ÿ")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰€æœ‰"),e("code",[s._v("ClickHouse")]),s._v("èŠ‚ç‚¹ä¸Šå®‰è£…"),e("code",[s._v("ClickHouse")]),s._v("çš„"),e("code",[s._v("rpm")]),s._v("åŒ…ï¼Œç„¶åï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº"),e("code",[s._v("config.xml")]),s._v("ã€"),e("code",[s._v("users.xml")]),s._v("ã€"),e("code",[s._v("metrika.xml")]),s._v("ã€‚æ³¨æ„ï¼Œæ˜¯æ‰€æœ‰èŠ‚ç‚¹ä¸Šéƒ½è¦ä¿®æ”¹ï¼Œä¿®æ”¹å®Œæˆåéœ€è¦ä¾æ¬¡å¯åŠ¨å„ä¸ªèŠ‚ç‚¹ã€‚")]),s._v(" "),e("p",[s._v("å½“é›†ç¾¤è§„æ¨¡ä¸å¤§ï¼Œè¿™äº›æ“ä½œæ‰‹åŠ¨å»å®Œæˆå¯èƒ½ä¸è§‰å¾—æœ‰ä»€ä¹ˆï¼Œä½†æ˜¯å¦‚æœé›†ç¾¤è§„æ¨¡æ¯”è¾ƒå¤§ï¼Œå•ä¸ªé›†ç¾¤çš„èŠ‚ç‚¹è¾¾åˆ°äº†ä¸Šç™¾å°ç”šè‡³ä¸Šåƒå°ï¼Œè¿™æ—¶å€™è¦æ‰‹å·¥å»æ¯å°æœºå™¨ä¸Šå»æ“ä½œï¼Œæ˜¾ç„¶å˜å¾—ä¸å¤ªç°å®ã€‚")])]),s._v(" "),e("li",[e("p",[s._v("å¦‚æœéœ€è¦å¾€é›†ç¾¤å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹å‘¢ï¼Ÿ")]),s._v(" "),e("p",[s._v("æˆ‘ä»¬éœ€è¦åœ¨å·²æœ‰çš„èŠ‚ç‚¹ä¸Šçš„"),e("code",[s._v("metrika.xml")]),s._v("é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šè¯¥èŠ‚ç‚¹ï¼Œç„¶ååœ¨æ–°å¢èŠ‚ç‚¹ä¸Šå®‰è£…"),e("code",[s._v("rpm")]),s._v("åŒ…ï¼Œä¿®æ”¹"),e("code",[s._v("metrika.xml")]),s._v("ï¼Œå¯åŠ¨"),e("code",[s._v("ClickHouse")]),s._v("æœåŠ¡ï¼Œæœ€åè¿˜è¦åŒæ­¥å…¶ä»–èŠ‚ç‚¹ä¸Šçš„"),e("code",[s._v("schema")]),s._v("è¡¨ç»“æ„ï¼Œè‡³æ­¤æ‰èƒ½å®Œæˆã€‚")])]),s._v(" "),e("li",[e("p",[s._v("åˆ é™¤èŠ‚ç‚¹äº¦å¦‚æ˜¯ã€‚")]),s._v(" "),e("p",[s._v("å¦‚æœè¦å‡çº§é›†ç¾¤å‘¢ï¼Ÿæˆ‘ä»¬ä¸ä»…éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šé‡æ–°å®‰è£…å‡çº§"),e("code",[s._v("rpm")]),s._v("åŒ…ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¸€äº›å…¶ä»–çš„é—®é¢˜ï¼šéœ€ä¸éœ€è¦åœæœåŠ¡ï¼Ÿå¦‚æœå‡çº§å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ")])])]),s._v(" "),e("p",[s._v("æ€»ä¹‹ï¼Œ"),e("code",[s._v("ClickHouse")]),s._v("çš„é›†ç¾¤è¿ç»´ï¼Œå¦‚æœé äººå·¥å»åšï¼Œä¸ä»…ç¹çï¼Œå®¹æ˜“å‡ºç°å„ç§é—®é¢˜ï¼Œå½“é›†ç¾¤è§„æ¨¡å˜å¤§åï¼Œä¹Ÿå˜å¾—ä¸åˆ‡å®é™…ã€‚")]),s._v(" "),e("p",[s._v("è¿™æ—¶å€™ï¼Œ"),e("code",[s._v("ckman")]),s._v("çš„å‡ºç°ï¼Œå°±å¯ä»¥å®Œç¾è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚"),e("code",[s._v("ckman")]),s._v("å°†è¿™äº›è¿ç»´æ“ä½œéƒ½é›†æˆåœ¨ç®¡ç†ç•Œé¢ä¸­ï¼Œç”¨æˆ·åªéœ€è¦åœ¨"),e("code",[s._v("web")]),s._v("ç•Œé¢ä¸Šé€šè¿‡ç®€å•çš„ä¿¡æ¯é…ç½®ï¼Œç‚¹å‡»é¼ æ ‡ï¼Œå°±å¯ä»¥å®Œæˆæ‰€æœ‰çš„é…ç½®å·¥ä½œï¼Œè€Œæ— éœ€å…³æ³¨å…¶ä»–ç»†èŠ‚ï¼Œä¹Ÿå‡å°‘äº†å‡ºé”™çš„å¯èƒ½ã€‚")]),s._v(" "),e("h3",{attrs:{id:"ckmanèƒ½åšä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ckmanèƒ½åšä»€ä¹ˆ"}},[s._v("#")]),s._v(" ckmanèƒ½åšä»€ä¹ˆ")]),s._v(" "),e("p",[e("code",[s._v("ckman")]),s._v("ä¸»è¦çš„åŠŸèƒ½æ˜¯ç®¡ç†å’Œç›‘æ§"),e("code",[s._v("ClickHouse")]),s._v("é›†ç¾¤ã€‚å› æ­¤ï¼Œå®ƒçš„æ“ä½œå¯¹è±¡åªèƒ½æ˜¯"),e("code",[s._v("ClickHouse")]),s._v("é›†ç¾¤ï¼Œè€Œä¸æ˜¯å•ä¸ª"),e("code",[s._v("ClickHouse")]),s._v("èŠ‚ç‚¹ã€‚")]),s._v(" "),e("h4",{attrs:{id:"ç®¡ç†clickhouseé›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç®¡ç†clickhouseé›†ç¾¤"}},[s._v("#")]),s._v(" ç®¡ç†ClickHouseé›†ç¾¤")]),s._v(" "),e("ul",[e("li",[s._v("éƒ¨ç½²"),e("code",[s._v("ClickHouse")]),s._v("é›†ç¾¤")]),s._v(" "),e("li",[s._v("å¯¼å…¥"),e("code",[s._v("ClickHouse")]),s._v("é›†ç¾¤")]),s._v(" "),e("li",[s._v("å‡çº§"),e("code",[s._v("ClickHouse")]),s._v("é›†ç¾¤")]),s._v(" "),e("li",[s._v("å¢åŠ æˆ–åˆ é™¤é›†ç¾¤èŠ‚ç‚¹")]),s._v(" "),e("li",[s._v("å¯¹é›†ç¾¤ï¼ˆæˆ–èŠ‚ç‚¹ï¼‰è¿›è¡Œå¯åœ")]),s._v(" "),e("li",[s._v("å®ç°æ•°æ®å†å‡è¡¡")])]),s._v(" "),e("h4",{attrs:{id:"ç›‘æ§clickhouseé›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘æ§clickhouseé›†ç¾¤"}},[s._v("#")]),s._v(" ç›‘æ§ClickHouseé›†ç¾¤")]),s._v(" "),e("ul",[e("li",[s._v("ç›‘æ§"),e("code",[s._v("ClickHouse Query")])]),s._v(" "),e("li",[s._v("ç›‘æ§èŠ‚ç‚¹ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ï¼ˆ"),e("code",[s._v("CPU")]),s._v("ï¼Œ"),e("code",[s._v("Memory")]),s._v("ï¼Œ "),e("code",[s._v("IO")]),s._v("ç­‰ï¼‰")]),s._v(" "),e("li",[s._v("ç›‘æ§"),e("code",[s._v("Zookeeper")]),s._v("ç›¸å…³æŒ‡æ ‡")]),s._v(" "),e("li",[s._v("ç›‘æ§é›†ç¾¤åˆ†å¸ƒå¼è¡¨ç›¸å…³æŒ‡æ ‡")]),s._v(" "),e("li",[s._v("ç›‘æ§å‰¯æœ¬çŠ¶æ€ç›¸å…³æŒ‡æ ‡")]),s._v(" "),e("li",[s._v("ç›‘æ§æ…¢"),e("code",[s._v("SQL")]),s._v("ç­‰ç›¸å…³æŒ‡æ ‡")])]),s._v(" "),e("h2",{attrs:{id:"æºç ç¼–è¯‘ckman"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æºç ç¼–è¯‘ckman"}},[s._v("#")]),s._v(" æºç ç¼–è¯‘ckman")]),s._v(" "),e("h3",{attrs:{id:"ç¼–è¯‘ä¾èµ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è¯‘ä¾èµ–"}},[s._v("#")]),s._v(" ç¼–è¯‘ä¾èµ–")]),s._v(" "),e("p",[s._v("ç”±äº"),e("code",[s._v("ckman")]),s._v("ä½¿ç”¨"),e("code",[s._v("golang")]),s._v("å®ç°ï¼Œå› æ­¤éœ€è¦æå‰å®‰è£…"),e("code",[s._v("go")]),s._v("(è¯·ä½¿ç”¨"),e("code",[s._v(">=1.17")]),s._v("ç‰ˆæœ¬)ï¼›")]),s._v(" "),e("p",[s._v("å¦‚æœéœ€è¦ç¼–è¯‘æˆ"),e("code",[s._v("rpm")]),s._v("åŒ…æˆ–"),e("code",[s._v("deb")]),s._v("åŒ…ï¼Œéœ€è¦å®‰è£…"),e("code",[s._v("nfpm")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -q https://github.com/goreleaser/nfpm/releases/download/v2.15.1/nfpm_2.15.1_Linux_x86_64.tar.gz \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzvf nfpm_2.15.1_Linux_x86_64.tar.gz \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" nfpm /usr/local/bin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("å¦‚æœæœ‰ç¼–è¯‘å‰ç«¯çš„éœ€æ±‚ï¼Œéœ€è¦å®‰è£…"),e("code",[s._v("node.js")]),s._v("ï¼›å¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -q https://nodejs.org/download/release/v14.15.3/node-v14.15.3-linux-x64.tar.gz \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzf node-v14.15.3-linux-x64.tar.gz -C /usr/local/ \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/node-v14.15.3-linux-x64/bin/node /usr/local/bin \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/node-v14.15.3-linux-x64/bin/npm /usr/local/bin\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/node-v14.15.3-linux-x64/bin/yarn /usr/local/bin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"ç¼–è¯‘å‘½ä»¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è¯‘å‘½ä»¤"}},[s._v("#")]),s._v(" ç¼–è¯‘å‘½ä»¤")]),s._v(" "),e("h4",{attrs:{id:"tar-gzåŒ…ç¼–è¯‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tar-gzåŒ…ç¼–è¯‘"}},[s._v("#")]),s._v(" tar.gzåŒ…ç¼–è¯‘")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" package "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x.x.x   \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("ä»¥ä¸Šå‘½ä»¤ä¼šç¼–è¯‘æˆæ‰“åŒ…æˆä¸€ä¸ª"),e("code",[s._v("tar.gz")]),s._v("å®‰è£…åŒ…ï¼Œè¯¥å®‰è£…åŒ…è§£å‹å³å¯ç”¨ã€‚")]),s._v(" "),e("p",[e("code",[s._v("VERSION")]),s._v("æ˜¯æŒ‡å®šçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤å–"),e("code",[s._v("git describe --tags --dirty")]),s._v("çš„ç»“æœä½œä¸ºç‰ˆæœ¬å·ã€‚")]),s._v(" "),e("h4",{attrs:{id:"rpmåŒ…ç¼–è¯‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rpmåŒ…ç¼–è¯‘"}},[s._v("#")]),s._v(" rpmåŒ…ç¼–è¯‘")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x.x.x\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"dockerç¼–è¯‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerç¼–è¯‘"}},[s._v("#")]),s._v(" dockerç¼–è¯‘")]),s._v(" "),e("p",[s._v("é‰´äºç¼–è¯‘ç¯å¢ƒçš„è¯¸å¤šä¾èµ–ï¼Œé…ç½®èµ·æ¥å¯èƒ½æ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤ä¹Ÿæä¾›äº†"),e("code",[s._v("docker")]),s._v("ç¼–è¯‘çš„æ–¹å¼ï¼Œç›´æ¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" docker-build "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x.x.x\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("å¦‚æœæƒ³åˆ©ç”¨"),e("code",[s._v("docker")]),s._v("ç¼–è¯‘"),e("code",[s._v("rpm")]),s._v("ç‰ˆæœ¬ï¼Œå¯ä»¥å…ˆè¿›å…¥"),e("code",[s._v("docker")]),s._v("ç¯å¢ƒï¼Œå†ç¼–è¯‘ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" docker-sh\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x.x.x\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"å‰ç«¯å•ç‹¬ç¼–è¯‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‰ç«¯å•ç‹¬ç¼–è¯‘"}},[s._v("#")]),s._v(" å‰ç«¯å•ç‹¬ç¼–è¯‘")]),s._v(" "),e("p",[s._v("ä¸ºäº†å‡å°‘ç¼–è¯‘ä¸Šçš„éº»çƒ¦ï¼Œ"),e("code",[s._v("ckman")]),s._v("ä»£ç å·²ç»å°†å‰ç«¯ä»£ç ç¼–è¯‘å¥½ï¼Œåšæˆé™æ€é“¾æ¥æ”¾åœ¨"),e("code",[s._v("static/dist")]),s._v("ç›®å½•ä¸‹ï¼Œä½†æ˜¯ä»ç„¶å°†å‰ç«¯ä»£ç ä»¥"),e("code",[s._v("submodule")]),s._v("çš„å½¢å¼åµŒå…¥åœ¨"),e("code",[s._v("frontend")]),s._v("ç›®å½•ä¸‹ï¼Œå¦‚æœæƒ³è¦è‡ªå·±ç¼–è¯‘å‰ç«¯ï¼Œåœ¨æå‰å®‰è£…å¥½å‰ç«¯ç¼–è¯‘ä¾èµ–åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" frontend\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" frontend\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"å·¥å…·éƒ¨ç½²"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å·¥å…·éƒ¨ç½²"}},[s._v("#")]),s._v(" å·¥å…·éƒ¨ç½²")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("prometheus")]),s._v("(éå¿…éœ€)")]),s._v(" "),e("li",[e("code",[s._v("node_exporter")]),s._v("(éå¿…éœ€)")]),s._v(" "),e("li",[e("code",[s._v("nacos")]),s._v("(>"),e("code",[s._v("1.4")]),s._v(")(éå¿…éœ€)")]),s._v(" "),e("li",[e("code",[s._v("zookeeper")]),s._v("(>"),e("code",[s._v("3.6.0")]),s._v(", æ¨è )")]),s._v(" "),e("li",[e("code",[s._v("mysql")]),s._v(" (å½“æŒä¹…åŒ–ç­–ç•¥è®¾ç½®ä¸º"),e("code",[s._v("mysql")]),s._v("æ—¶å¿…éœ€)")])]),s._v(" "),e("h3",{attrs:{id:"æ¶æ„åŸç†å›¾"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ¶æ„åŸç†å›¾"}},[s._v("#")]),s._v(" æ¶æ„åŸç†å›¾")]),s._v(" "),e("p",[e("img",{attrs:{src:t(565),alt:"image-20220520100642910"}})]),s._v(" "),e("h3",{attrs:{id:"ç›‘æ§ç›¸å…³å®‰è£…åŠé…ç½®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘æ§ç›¸å…³å®‰è£…åŠé…ç½®"}},[s._v("#")]),s._v(" ç›‘æ§ç›¸å…³å®‰è£…åŠé…ç½®")]),s._v(" "),e("h4",{attrs:{id:"zookeeperå®‰è£…åŠé…ç½®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zookeeperå®‰è£…åŠé…ç½®"}},[s._v("#")]),s._v(" zookeeperå®‰è£…åŠé…ç½®")]),s._v(" "),e("p",[s._v("æ¨èå®‰è£…3.6.0ä»¥ä¸Šï¼Œ"),e("strong",[s._v("å¿…é¡»ä½¿ç”¨3.5ä»¥ä¸Šçš„ç‰ˆæœ¬")]),s._v("ï¼Œéœ€è¦é€šè¿‡Zookeeper AdminServerçš„ç«¯å£è·å–;")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#wget https://dlcdn.apache.org/zookeeper/zookeeper-3.6.3/apache-zookeeper-3.6.3.tar.gz")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tar zxvf apache-zookeeper-3.6.3.tar.gz && mv apache-zookeeper-3.6.3 zookeeper-3.6.3")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dlcdn.apache.org/zookeeper/zookeeper-3.6.3/apache-zookeeper-3.6.3-bin.tar.gz --no-check-certificate\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf apache-zookeeper-3.6.3-bin.tar.gz "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" apache-zookeeper-3.6.3-bin zookeeper-3.6.3\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" zookeeper-3.6.3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("code",[s._v("zookeeper")]),s._v("é›†ç¾¤æ˜¯"),e("code",[s._v("clickhouse")]),s._v("å®ç°åˆ†å¸ƒå¼é›†ç¾¤çš„é‡è¦ç»„ä»¶ï¼Œéœ€è¦æå‰æ­å»ºå¥½ã€‚ç”±äº"),e("code",[s._v("clickhouse")]),s._v("æ•°æ®é‡æå¤§ï¼Œé¿å…ç»™"),e("code",[s._v("zookeeper")]),s._v("å¸¦æ¥å¤ªå¤§çš„å‹åŠ›ï¼Œæœ€å¥½ç»™"),e("code",[s._v("clickhouse")]),s._v("å•ç‹¬éƒ¨ç½²ä¸€å¥—é›†ç¾¤ï¼Œä¸è¦å’Œå…¶ä»–ä¸šåŠ¡å…¬ç”¨ã€‚")]),s._v(" "),e("p",[s._v("æœ¬æ–‡é»˜è®¤"),e("code",[s._v("zookeeper")]),s._v("é›†ç¾¤å·²ç»æ­å»ºå®Œæˆã€‚æˆ‘ä»¬éœ€è¦åœ¨zkå„èŠ‚ç‚¹çš„"),e("code",[s._v("zoo.cfg")]),s._v("é…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šå¦‚ä¸‹é…ç½®ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("metricsProvider.className"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider\nmetricsProvider.httpPort"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æš´éœ²ç»™promethuesçš„ç›‘æ§ç«¯å£")]),s._v("\nadmin.enableServer"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\nadmin.serverPort"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8086")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æš´éœ²ç»™å››å­—å‘½ä»¤å¦‚mntrç­‰çš„ç›‘æ§ç«¯å£ï¼Œ3.5.0ä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("å®Œæ•´éƒ¨åˆ†ï¼š")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("mkdir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("-p /home/wdp/ckman/zookeeper/data")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("vi")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("conf/zoo.cfg")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of milliseconds of each tick")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("tickTime")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("2000")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of ticks that the initial")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# synchronization phase can take")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("initLimit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("10")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of ticks that can pass between")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sending a request and getting an acknowledgement")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("syncLimit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("5")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the directory where the snapshot is stored.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# do not use /tmp for storage, /tmp here is just")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# example sakes.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("dataDir")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/home/wdp/ckman/zookeeper/data")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the port at which the clients will connect")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("clientPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("2184")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the maximum number of client connections.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# increase this if you need to handle more clients")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#maxClientCnxns=60")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Be sure to read the maintenance section of the")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# administrator guide before turning on autopurge.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of snapshots to retain in dataDir")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autopurge.snapRetainCount=3")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Purge task interval in hours")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Set to "0" to disable auto purge feature')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autopurge.purgeInterval=1")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Metrics Providers")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://prometheus.io Metrics Exporter")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("metricsProvider.className")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("metricsProvider.httpPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("7000")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("metricsProvider.exportJvmInfo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("true")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("admin.enableServer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("true")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("admin.serverPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("8080   #æš´éœ²ç»™å››å­—å‘½ä»¤å¦‚mntrç­‰çš„ç›‘æ§ç«¯å£ï¼Œ3.5.0ä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br")])]),e("p",[s._v("ç„¶åä¾æ¬¡é‡å¯"),e("code",[s._v("zookeeper")]),s._v("å„ä¸ªèŠ‚ç‚¹ã€‚")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" ./bin/zkServer.sh  start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("å¯èƒ½æŠ¥é”™")])]),s._v(" "),e("blockquote",[e("h5",{attrs:{id:"é”™è¯¯-æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»-org-apache-zookeeper-server-quorum-quorumpeermain"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é”™è¯¯-æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»-org-apache-zookeeper-server-quorum-quorumpeermain"}},[s._v("#")]),s._v(" é”™è¯¯: æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±» org.apache.zookeeper.server.quorum.QuorumPeerMain")])]),s._v(" "),e("p",[s._v("åŸå› åˆ†æï¼š")]),s._v(" "),e("p",[s._v("ä¹Ÿå³æ˜¯ä¸‹è½½çš„æ˜¯æœªç¼–è¯‘çš„ jar åŒ…ã€‚\næ³¨ï¼šzookeeper å¥½åƒä» 3.5 ç‰ˆæœ¬ä»¥åï¼Œå‘½åå°±å‘ç”Ÿäº†æ”¹å˜ï¼Œå¦‚æœæ˜¯ apache-zookeeper-3.5.5.tar.gz è¿™èˆ¬å‘½åçš„ï¼Œéƒ½æ˜¯æœªç¼–è¯‘çš„ï¼Œè€Œ apache-zookeeper-3.5.5-bin.tar.gz è¿™èˆ¬å‘½åçš„ï¼Œæ‰æ˜¯å·²ç¼–è¯‘çš„åŒ…ã€‚")]),s._v(" "),e("p",[e("strong",[s._v("è§£å†³æ–¹æ¡ˆï¼š")]),s._v("\né‡æ–°ä¸‹è½½ apache-zookeeper-3.5.5-bin.tar.gz åŒ…ï¼Œç„¶åè§£å‹ä½¿ç”¨ã€‚ ébinè§£å‹å‡ºæ¥æ²¡æœ‰libæ–‡ä»¶åŠ ï¼Œéœ€è¦å°†binåŒ…è§£å‹å‡ºæ¥;")]),s._v(" "),e("p",[e("img",{attrs:{src:t(566),alt:"image-20220520153930797"}})]),s._v(" "),e("blockquote",[e("h5",{attrs:{id:"no-snapshot-found-but-there-are-log-entries-something-is-broken"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#no-snapshot-found-but-there-are-log-entries-something-is-broken"}},[s._v("#")]),s._v(" No snapshot found, but there are log entries. Something is broken!")])]),s._v(" "),e("p",[s._v("åœ¨ä¸‹è½½äº†å·²ç¼–è¯‘çš„ apache-zookeeper-3.5.5-bin.tar.gz åŒ…å¹¶è§£å‹ï¼Œä¸”åœ¨ conf æ–‡ä»¶å¤¹ä¸‹æ‹·è´å¹¶é‡å‘½åäº†ä¸€ä»½ zoo.cfg æ–‡ä»¶åï¼Œåœ¨å¯åŠ¨ bin ç›®å½•ä¸‹çš„ zkServer.cmdï¼ˆWindowsï¼‰ æ–‡ä»¶æ—¶ä¾æ—§é—ªé€€ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ğŸ‘‡")]),s._v(" "),e("p",[e("strong",[s._v("åŸå› åˆ†æï¼š")])]),s._v(" "),e("p",[s._v("è¿™ä¸ªé”™æ˜¯åœ¨å¯åŠ¨zkæ¢å¤æ•°æ®æŠ¥é”™çš„ï¼Œå› ä¸ºå·²ç»å®‰è£…æœ‰ 3.4.14 ç‰ˆæœ¬ï¼Œä¸”ä¸¤ä¸ªç‰ˆæœ¬çš„ dirData åœ°å€éƒ½æ²¡æœ‰ä¿®æ”¹ï¼ˆdataDir=/tmp/zookeeperï¼‰ï¼Œæ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œæ‰€ä»¥æ•°æ®ä¹Ÿæ˜¯ 3.4.14 ç‰ˆæœ¬çš„æ•°æ®ï¼Œç°åœ¨å¯åŠ¨ 3.5.5 æ¢å¤è¿™ä¸ªæ•°æ®å°±æŠ¥é”™äº†")]),s._v(" "),e("p",[e("strong",[s._v("è§£å†³æ–¹æ¡ˆï¼š")])]),s._v(" "),e("p",[s._v("å°† 3.5.5 ç‰ˆæœ¬ conf æ–‡ä»¶å¤¹ä¸‹çš„ zoo.cfg æ–‡ä»¶ä¸­çš„ dataDir åœ°å€ä¿®æ”¹ä¸€ä¸‹å³å¯ã€‚")]),s._v(" "),e("h4",{attrs:{id:"clickhouseç›‘æ§é…ç½®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clickhouseç›‘æ§é…ç½®"}},[s._v("#")]),s._v(" clickhouseç›‘æ§é…ç½®")]),s._v(" "),e("p",[e("code",[s._v("ckman")]),s._v("éƒ¨ç½²çš„"),e("code",[s._v("clickhouse")]),s._v("é›†ç¾¤é»˜è®¤ç›‘å¬äº†"),e("code",[s._v("9363")]),s._v("ç«¯å£ä¸ŠæŠ¥"),e("code",[s._v("metric")]),s._v("ç»™"),e("code",[s._v("prometheus")]),s._v("ï¼Œå› æ­¤æ— éœ€åšä»»ä½•é…ç½®ã€‚")]),s._v(" "),e("p",[s._v("å¦‚æœé›†ç¾¤æ˜¯å¯¼å…¥çš„ï¼Œè¯·ç¡®ä¿"),e("code",[s._v("/etc/clickhouse-server/config.xml")]),s._v("ä¸­æœ‰ä»¥ä¸‹é…ç½®å†…å®¹ï¼š")]),s._v(" "),e("div",{staticClass:"language-xml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- Serve endpoint for Prometheus monitoring. --\x3e")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('\x3c!--\n        endpoint - mertics path (relative to root, statring with "/")\n        port - port to setup server. If not defined or 0 than http_port used\n        metrics - send data from table system.metrics\n        events - send data from table system.events\n        asynchronous_metrics - send data from table system.asynchronous_metrics\n        status_info - send data from different component from CH, ex: Dictionaries status\n    --\x3e')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("prometheus")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("endpoint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/metrics"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("endpoint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("9363"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("events")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("events")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("asynchronous_metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("asynchronous_metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("status_info")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("status_info")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("prometheus")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h4",{attrs:{id:"promethusç›‘æ§å·¥å…·å®‰è£…é…ç½®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#promethusç›‘æ§å·¥å…·å®‰è£…é…ç½®"}},[s._v("#")]),s._v(" promethusç›‘æ§å·¥å…·å®‰è£…é…ç½®")]),s._v(" "),e("p",[s._v("ä¸‹è½½ç¨‹åºï¼š"),e("code",[s._v("https://prometheus.io/download/")]),s._v("ä¸Šä¼ å®‰è£…åŒ…ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("prometheus-2.35.0.linux-amd64.tar.gz")]),s._v(" "),e("li",[s._v("node_exporter-1.2.2.linux-amd64.tar.gz")])]),s._v(" "),e("h5",{attrs:{id:"åœ¨ç®¡ç†èŠ‚ç‚¹å®‰è£…ç›‘æ§çš„prometheus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨ç®¡ç†èŠ‚ç‚¹å®‰è£…ç›‘æ§çš„prometheus"}},[s._v("#")]),s._v(" åœ¨ç®¡ç†èŠ‚ç‚¹å®‰è£…ç›‘æ§çš„prometheus")]),s._v(" "),e("p",[s._v("1.åˆ›å»ºç”¨æˆ·ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬è®¡ç®—èŠ‚ç‚¹)")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" prometheus\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -g prometheus -m -d /var/lib/prometheus -s /sbin/nologin prometheus\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("2.è§£å‹å®‰è£…åŒ…ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf prometheus-2.35.0.linux-amd64.tar.gz -C /usr/local/\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/ "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" prometheus-2.35.0.linux-amd64/ prometheus\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("3.åˆ›å»ºserviceå¯åŠ¨è„šæœ¬ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/lib/systemd/system/prometheus.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[s._v("[Unit]\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("prometheus")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("After")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("network.target")]),s._v("\n\n[Service]\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("simple")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("User")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("prometheus")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ExecStart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/usr/local/prometheus/prometheus --config.file=/usr/local/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus --storage.tsdb.retention=15d --log.level=info")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("on-failure")]),s._v("\n\n[Install]\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("WantedBy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("multi-user.target")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h5",{attrs:{id:"åœ¨è®¡ç®—èŠ‚ç‚¹å®‰è£…node-exporter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨è®¡ç®—èŠ‚ç‚¹å®‰è£…node-exporter"}},[s._v("#")]),s._v(" åœ¨è®¡ç®—èŠ‚ç‚¹å®‰è£…node_exporter")]),s._v(" "),e("blockquote",[e("p",[e("code",[s._v("node_exporter")]),s._v("æ˜¯ç”¨æ¥ç›‘æ§"),e("code",[s._v("clickhouse")]),s._v("èŠ‚ç‚¹æ‰€åœ¨æœºå™¨çš„ä¸€äº›ç³»ç»ŸæŒ‡æ ‡çš„ä¸€æ¬¾å·¥å…·ï¼Œå› æ­¤éœ€è¦å®‰è£…åœ¨"),e("code",[s._v("ck")]),s._v("èŠ‚ç‚¹æ‰€åœ¨çš„æœºå™¨ï¼Œé»˜è®¤ç›‘å¬"),e("code",[s._v("9100")]),s._v("ç«¯å£ã€‚")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf node_exporter-1.3.1.linux-amd64.tar.gz -C /usr/local/\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/ "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" node_exporter-1.3.1.linux-amd64/ node_exporter\n \n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R prometheus.prometheus node_exporter/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("åˆ›å»ºå¯åŠ¨è„šæœ¬")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("vi /usr/lib/systemd/system/node_exporter.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[s._v("[Unit]\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("node_export")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Documentation")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("https://github.com/prometheus/node_exporter")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("After")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("network.target")]),s._v("\n\n[Service]\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("simple ")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("User")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("prometheus")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("ExecStart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/usr/local/node_exporter/node_exporter")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("Restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("on-failure")]),s._v("\n\n[Install]\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("WantedBy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("multi-user.target  ")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("å¯åŠ¨node_exporter")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" node_exporter.service\nsystemctl start node_exporter.service\nsystemctl status node_exporter.service\nss -tnl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9100")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h5",{attrs:{id:"é…ç½®prometheusæ·»åŠ ç›‘æ§ç›®æ ‡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®prometheusæ·»åŠ ç›‘æ§ç›®æ ‡"}},[s._v("#")]),s._v(" "),e("strong",[s._v("é…ç½®Prometheusæ·»åŠ ç›‘æ§ç›®æ ‡")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/local/prometheus/prometheus.yml\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /usr/local/prometheus/prometheus.yml")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("é…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# my global config")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("global")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("scrape_interval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 15s "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Set the scrape interval to every 15 seconds. Default is every 1 minute.")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("evaluation_interval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 15s "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Evaluate rules every 15 seconds. The default is every 1 minute.")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scrape_timeout is set to the global default (10s).")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Alertmanager configuration")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("alerting")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("alertmanagers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("static_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targets")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - alertmanager:9093")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rule_files")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# - "first_rules.yml"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# - "second_rules.yml"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A scrape configuration containing exactly one endpoint to scrape:")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Here it's Prometheus itself.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("scrape_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("job_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prometheus"')]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# metrics_path defaults to '/metrics'")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scheme defaults to 'http'.")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("static_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targets")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost:9090"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br")])]),e("p",[s._v("å‚è€ƒ")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scrape_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v(" # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(" -")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("job_name: 'prometheus'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("  # metrics_path defaults to '/metrics'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("  # scheme defaults to 'http'.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  static_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  -")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("targets: ['localhost:9090','localhost:9100'] # å¯¹æœ¬æœºnode_exporter ç›‘æ§")]),s._v("\n \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ–°æ·»åŠ çš„å¯¹å…¶å®ƒnodeèŠ‚ç‚¹æŠ“å–æ•°æ®")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v(" -")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("job_name: '111.4'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("  #é‡å†™äº†å…¨å±€æŠ“å–é—´éš”æ—¶é—´ï¼Œç”±15ç§’é‡å†™æˆ5ç§’ã€‚")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  scrape_interval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("5s")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  static_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  -")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("targets: ['host120:9100','host121:9100']")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("é›†ç¾¤å…¶ä»–å‚è€ƒé…ç½®ï¼š")]),s._v(" "),e("div",{staticClass:"language-properties line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-properties"}},[e("code",[e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("job_name: 'node_exporter'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  scrape_interval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("10s")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  static_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  -")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("targets: ['192.168.0.1:9100', '192.168.0.2:9100', '192.168.0.3:9100', '192.168.0.4:9100']")]),s._v("\n \n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("job_name: 'clickhouse'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  scrape_interval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("10s")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  static_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  -")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("targets: ['192.168.0.1:9363', '192.168.0.2:9363', '192.168.0.3:9363', '192.168.0.4:9363']")]),s._v("\n \n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("job_name: 'zookeeper'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  scrape_interval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("10s")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  static_configs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("  -")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("targets: ['192.168.0.1:7070', '192.168.0.2:7070', '192.168.0.3:7070']")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h5",{attrs:{id:"å¯åŠ¨prometheusæœåŠ¡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¯åŠ¨prometheusæœåŠ¡"}},[s._v("#")]),s._v(" "),e("strong",[s._v("å¯åŠ¨PrometheusæœåŠ¡")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R prometheus.prometheus prometheus\n\nsystemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" prometheus.service\nsystemctl start prometheus.service\nsystemctl status prometheus.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("strong",[s._v("è®¿é—®é¡µé¢ï¼š")])]),s._v(" "),e("p",[s._v("è®¿é—® Prometheus WEB æŸ¥çœ‹æˆ‘ä»¬å®šä¹‰çš„ç›®æ ‡ä¸»æœºï¼šhttp://host117:9090/targets æˆ–è€…http://host117:9090/classic/targets")]),s._v(" "),e("p",[e("img",{attrs:{src:t(567),alt:"image-20220520134701111"}})]),s._v(" "),e("h3",{attrs:{id:"å®‰è£…ckman"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…ckman"}},[s._v("#")]),s._v(" å®‰è£…ckman")]),s._v(" "),e("h4",{attrs:{id:"tar-gzå®‰è£…å¯åŠ¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tar-gzå®‰è£…å¯åŠ¨"}},[s._v("#")]),s._v(" tar.gzå®‰è£…å¯åŠ¨")]),s._v(" "),e("p",[s._v("å®‰è£…")]),s._v(" "),e("p",[s._v("å¯ä»¥åœ¨ä»»æ„ç›®å½•è¿›è¡Œå®‰è£…ã€‚å®‰è£…æ–¹å¼ä¸ºç›´æ¥è§£å‹å®‰è£…åŒ…å³å¯ã€‚")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzvf ckman-1.3.1-210428.Linux.x86_64.tar.gz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("å¯åŠ¨")]),s._v(" "),e("p",[s._v("è¿›å…¥"),e("code",[s._v("ckman")]),s._v("çš„å·¥ä½œç›®å½•ï¼Œæ‰§è¡Œï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ckman\nbin/start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"rpmå®‰è£…å¯åŠ¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rpmå®‰è£…å¯åŠ¨"}},[s._v("#")]),s._v(" rpmå®‰è£…å¯åŠ¨")]),s._v(" "),e("p",[s._v("ä¸‹è½½å®‰è£…åŒ…ï¼Œå¹¶ä¸”è§£å‹ï¼›æœ€æ–°å®‰è£…åŒ…åœ°å€ï¼šhttps://github.com/housepower/ckman/releases")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®‰è£…å¯åŠ¨æ–¹å¼ä¸€")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/housepower/ckman/releases/download/v2.2.5/ckman-2.2.5.x86_64.rpm\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh ckman-2.2.5.x86_64.rpm\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®‰è£…å®Œæˆåï¼Œåœ¨/etc/ckmanç›®å½•ä¸‹ï¼Œä¼šç”Ÿæˆå·¥ä½œç›®å½•ï¼ˆæ—¥å¿—å’Œé…ç½®æ–‡ä»¶ç­‰éƒ½åœ¨è¯¥ç›®å½•ä¸‹ï¼‰ã€‚")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#rpmæ–¹å¼å®‰è£…çš„ckmanæœ‰ä¸¤ç§å¯åŠ¨æ–¹å¼ï¼š")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ–¹å¼ä¸€ï¼š")]),s._v("\n  /usr/local/bin/ckman -c"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/ckman/conf/ckman.yaml -p"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/run/ckman/ckman.pid -l"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log/ckman/ckman.log -d\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ–¹å¼äºŒï¼š[æ¨è]")]),s._v("\nsystemctl start ckman\nsystemctl status ckman\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®‰è£…å¯åŠ¨æ–¹å¼äºŒ ã€æ¨èã€‘")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/housepower/ckman/releases/download/v2.2.5/ckman-v2.2.5-220602.Linux.amd64.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzvf ckman-v2.2.5-220602.Linux.amd64.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ckman "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" bin/start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("å¯åŠ¨ä¹‹åï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ "),e("a",{attrs:{href:"http://localhost:8808/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8808"),e("OutboundLink")],1),s._v(" è·³å‡ºå¦‚ä¸‹ç•Œé¢ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(568),alt:"img"}})]),s._v(" "),e("p",[s._v("ckmané»˜è®¤çš„ç™»å½•ç”¨æˆ·ä¸ºckmanï¼Œå¯†ç ä¸ºCkmanx x xã€‚")]),s._v(" "),e("h4",{attrs:{id:"dockerå®‰è£…å¯åŠ¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerå®‰è£…å¯åŠ¨"}},[s._v("#")]),s._v(" dockerå®‰è£…å¯åŠ¨")]),s._v(" "),e("p",[s._v("ä»"),e("code",[s._v("v1.2.7")]),s._v("ç‰ˆæœ¬å¼€å§‹ï¼Œ"),e("code",[s._v("ckman")]),s._v("æ”¯æŒä»"),e("code",[s._v("docker")]),s._v("é•œåƒå¯åŠ¨ã€‚å¯åŠ¨å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("docker run -itd -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8808")]),s._v(":8808 --restart unless-stopped --name ckman quay.io/housepower/ckman:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­å»º"),e("code",[s._v("promethues")]),s._v("å’Œ"),e("code",[s._v("nacos")]),s._v("å¹¶ä¸å±äº"),e("code",[s._v("ckman")]),s._v("ç¨‹åºè‡ªèº«çš„èŒƒç•´ï¼Œå› æ­¤ï¼Œä»å®¹å™¨å¯åŠ¨"),e("code",[s._v("ckman")]),s._v("é»˜è®¤æ˜¯å…³é—­"),e("code",[s._v("nacos")]),s._v("çš„ï¼Œä¸”å‰å°"),e("code",[s._v("Overview")]),s._v("ç›‘æ§ä¸ä¼šæ­£å¸¸æ˜¾ç¤ºã€‚")]),s._v(" "),e("p",[s._v("å¦‚æœæƒ³è‡ªå·±é…ç½®"),e("code",[s._v("nacos")]),s._v("å’Œ"),e("code",[s._v("prometheus")]),s._v("ï¼Œå¯ä»¥è¿›å…¥å®¹å™¨è‡ªè¡Œé…ç½®ã€‚")]),s._v(" "),e("h3",{attrs:{id:"å‡çº§ckman"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‡çº§ckman"}},[s._v("#")]),s._v(" å‡çº§ckman")]),s._v(" "),e("p",[e("code",[s._v("ckman")]),s._v("æ”¯æŒ"),e("code",[s._v("rpm")]),s._v("å®‰è£…å’Œ"),e("code",[s._v("tar.gz")]),s._v("å®‰è£…ï¼Œæ‰€ä»¥å‡çº§ä¹Ÿé’ˆå¯¹è¿™ä¸¤ç§å®‰è£…æ–¹å¼åšäº†åŒºåˆ†ã€‚")]),s._v(" "),e("h4",{attrs:{id:"rpmå‡çº§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rpmå‡çº§"}},[s._v("#")]),s._v(" rpmå‡çº§")]),s._v(" "),e("p",[s._v("ä»"),e("code",[s._v("github")]),s._v("ä¸Šä¸‹è½½æœ€æ–°ç‰ˆçš„"),e("code",[s._v("ckman")]),e("a",{attrs:{href:"https://github.com/housepower/ckman/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("å®‰è£…åŒ…"),e("OutboundLink")],1),s._v("ã€‚ åœæ­¢"),e("code",[s._v("ckman")]),s._v("æœåŠ¡ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl stop ckman\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#yum remove -y ckman")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å‡ ä¸ªå¸¸ç”¨çš„ç›®å½•")]),s._v("\n/etc/ckman\n/etc/clickhouse-server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("å‡çº§"),e("code",[s._v("rpm")]),s._v("åŒ…ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v("  -Uvh ckman-x.x.x-x86_64.rpm\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æ³¨æ„"),e("code",[s._v("rpm")]),s._v("å‡çº§é…ç½®æ–‡ä»¶ä»ç„¶ä¼šä½¿ç”¨æ—§ç‰ˆæœ¬çš„ï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶ä¼šé‡å‘½åä¸º"),e("code",[s._v("ckman.yaml.rpmnew")]),s._v("ï¼ˆ"),e("code",[s._v("password")]),s._v("æ–‡ä»¶åŒç†ï¼‰ã€‚")]),s._v(" "),e("p",[s._v("é‡æ–°å¯åŠ¨"),e("code",[s._v("ckman")]),s._v("ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl daemon-reload\nsystemctl start ckman\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h4",{attrs:{id:"tar-gzå‡çº§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tar-gzå‡çº§"}},[s._v("#")]),s._v(" tar.gzå‡çº§")]),s._v(" "),e("p",[s._v("ä»"),e("code",[s._v("github")]),s._v("ä¸Šä¸‹è½½æœ€æ–°ç‰ˆçš„"),e("code",[s._v("ckman")]),e("a",{attrs:{href:"https://github.com/housepower/ckman/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("å®‰è£…åŒ…"),e("OutboundLink")],1),s._v("ã€‚ è¿›å…¥åˆ°å½“å‰ç‰ˆæœ¬"),e("code",[s._v("ckman")]),s._v("çš„å·¥ä½œç›®å½•ï¼Œåœæ­¢"),e("code",[s._v("ckman")]),s._v("æœåŠ¡ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/housepower/ckman/releases/download/v2.2.5/ckman-v2.2.5-220602.Linux.amd64.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzvf ckman-v2.2.5-220602.Linux.amd64.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cd ckman && bin/start")]),s._v("\n\nbin/stop\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("å¤‡ä»½é…ç½®æ–‡ä»¶ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" conf/ckman.yaml conf/ckman.yaml.last\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" conf/password conf/password.last\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("è§£å‹æœ€æ–°ä¸‹è½½çš„å®‰è£…åŒ…è¦†ç›–æ‰æ—§ç‰ˆæœ¬çš„å®‰è£…ç›®å½•ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzvf ckman-x.x.x-YYDDMM.Linux.x86_64.tar.gz -C "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${WORKDIR}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æ›¿æ¢é…ç½®æ–‡ä»¶ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" conf/ckman.yaml.last conf/ckman.yaml\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" conf/password.last conf/password\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("é‡æ–°å¯åŠ¨"),e("code",[s._v("ckman")]),s._v("æœåŠ¡ï¼š")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("bin/start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äº"),e("code",[s._v("tar.gz")]),s._v("å®‰è£…æ–¹å¼å¯ä»¥è‡ªè¡ŒæŒ‡å®šå·¥ä½œç›®å½•ï¼Œå¦‚æœæ–°ç‰ˆæœ¬å®‰è£…ä½ç½®ä¸æ—§ç‰ˆæœ¬ä¸åŒï¼Œéœ€è¦å°†"),e("code",[s._v("conf")]),s._v("ç›®å½•ä¸‹çš„"),e("code",[s._v("clusters.json")]),s._v("æ‹·è´åˆ°æ–°ç‰ˆæœ¬çš„å·¥ä½œç›®å½•ä¸‹ï¼Œå¦åˆ™æ— æ³•åŠ è½½é›†ç¾¤ä¿¡æ¯ã€‚")]),s._v(" "),e("h3",{attrs:{id:"å¸è½½é‡è£…"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¸è½½é‡è£…"}},[s._v("#")]),s._v(" å¸è½½é‡è£…")]),s._v(" "),e("p",[s._v("å¸è½½ä¹‹å‰ç”¨yamlå®‰è£…çš„ï¼Œæ”¹ç”¨æºç ç›®å‰æœ€æ–°ç‰ˆæœ¬å®‰è£…æ–¹å¼ï¼›")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("yum remove -y ckman\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#wget https://github.com/housepower/ckman/releases/download/v2.2.5/ckman-v2.2.5-220602.Linux.amd64.tar.gz")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzvf ckman-v2.2.5-220602.Linux.amd64.tar.gz\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" conf/ckman.yaml.last conf/ckman.yaml\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" conf/password.last conf/password\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ckman "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" bin/start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h2",{attrs:{id:"åŠŸèƒ½ä»‹ç»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åŠŸèƒ½ä»‹ç»"}},[s._v("#")]),s._v(" åŠŸèƒ½ä»‹ç»")]),s._v(" "),e("h3",{attrs:{id:"ç®¡ç†åˆ›å»ºé›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç®¡ç†åˆ›å»ºé›†ç¾¤"}},[s._v("#")]),s._v(" ç®¡ç†åˆ›å»ºé›†ç¾¤")]),s._v(" "),e("p",[s._v("æ ¹æ®ç•Œé¢æç¤ºå¾ˆå®¹æ˜“åˆ›å»ºé›†ç¾¤ï¼Œå¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("1ï¼‰ä¸Šä¼ clickhouseå®‰è£…rpmåŒ…")]),s._v(" "),e("li",[s._v("2ï¼‰é…ç½®ç›‘æ§åœ°å€å’Œzookeeperåœ°å€")]),s._v(" "),e("li",[s._v("3ï¼‰è®¾ç½®clickhouseå®ä¾‹æ•°æ®ç›®å½•")]),s._v(" "),e("li",[s._v("4ï¼‰é…ç½®clickhouseå®ä¾‹ä¸»æœº")]),s._v(" "),e("li",[s._v("5ï¼‰åˆ›å»ºç”¨æˆ·")]),s._v(" "),e("li",[s._v("6ï¼‰åˆ›å»ºé›†ç¾¤")])]),s._v(" "),e("p",[e("strong",[e("code",[s._v("ckman")]),s._v("éƒ¨ç½²çš„"),e("code",[s._v("clickhouse")]),s._v("é›†ç¾¤é»˜è®¤ç›‘å¬äº†"),e("code",[s._v("9363")]),s._v("ç«¯å£ä¸ŠæŠ¥"),e("code",[s._v("metric")]),s._v("ç»™"),e("code",[s._v("prometheus")]),s._v("ï¼Œå› æ­¤æ— éœ€åšä»»ä½•é…ç½®ã€‚")])]),s._v(" "),e("p",[s._v("å¦‚æœé›†ç¾¤æ˜¯å¯¼å…¥çš„ï¼Œè¯·ç¡®ä¿"),e("code",[s._v("/etc/clickhouse-server/config.xml")]),s._v("ä¸­æœ‰ä»¥ä¸‹é…ç½®å†…å®¹ï¼š")]),s._v(" "),e("div",{staticClass:"language-xml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- Serve endpoint for Prometheus monitoring. --\x3e")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('\x3c!--\n        endpoint - mertics path (relative to root, statring with "/")\n        port - port to setup server. If not defined or 0 than http_port used\n        metrics - send data from table system.metrics\n        events - send data from table system.events\n        asynchronous_metrics - send data from table system.asynchronous_metrics\n        status_info - send data from different component from CH, ex: Dictionaries status\n    --\x3e')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("prometheus")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("endpoint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/metrics"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("endpoint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("9363"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("events")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("events")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("asynchronous_metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("asynchronous_metrics")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("status_info")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("true"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("status_info")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("prometheus")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h4",{attrs:{id:"å®‰è£…åŒ…ç®¡ç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…åŒ…ç®¡ç†"}},[s._v("#")]),s._v(" å®‰è£…åŒ…ç®¡ç†")]),s._v(" "),e("p",[s._v("åœ¨ä¸»é¡µä¸Šç‚¹å‡»è®¾ç½®æŒ‰é’®ï¼Œè¿›å…¥å¦‚ä¸‹çš„é¡µé¢ï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(569),alt:"img"}})]),s._v(" "),e("p",[s._v("ç‚¹å‡»Upload RPMsï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(570),alt:"img"}})]),s._v(" "),e("p",[s._v("æ³¨æ„å®‰è£…åŒ…ä¸Šä¼ æ—¶éœ€è¦ä¸‰ä¸ªå®‰è£…åŒ…éƒ½ä¸Šä¼ ï¼ˆ"),e("strong",[s._v("serverã€clientã€common")]),s._v("ï¼‰ï¼Œä¸Šä¼ æˆåŠŸåï¼Œåœ¨å®‰è£…åŒ…åˆ—è¡¨ä¸‹ä¼šæ˜¾ç¤ºæ–°ä¸Šä¼ çš„è®°å½•ï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(571),alt:"img"}})]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("21.8.3.44")]),s._v(" "),e("th",[s._v("clickhouse-client-21.8.3.44-2.noarch.rpm,clickhouse-common-static-21.8.3.44-2.x86_64.rpm,clickhouse-server-21.8.3.44-2.noarch.rpm")]),s._v(" "),e("th"),s._v(" "),e("th"),s._v(" "),e("th"),s._v(" "),e("th")])]),s._v(" "),e("tbody")]),s._v(" "),e("h4",{attrs:{id:"åˆ›å»ºé›†ç¾¤ã€è¦ç‚¹ã€‘"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºé›†ç¾¤ã€è¦ç‚¹ã€‘"}},[s._v("#")]),s._v(" "),e("strong",[s._v("åˆ›å»ºé›†ç¾¤")]),s._v("ã€è¦ç‚¹ã€‘")]),s._v(" "),e("p",[s._v("ç‚¹å‡»ä¸»é¡µçš„ Create a ClickHouse Clusterï¼Œå°±ä¼šè¿›å…¥åˆ›å»ºé›†ç¾¤çš„ç•Œé¢ï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(572),alt:"img"}})]),s._v(" "),e("p",[e("img",{attrs:{src:t(573),alt:"image-20220607105315782"}})]),s._v(" "),e("p",[s._v("éœ€è¦å¡«å†™çš„é¡¹ä¸»è¦æœ‰ä»¥ä¸‹ï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("ClickHouse Version: ckçš„ç‰ˆæœ¬ï¼Œä¸éœ€è¦è‡ªå·±å¡«å†™ï¼Œé€šè¿‡ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©ï¼Œä¸‹æ‹‰åˆ—è¡¨ä¸­ä¼šåˆ—å‡ºckmanæœåŠ¡å™¨ä¸­æ‰€æœ‰çš„å®‰è£…åŒ…ç‰ˆæœ¬ã€‚")]),s._v(" "),e("p",[s._v("æ­¤å¤„ç‰ˆæœ¬ä¿¡æ¯åªä¼šåˆ—å‡ºå½“å‰"),e("code",[s._v("ckman")]),s._v("æœåŠ¡ä¸‹çš„å®‰è£…åŒ…ç‰ˆæœ¬ï¼Œå¦‚æœé…ç½®äº†å¤šä¸­å¿ƒï¼Œå…¶ä»–"),e("code",[s._v("ckman")]),s._v("çš„å®‰è£…åŒ…æ˜¯æ— æ³•çœ‹è§çš„")])]),s._v(" "),e("li",[e("p",[s._v("Cluster Nameï¼š é›†ç¾¤çš„åå­—ï¼Œæ³¨æ„ä¸è¦å’Œå·²æœ‰çš„åå­—é‡åˆ")])]),s._v(" "),e("li",[e("p",[s._v("ClickHouse TCP Port: clickhouseçš„TCPç«¯å£ï¼Œé»˜è®¤æ˜¯9000ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®š;")])]),s._v(" "),e("li",[e("p",[s._v("ClickHouse Node List: clickhouseèŠ‚ç‚¹åˆ—è¡¨ï¼Œä»¥é€—å·åˆ†éš”")])]),s._v(" "),e("li",[e("p",[s._v("Replicaï¼š æ˜¯å¦å¼€å¯å‰¯æœ¬ï¼Œé»˜è®¤æ˜¯å…³é—­")]),s._v(" "),e("p",[s._v("å¦‚æœå¼€å¯äº†å‰¯æœ¬ï¼Œé»˜è®¤æ˜¯1ä¸ª"),e("code",[s._v("shard")]),s._v("ä¸€ä¸ªå‰¯æœ¬ï¼Œæ‰€ä»¥èŠ‚ç‚¹æ•°é‡ä¸€å®šè¦æ˜¯å¶æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™")]),s._v(" "),e("p",[s._v("å¦‚æœè¦å¢åŠ èŠ‚ç‚¹çš„å‰¯æœ¬æ•°ï¼Œå¯é€šè¿‡å¢åŠ èŠ‚ç‚¹å®Œæˆï¼Œåˆ›å»ºé›†ç¾¤æ—¶æœ€å¤šåªèƒ½æŒ‡å®šä¸€ä¸ªå‰¯æœ¬")]),s._v(" "),e("p",[s._v("å¦‚æœæ²¡æœ‰å¼€å¯å‰¯æœ¬ï¼Œåˆ™æœ‰å‡ ä¸ªèŠ‚ç‚¹å°±æœ‰å‡ ä¸ª"),e("code",[s._v("shard")])])]),s._v(" "),e("li",[e("p",[s._v("Zookeeper Node List: zkåˆ—è¡¨")])]),s._v(" "),e("li",[e("p",[s._v("ZooKeeper Port: zkç«¯å£ï¼Œé»˜è®¤æ˜¯2181")])]),s._v(" "),e("li",[e("p",[s._v("Data path: ckèŠ‚ç‚¹æ•°æ®å­˜æ”¾çš„è·¯å¾„ï¼› è¦ç‚¹è·¯å¾„ç›®å½•ï¼›æ¯”å¦‚ï¼š"),e("code",[s._v("/ckdata1/")])])]),s._v(" "),e("li",[e("p",[s._v("Cluster Username: ckçš„ç”¨æˆ·å")])]),s._v(" "),e("li",[e("p",[s._v("Cluster Password: ckçš„å¯†ç ")])]),s._v(" "),e("li",[e("p",[s._v("SSH Username: sshç™»å½•ckèŠ‚ç‚¹çš„ç”¨æˆ·å")]),s._v(" "),e("p",[s._v("è¯¥ç”¨æˆ·å¿…é¡»å…·æœ‰"),e("code",[s._v("root")]),s._v("æƒé™æˆ–æ˜¯"),e("code",[s._v("root")]),s._v("æœ¬èº«ï¼Œå¦åˆ™éƒ¨ç½²æ— æ³•æˆåŠŸï¼Œä¸€èˆ¬éƒ½æ˜¯"),e("code",[s._v("root")]),s._v("ã€‚")])]),s._v(" "),e("li",[e("p",[s._v("SSH Password: sshç™»å½•ckèŠ‚ç‚¹çš„å¯†ç ")])])]),s._v(" "),e("p",[s._v("é€šè¿‡æ­¤ç§æ–¹å¼å®‰è£…éƒ¨ç½²æˆåŠŸçš„é›†ç¾¤çš„modeå°±æ˜¯deployï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œåˆ ã€æ”¹ã€rebanlanceã€å¯åœã€å‡çº§ä»¥åŠèŠ‚ç‚¹çš„å¢åˆ ç­‰æ“ä½œï¼›ã€"),e("strong",[s._v("ä¸€å®šè¦æ£€æŸ¥å„ä¸ªç«¯å£æ˜¯å¦æ­£ç¡®ï¼›")]),s._v("ã€‘ç›®å‰åœ¨host116ä¸Šé¢ï¼Œè®¾ç½®çš„éƒ½æ˜¯6ç›¸å…³ç«¯å£ï¼›")]),s._v(" "),e("p",[e("em",[e("strong",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½“å‰ç‰ˆæœ¬çš„ckmanä»…æ”¯æŒåœ¨centos7ä»¥ä¸Šçš„ç³»ç»Ÿéƒ¨ç½²ckã€‚")])])]),s._v(" "),e("p",[s._v("æ£€æŸ¥ç«¯å£åŠè¿›ç¨‹å‘½ä»¤ï¼š")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" -i tcp:9006\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" -i tcp:2186\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#zookeeper")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" -i tcp:8086\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" zookeeper\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("img",{attrs:{src:t(574),alt:"image-20220520173259317"}})]),s._v(" "),e("p",[s._v("ç›®å‰çš„ç¯å¢ƒæœ‰ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("http://host116:9090/targets")]),s._v(" "),e("li",[s._v("http://host116:8808/")])]),s._v(" "),e("h4",{attrs:{id:"å¯¼å…¥é›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¯¼å…¥é›†ç¾¤"}},[s._v("#")]),s._v(" å¯¼å…¥é›†ç¾¤")]),s._v(" "),e("p",[s._v("ç‚¹å‡»ä¸»é¡µçš„ "),e("code",[s._v("Import a ClickHouse Cluster")]),s._v("æŒ‰é’®ï¼Œä¼šè¿›å»å¯¼å…¥é›†ç¾¤ç•Œé¢ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(575),alt:"image-20210726101544141"}})]),s._v(" "),e("p",[s._v("éœ€è¦å¡«å†™çš„ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[e("code",[s._v("Cluster Name")]),s._v(": èŠ‚ç‚¹åç§°ï¼Œè¯¥åç§°å¿…é¡»æ˜¯ç¡®å®å­˜åœ¨çš„é›†ç¾¤åï¼Œä¸”ä¸èƒ½ä¸"),e("code",[s._v("ckman")]),s._v("ä¸­å·²æœ‰çš„é›†ç¾¤åå­—é‡å¤ã€‚")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("ClickHouse Node IP")]),s._v(": "),e("code",[s._v("clickhouse")]),s._v("èŠ‚ç‚¹"),e("code",[s._v("ip")]),s._v("åˆ—è¡¨ï¼Œä»¥é€—å·åˆ†éš”")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("ClickHouse TCP Port")]),s._v(": "),e("code",[s._v("ck")]),s._v("èŠ‚ç‚¹"),e("code",[s._v("TCP")]),s._v("ç«¯å£ï¼Œé»˜è®¤ä¸º"),e("code",[s._v("9000")])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Zookeeper Node List")]),s._v(": "),e("code",[s._v("zk")]),s._v("èŠ‚ç‚¹åˆ—è¡¨")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("ZooKeeper Port")]),s._v(": "),e("code",[s._v("zk")]),s._v("ç«¯å£ï¼Œé»˜è®¤ä¸º"),e("code",[s._v("2181")])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("ZK Status Port")]),s._v(": "),e("code",[s._v("zookeeper")]),s._v("æŒ‡æ ‡ç›‘æ§çš„ç«¯å£ï¼Œé»˜è®¤"),e("code",[s._v("8080")])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Cluster Username")]),s._v(": "),e("code",[s._v("ck")]),s._v("çš„ç”¨æˆ·å")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Cluster Password")]),s._v(": "),e("code",[s._v("ck")]),s._v("çš„å¯†ç ï¼Œéå¿…è¾“")])])]),s._v(" "),e("p",[s._v("å¯¼å…¥é›†ç¾¤æœ‰ä¸ªå‰ææ˜¯è¯¥é›†ç¾¤å¿…é¡»ç¡®å®å­˜åœ¨ï¼Œå¦åˆ™å¯¼å…¥ä¼šå‡ºç°é—®é¢˜ã€‚")]),s._v(" "),e("p",[s._v("å¯¼å…¥çš„é›†ç¾¤çš„"),e("code",[s._v("mode")]),s._v("ä¸º"),e("code",[s._v("import")]),s._v("ï¼Œè¿™ç§æ¨¡å¼çš„é›†ç¾¤ä¸èƒ½è¿›è¡Œä¿®æ”¹ã€"),e("code",[s._v("rebalance")]),s._v("ã€å¯åœã€å‡çº§ä»¥åŠèŠ‚ç‚¹çš„å¢åˆ ç­‰æ“ä½œï¼Œä½†æ˜¯å¯ä»¥åˆ é™¤å’ŒæŸ¥çœ‹ã€‚")]),s._v(" "),e("h4",{attrs:{id:"å‡çº§é›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‡çº§é›†ç¾¤"}},[s._v("#")]),s._v(" å‡çº§é›†ç¾¤")]),s._v(" "),e("p",[s._v("å¦‚æœä¸Šä¼ äº†æ–°ç‰ˆæœ¬çš„å®‰è£…åŒ…ï¼Œå¯ä»¥ä»"),e("code",[s._v("Upgrade Cluster")]),s._v("ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©æ–°ç‰ˆæœ¬ï¼Œç‚¹å‡»"),e("code",[s._v("Upgrade")]),s._v("å³å¯è¿›è¡Œå‡çº§ã€‚")]),s._v(" "),e("p",[s._v("ç›®å‰æ”¯æŒå…¨é‡å‡çº§å’Œæ»šåŠ¨å‡çº§ä¸¤ç§ç­–ç•¥ã€‚å¹¶è®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦æ£€æŸ¥ç›¸åŒç‰ˆæœ¬ã€‚")]),s._v(" "),e("p",[s._v("å‡çº§ç•Œé¢å¦‚ä¸‹ï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(576),alt:"image-20210726135133819"}})]),s._v(" "),e("h4",{attrs:{id:"é”€æ¯é›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é”€æ¯é›†ç¾¤"}},[s._v("#")]),s._v(" é”€æ¯é›†ç¾¤")]),s._v(" "),e("p",[s._v("é›†ç¾¤é”€æ¯åï¼Œè¯¥é›†ç¾¤åœ¨ç‰©ç†ä¸Šéƒ½ä¸å­˜åœ¨äº†ã€‚å› ä¸ºé”€æ¯é›†ç¾¤åŠ¨ä½œä¸æ­¢ä¼šåœæ­¢æ‰å½“å‰é›†ç¾¤ï¼Œè¿˜ä¼šå°†èŠ‚ç‚¹ä¸Šçš„"),e("code",[s._v("ClickHouse")]),s._v("å¸è½½ï¼Œç›¸å…³ç›®å½•æ¸…ç©ºï¼Œæ‰€ä»¥è¯¥åŠ¨ä½œåº”è¯¥æ…é‡æ“ä½œã€‚")]),s._v(" "),e("h4",{attrs:{id:"å¢åŠ èŠ‚ç‚¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¢åŠ èŠ‚ç‚¹"}},[s._v("#")]),s._v(" å¢åŠ èŠ‚ç‚¹")]),s._v(" "),e("p",[s._v("ç‚¹å‡»"),e("code",[s._v("Manage")]),s._v("é¡µé¢çš„"),e("code",[s._v("Add Node")]),s._v("æŒ‰é’®ä»¥å¢åŠ èŠ‚ç‚¹ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(577),alt:"image-20210726105430879"}})]),s._v(" "),e("p",[s._v("å¢åŠ èŠ‚ç‚¹éœ€è¦å¡«å†™ï¼š")]),s._v(" "),e("blockquote",[e("ul",[e("li",[e("code",[s._v("New Node IP")]),s._v(": æ–°èŠ‚ç‚¹çš„"),e("code",[s._v("IP")]),s._v("ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å¢åŠ å¤šä¸ªèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹å°†ä¼šä½äºåŒä¸€ä¸ª"),e("code",[s._v("shard")]),s._v("ä¸Šã€‚")]),s._v(" "),e("li",[e("code",[s._v("Node Shard")]),s._v(": èŠ‚ç‚¹çš„"),e("code",[s._v("Shard NUmber")]),s._v("ã€‚")]),s._v(" "),e("li",[s._v("å¦‚æœå¡«å†™çš„"),e("code",[s._v("shard")]),s._v("æ˜¯å·²ç»å­˜åœ¨çš„ï¼Œé‚£ä¹ˆå¢åŠ çš„èŠ‚ç‚¹ä¼šä½œä¸ºå·²å­˜åœ¨"),e("code",[s._v("shard")]),s._v("çš„ä¸€ä¸ªå‰¯æœ¬ï¼›å¦‚æœ"),e("code",[s._v("shard")]),s._v("ä¸å­˜åœ¨ï¼ˆä¸€èˆ¬æ˜¯æœ€å¤§çš„"),e("code",[s._v("shard")]),s._v("ç¼–å·"),e("code",[s._v("+1")]),s._v("ï¼Œå¦‚æœä¸æ˜¯å°±ä¸æ­£ç¡®äº†ï¼‰ï¼Œå°±ä¼šæ–°å¢åŠ ä¸€ä¸ª"),e("code",[s._v("shard")]),s._v("ã€‚")]),s._v(" "),e("li",[s._v("å¦‚æœé›†ç¾¤ä¸æ”¯æŒå‰¯æœ¬æ¨¡å¼ï¼Œåˆ™æ¯ä¸ª"),e("code",[s._v("shard")]),s._v("åªèƒ½æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸å¯ä»¥ç»™å·²æœ‰"),e("code",[s._v("shard")]),s._v("æ·»åŠ å‰¯æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœé›†ç¾¤æ”¯æŒå‰¯æœ¬æ¨¡å¼ï¼Œåˆ™å¯ä»¥åœ¨ä»»æ„"),e("code",[s._v("shard")]),s._v("å¢åŠ èŠ‚ç‚¹ã€‚")])])]),s._v(" "),e("h4",{attrs:{id:"åˆ é™¤èŠ‚ç‚¹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#åˆ é™¤èŠ‚ç‚¹"}},[s._v("#")]),s._v(" åˆ é™¤èŠ‚ç‚¹")]),s._v(" "),e("p",[s._v("åˆ é™¤èŠ‚ç‚¹æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåˆ é™¤èŠ‚ç‚¹å¹¶ä¸ä¼šé”€æ¯è¯¥èŠ‚ç‚¹ï¼Œåªä¼šåœæ­¢è¯¥èŠ‚ç‚¹çš„"),e("code",[s._v("clickhouse")]),s._v("æœåŠ¡ï¼Œå¹¶ä»"),e("code",[s._v("clusters.json")]),s._v("ä¸­åˆ é™¤æ‰ã€‚")]),s._v(" "),e("p",[s._v("åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœæŸä¸ª"),e("code",[s._v("shard")]),s._v("æœ‰ä¸”åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹ä¸€èˆ¬æ˜¯ä¸å¯ä»¥è¢«åˆ é™¤çš„ï¼Œé™¤éè¯¥èŠ‚ç‚¹å¤„äº"),e("code",[s._v("shard")]),s._v("ç¼–å·çš„æœ€å¤§ä½ç½®ã€‚")]),s._v(" "),e("h3",{attrs:{id:"ç›‘æ§ç®¡ç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘æ§ç®¡ç†"}},[s._v("#")]),s._v(" ç›‘æ§ç®¡ç†")]),s._v(" "),e("p",[e("code",[s._v("ckman")]),s._v("æä¾›äº†"),e("code",[s._v("ClickHouse")]),s._v("ç›¸å…³çš„ä¸€äº›æŒ‡æ ‡ç›‘æ§é¡¹ã€‚è¿™äº›ç›‘æ§é¡¹ä¾èµ–äºä»"),e("code",[s._v("prometheus")]),s._v("ä¸­è·å–æ•°æ®ï¼Œå› æ­¤ï¼Œéœ€è¦æå‰é…ç½®å¥½"),e("code",[s._v("prometheus")]),s._v("ã€‚ç›¸å…³é…ç½®æ•™ç¨‹è§"),e("RouterLink",{attrs:{to:"/03.å®è·µéƒ¨ç½²/02.é¡¹ç›®å®è·µ/53.wdpæ•°æ®åº•åº§/guide/deploy.html"}},[s._v("ckmanéƒ¨ç½²æ–‡æ¡£")]),s._v("ã€‚")],1),s._v(" "),e("p",[e("img",{attrs:{src:t(578),alt:"image-20210302181407722"}})]),s._v(" "),e("h4",{attrs:{id:"clickhouse-database-kpis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clickhouse-database-kpis"}},[s._v("#")]),s._v(" ClickHouse Database KPIs")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("æŒ‡æ ‡")]),s._v(" "),e("th",[s._v("è¯´æ˜")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("clickhouse.Query")])]),s._v(" "),e("td",[s._v("é’ˆå¯¹"),e("code",[s._v("Clickhouse")]),s._v("é›†ç¾¤çš„åˆ†å¸ƒå¼è¡¨å‘èµ·çš„æŸ¥è¯¢ï¼ŒæŒ‰ç…§å‘èµ·æ—¶åˆ»çš„åˆ†å¸ƒå›¾")])])])]),s._v(" "),e("h4",{attrs:{id:"clickhouse-node-kpis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clickhouse-node-kpis"}},[s._v("#")]),s._v(" ClickHouse Node KPIs")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("æŒ‡æ ‡")]),s._v(" "),e("th",[s._v("è¯´æ˜")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("cpu usage")])]),s._v(" "),e("td",[e("code",[s._v("CPU")]),s._v("å ç”¨æƒ…å†µ")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("memory usage")])]),s._v(" "),e("td",[s._v("å†…å­˜å ç”¨æƒ…å†µ")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("disk usage")])]),s._v(" "),e("td",[s._v("ç¡¬ç›˜å ç”¨æƒ…å†µ")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("IOPS")])]),s._v(" "),e("td",[e("code",[s._v("IO")]),s._v("æŒ‡æ ‡")])])])]),s._v(" "),e("h4",{attrs:{id:"zookeeper-kpis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-kpis"}},[s._v("#")]),s._v(" ZooKeeper KPIs")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("æŒ‡æ ‡")]),s._v(" "),e("th",[s._v("è¯´æ˜")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[e("code",[s._v("znode_count")])]),s._v(" "),e("td",[e("code",[s._v("znode")]),s._v("æ•°")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("leader_uptime")])]),s._v(" "),e("td",[e("code",[s._v("leader")]),s._v("å­˜æ´»æ—¶é—´")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("stale_sessions_expired")])]),s._v(" "),e("td",[s._v("è¿‡æœŸçš„ä¼šè¯")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("jvm_gc_collection_seconds_count")])]),s._v(" "),e("td",[e("code",[s._v("jvm")]),s._v(" "),e("code",[s._v("gc")]),s._v("çš„æ¬¡æ•°")])]),s._v(" "),e("tr",[e("td",[e("code",[s._v("jvm_gc_collection_seconds_sum")])]),s._v(" "),e("td",[e("code",[s._v("jvm")]),s._v(" "),e("code",[s._v("gc")]),s._v("èŠ±è´¹çš„æ—¶é—´")])])])]),s._v(" "),e("h3",{attrs:{id:"è¡¨-ä¼šè¯ç®¡ç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è¡¨-ä¼šè¯ç®¡ç†"}},[s._v("#")]),s._v(" è¡¨&ä¼šè¯ç®¡ç†")]),s._v(" "),e("h4",{attrs:{id:"table-metrics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#table-metrics"}},[s._v("#")]),s._v(" Table Metrics")]),s._v(" "),e("p",[s._v("ç»Ÿè®¡è¡¨çš„ä¸€äº›æŒ‡æ ‡ã€‚é™¤"),e("code",[s._v("system")]),s._v("æ•°æ®åº“çš„è¡¨ä¹‹å¤–ï¼Œå…¶ä»–æ•°æ®åº“çš„è¡¨éƒ½ä¼šæ˜¾ç¤ºåœ¨ä¸‹é¢ã€‚")]),s._v(" "),e("p",[s._v("æŒ‡æ ‡åŒ…æ‹¬ï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[e("code",[s._v("Table Name")]),s._v(" è¡¨å")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Columns")]),s._v(" åˆ—æ•°")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Rows")]),s._v(" è¡Œæ•°")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Partitions")]),s._v(" å½“å‰æ‰€æœ‰æœªåˆå¹¶çš„åˆ†åŒºæ•°")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Parts Count")]),s._v(" åˆ†åŒºæ•°")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Disk Space(uncompress)")]),s._v(" ä½¿ç”¨ç£ç›˜ï¼ˆæœªå‹ç¼©ï¼‰")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Disk Space(compress)")]),s._v(" ä½¿ç”¨ç£ç›˜ï¼ˆå‹ç¼©ï¼‰ï¼Œè¯¥å¤§å°æ˜¯æœ€ç»ˆæ•°æ®è½ç›˜çš„å ç”¨ç©ºé—´")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("RWStatus")]),s._v(" è¯»å†™çŠ¶æ€ï¼Œ "),e("code",[s._v("TRUE")]),s._v("ä»£è¡¨å¯è¯»å†™ï¼Œ"),e("code",[s._v("FALSE")]),s._v("ä»£è¡¨ä¸å¯è¯»å†™")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Completed Queries in last 24h")]),s._v(" è¿‡å»"),e("code",[s._v("24")]),s._v("å°æ—¶æˆåŠŸçš„"),e("code",[s._v("SQL")]),s._v("æ¡æ•°")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Failed Queries in last 24h")]),s._v(" è¿‡å»"),e("code",[s._v("24")]),s._v("å°æ—¶å¤±è´¥çš„"),e("code",[s._v("SQL")]),s._v("æ¡æ•°")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("Queries cost(0.5, 0.99, max) in last 7days(ms)")]),s._v("è¿‡å»"),e("code",[s._v("7")]),s._v("å¤©"),e("code",[s._v("SQL")]),s._v("èŠ±è´¹çš„æ—¶é—´ã€‚")]),s._v(" "),e("p",[e("code",[s._v("Queries Cost")]),s._v("æœ‰ä¸‰ä¸ªå€¼ï¼š")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("0.5")]),s._v("ï¼šè¿‡å»"),e("code",[s._v("7")]),s._v("å¤©"),e("code",[s._v("50% SQL")]),s._v("çš„å¹³å‡è€—æ—¶")]),s._v(" "),e("li",[e("code",[s._v("0.99")]),s._v("ï¼šè¿‡å»"),e("code",[s._v("7")]),s._v("å¤©"),e("code",[s._v("99% SQL")]),s._v("çš„å¹³å‡è€—æ—¶")]),s._v(" "),e("li",[e("code",[s._v("max")]),s._v("ï¼šè¿‡å»"),e("code",[s._v("7")]),s._v("å¤© "),e("code",[s._v("SQL")]),s._v("æœ€å¤§è€—æ—¶")])])])]),s._v(" "),e("p",[e("img",{attrs:{src:t(579),alt:"image-20210726134249068"}})]),s._v(" "),e("h4",{attrs:{id:"table-replication-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#table-replication-status"}},[s._v("#")]),s._v(" Table Replication Status")]),s._v(" "),e("p",[s._v("ç»Ÿè®¡å¤åˆ¶è¡¨çš„ä¸€äº›çŠ¶æ€ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(580),alt:"image-20210302133411795"}})]),s._v(" "),e("p",[s._v("æ­¤å¤„ä¼šç»Ÿè®¡æ¯ä¸ª"),e("code",[s._v("shard")]),s._v("ä¸‹æ¯å¼ è¡¨çš„å„å‰¯æœ¬ä¹‹é—´çš„ç»Ÿè®¡é‡ã€‚")]),s._v(" "),e("p",[s._v("ç†è®ºä¸Šæ¯ä¸ª"),e("code",[s._v("shard")]),s._v("å†…å‰¯æœ¬ä¹‹é—´å„è¡¨çš„ç»Ÿè®¡éƒ½åº”è¯¥ç›¸ç­‰çš„ï¼Œå¦‚æœæœ‰ä¸ç›¸ç­‰ï¼Œå°±è¯´æ˜æœ‰èŠ‚ç‚¹è½åäº†ï¼Œè¿™æ—¶å€™è½åçš„èŠ‚ç‚¹ä¼šæ ‡é»„ã€‚å¦‚æœæŸä¸ªå‰¯æœ¬ä¸Šæ‰€æœ‰çš„è¡¨éƒ½è½åï¼Œè¯´æ˜è¿™ä¸ªå‰¯æœ¬å¯èƒ½å‡ºé—®é¢˜äº†ã€‚")]),s._v(" "),e("h4",{attrs:{id:"zookeeper-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-status"}},[s._v("#")]),s._v(" Zookeeper Status")]),s._v(" "),e("p",[e("code",[s._v("zookeeper")]),s._v("çš„ç›¸å…³æŒ‡æ ‡æŸ¥çœ‹ã€‚"),e("code",[s._v("zookeeper")]),s._v("ç›‘æ§ä½¿ç”¨çš„æ˜¯"),e("code",[s._v("zookeeper-3.5.0")]),s._v("ç‰ˆæœ¬æ–°å¢çš„ç‰¹æ€§ï¼Œé€šè¿‡æš´éœ²çš„"),e("code",[s._v("8080")]),s._v("ç«¯å£ç›‘æ§"),e("code",[s._v("mntr")]),s._v("æŒ‡æ ‡ä¿¡æ¯ï¼Œå› æ­¤ï¼Œå¦‚æœæƒ³è¦çœ‹åˆ°"),e("code",[s._v("zookeeper")]),s._v("çš„ç›‘æ§æŒ‡æ ‡ï¼Œéœ€è¦ä¿è¯å½“å‰ä½¿ç”¨çš„"),e("code",[s._v("zookeeper")]),s._v("ç‰ˆæœ¬å¤§äºç­‰äº"),e("code",[s._v("3.5.0")]),s._v("ã€‚")]),s._v(" "),e("p",[s._v("å¯æŸ¥çœ‹çš„æŒ‡æ ‡åŒ…æ‹¬ï¼šç‰ˆæœ¬ï¼Œä¸»ä»çŠ¶æ€ï¼Œå¹³å‡å»¶è¿Ÿï¼Œè¿‘ä¼¼æ•°æ®æ€»å’Œå¤§å°ï¼Œ"),e("code",[s._v("znode")]),s._v("æ•°ç­‰ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(581),alt:"image-20210726141459318"}})]),s._v(" "),e("h4",{attrs:{id:"open-sessions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#open-sessions"}},[s._v("#")]),s._v(" Open Sessions")]),s._v(" "),e("p",[s._v("æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿›è¡Œçš„ä¼šè¯ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(582),alt:"image-20210301151056577"}})]),s._v(" "),e("h4",{attrs:{id:"slow-sessions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#slow-sessions"}},[s._v("#")]),s._v(" Slow Sessions")]),s._v(" "),e("p",[s._v("æ˜¾ç¤º"),e("code",[s._v("7")]),s._v("å¤©å†…æœ€æ…¢çš„"),e("code",[s._v("10")]),s._v("æ¡"),e("code",[s._v("SQL")]),s._v("è¯­å¥ã€‚")]),s._v(" "),e("p",[s._v("åŒ…å«"),e("code",[s._v("SQL")]),s._v("çš„æ‰§è¡Œæ—¶é—´ã€"),e("code",[s._v("SQL")]),s._v("è€—æ—¶ã€"),e("code",[s._v("SQL")]),s._v("è¯­å¥ã€"),e("code",[s._v("ck")]),s._v("ç”¨æˆ·ã€"),e("code",[s._v("query id")]),s._v("ã€æŸ¥è¯¢çš„"),e("code",[s._v("IP")]),s._v("ä»¥åŠçº¿ç¨‹å·ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(583),alt:"image-20210726112101073"}})]),s._v(" "),e("h3",{attrs:{id:"queryæŸ¥è¯¢ç®¡ç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#queryæŸ¥è¯¢ç®¡ç†"}},[s._v("#")]),s._v(" QueryæŸ¥è¯¢ç®¡ç†")]),s._v(" "),e("p",[e("code",[s._v("ckman")]),s._v("è¿˜æä¾›äº†ç®€å•çš„"),e("code",[s._v("clickhouse")]),s._v("æŸ¥è¯¢çš„é¡µé¢ã€‚é€šè¿‡è¯¥é¡µé¢å¯ä»¥æŸ¥è¯¢é›†ç¾¤ä¸­çš„æ•°æ®ã€‚")]),s._v(" "),e("p",[e("img",{attrs:{src:t(584),alt:"image-20210301151624044"}})]),s._v(" "),e("blockquote",[e("p",[s._v("æ³¨æ„ï¼š")]),s._v(" "),e("p",[s._v("è¯¥å·¥å…·åªèƒ½æŸ¥è¯¢ï¼Œä¸èƒ½è¿›è¡Œ"),e("code",[s._v("mutation")]),s._v("çš„ç›¸å…³æ“ä½œã€‚")]),s._v(" "),e("p",[s._v("è¯¥å·¥å…·ä¸»è¦é’ˆå¯¹åˆ†å¸ƒå¼è¡¨ï¼Œæœ¬åœ°è¡¨ä¹Ÿèƒ½æŸ¥ï¼Œä½†æ˜¯å¦‚æœæœ¬åœ°è¡¨åœ¨é›†ç¾¤çš„å…¶ä»–èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚å³ä½¿è¡¨åœ¨æ‰€æœ‰èŠ‚ç‚¹éƒ½å­˜åœ¨ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ä¹Ÿæ˜¯æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œå› æ­¤æ¯æ¬¡æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®å¯èƒ½ä¸ä¸€è‡´ã€‚")])]),s._v(" "),e("h3",{attrs:{id:"é…ç½®ç®¡ç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®ç®¡ç†"}},[s._v("#")]),s._v(" é…ç½®ç®¡ç†")]),s._v(" "),e("p",[s._v("é€šè¿‡é›†ç¾¤é…ç½®ç®¡ç†é¡µé¢ï¼Œå¯ä»¥ä¿®æ”¹é›†ç¾¤çš„é…ç½®ï¼Œæ³¨æ„å¯¹å­˜å‚¨ç­–ç•¥çš„é…ç½®çš„ä¿®æ”¹ï¼Œå¦‚æœå·²æœ‰çš„å­˜å‚¨ä»‹è´¨ä¸Šå·²æœ‰æ•°æ®ï¼Œåˆ™è¯¥å­˜å‚¨ä»‹è´¨ä¸å¯åˆ é™¤ã€‚")]),s._v(" "),e("p",[e("code",[s._v("ckman")]),s._v("ä¼šæ ¹æ®ä¿®æ”¹çš„é›†ç¾¤é…ç½®çš„å…·ä½“å†…å®¹æ¥å†³å®šé›†ç¾¤æ˜¯å¦éœ€è¦é‡å¯ã€‚")]),s._v(" "),e("h2",{attrs:{id:"é…ç½®ç£ç›˜ç­–ç•¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®ç£ç›˜ç­–ç•¥"}},[s._v("#")]),s._v(" é…ç½®ç£ç›˜ç­–ç•¥")]),s._v(" "),e("p",[s._v("å‚è€ƒï¼šhttps://cloud.tencent.com/developer/article/1649377")]),s._v(" "),e("p",[s._v("Clickhouseå¯¹å¤šç¡¬ç›˜çš„é…ç½®æ˜¯é€šè¿‡Policyå®ç°çš„ï¼Œæ¶æ„å›¾å¦‚ä¸‹ï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(585),alt:"img"}})]),s._v(" "),e("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå…·ä½“æŸä¸ªè¡¨ï¼Œé€‰æ‹©ä¸åŒçš„Policyï¼Œä¼šå†³å®šæœ€ç»ˆçš„æ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚å¯¹äºæ•°æ®çš„å­˜å‚¨ï¼Œåˆ°å…·ä½“çš„ç£ç›˜ä½ç½®ï¼Œæ˜¯éœ€è¦ç»è¿‡Policy,Volumeä¸¤å±‚çš„é€»è¾‘å…³ç³»")]),s._v(" "),e("p",[s._v("Policyå¯ä»¥å¯¹æ¥ä¸¤ä¸ªVolume,Volumeå¯ä»¥å¯¹æ¥å¤šä¸ªç£ç›˜ã€‚ç®€å•æ¥è¯´ï¼Œä¸¤ä¸ªVolumeå¯ä»¥å®ç°æ•°æ®çš„å†·çƒ­å­˜å‚¨ï¼Œä¸€ä¸ªVolumeå¯¹æ¥å¤šä¸ªç£ç›˜ï¼Œå®ç°æ•°æ®çš„åˆ†æ•£å­˜å‚¨ï¼Œå……åˆ†åˆ©ç”¨å¤šä¸ªç£ç›˜çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚æ³¨æ„Volumeæ˜¯åœ¨Policyé‡Œé¢å®šä¹‰çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªVolumeåªèƒ½å¯¹åº”ä¸€ä¸ªpolicy")]),s._v(" "),e("p",[s._v("é»˜è®¤çš„ç­–åˆ—defalutï¼Œæ‰€æœ‰è¡¨çš„å…ƒæ•°æ®ï¼Œæ˜¯å­˜å‚¨åœ¨é›†ç¾¤åˆ›å»ºæ—¶å€™é€‰æ‹©çš„å­˜å‚¨è·¯å¾„ä¸­ï¼Œå»ºè®®è¿™é‡Œä½¿ç”¨SSDé«˜é€Ÿç£ç›˜")]),s._v(" "),e("p",[e("img",{attrs:{src:t(586),alt:"img"}})]),s._v(" "),e("p",[s._v("ç­–åˆ—å’Œå­˜å‚¨å·å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œé…ç½®ï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(587),alt:"img"}})]),s._v(" "),e("p",[s._v("å®šä¹‰ç£ç›˜ï¼š")]),s._v(" "),e("p",[e("img",{attrs:{src:t(588),alt:"img"}})]),s._v(" "),e("p",[s._v("å®šä¹‰policy:")]),s._v(" "),e("p",[e("img",{attrs:{src:t(589),alt:"img"}})]),s._v(" "),e("div",{staticClass:"language-xml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("sdc_sdd_jbod")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" > "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- name for new storage policy --\x3e")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("sdc_sdd_jbod_volume")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- name of volume --\x3e")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--\n      the order of listing disks inside\n      volume defines round-robin sequence\n      --\x3e")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("disk")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("sdc"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("disk")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("disk")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("sdd"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("disk")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("sdc_sdd_jbod_volume")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("sdc_sdd_jbod")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("å®ç°å†·çƒ­æ•°æ®çš„å¤„ç†ï¼Œæ¯”å¦‚çƒ­æ•°æ®åœ¨SSDï¼Œå†·çš„æ•°æ®åœ¨æ™®é€šç£ç›˜")]),s._v(" "),e("p",[s._v("æœ‰ä¸ªé‡è¦çš„å‚æ•°ï¼š max_data_part_sizeï¼Œè¿™ä¸ªåœ¨ckmané‡Œé¢ä¹Ÿæ˜¯å¯ä»¥é…ç½®çš„")]),s._v(" "),e("p",[s._v("æ³¨æ„å·çš„å…ˆåå¾ªåºå¾ˆé‡è¦ï¼Œæ•°æ®æ˜¯å…ˆæ”¾åœ¨ç¬¬ä¸€ä¸ªå·é‡Œé¢çš„")]),s._v(" "),e("p",[s._v("å½“æ•°æ®è¶…è¿‡é˜ˆå€¼ï¼Œè¢«åˆå¹¶åï¼Œåˆå¹¶çš„ç»“æœå°±ä¼šæ”¾åˆ°ç¬¬äºŒä¸ªå·é‡Œé¢ï¼Œä¹Ÿå°±æ˜¯å†·å·")]),s._v(" "),e("p",[s._v("ç”¨æ³•ï¼š")]),s._v(" "),e("p",[s._v("å»ºè¡¨çš„æ—¶å€™è®¾ç½® storage_policy")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" sample3 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id UInt64"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Engine")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("MergeTree "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" id SETTINGS storage_policy "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sdc_sdd_jbod'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"å¦‚ä½•è¿›è¡Œç›‘æ§"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•è¿›è¡Œç›‘æ§"}},[s._v("#")]),s._v(" å¦‚ä½•è¿›è¡Œç›‘æ§")]),s._v(" "),e("h3",{attrs:{id:"è¿ç»´æ“ä½œè¯­å¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#è¿ç»´æ“ä½œè¯­å¥"}},[s._v("#")]),s._v(" è¿ç»´æ“ä½œè¯­å¥")]),s._v(" "),e("p",[s._v("æŸ¥çœ‹ç£ç›˜ç©ºé—´ï¼š")]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n    name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    formatReadableSize"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("free_space"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" free"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    formatReadableSize"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("total_space"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" total"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    formatReadableSize"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("keep_free_space"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" reserved\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" system"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("disks\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"é…ç½®æ–‡ä»¶è¯´æ˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®æ–‡ä»¶è¯´æ˜"}},[s._v("#")]),s._v(" é…ç½®æ–‡ä»¶è¯´æ˜")]),s._v(" "),e("h3",{attrs:{id:"server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#server"}},[s._v("#")]),s._v(" server")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("id")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("ckman")]),s._v("é›†ç¾¤"),e("code",[s._v("id")]),s._v("ï¼ŒåŒä¸€ä¸ªé›†ç¾¤çš„"),e("code",[s._v("ckman")]),s._v("çš„"),e("code",[s._v("id")]),s._v("å·é…ç½®å¿…é¡»ä¸åŒ")])])]),s._v(" "),e("li",[e("code",[s._v("port")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("ckman")]),s._v("çš„ç›‘å¬ç«¯å£")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("8808")])])])]),s._v(" "),e("li",[e("code",[s._v("https")]),s._v(" "),e("ul",[e("li",[s._v("æ˜¯å¦ç›‘å¬"),e("code",[s._v("https")])]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("false")])])])]),s._v(" "),e("li",[e("code",[s._v("certfile")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("https")]),s._v("çš„è¯ä¹¦æ–‡ä»¶ï¼Œå¦‚æœå¼€å¯äº†"),e("code",[s._v("https")])]),s._v(" "),e("li",[s._v("é»˜è®¤ä½¿ç”¨"),e("code",[s._v("conf")]),s._v("ä¸‹çš„"),e("code",[s._v("server.crt")])])])]),s._v(" "),e("li",[e("code",[s._v("keyfile")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("https")]),s._v("çš„"),e("code",[s._v("key")]),s._v("æ–‡ä»¶ï¼Œå¦‚æœå¼€å¯äº†"),e("code",[s._v("https")])]),s._v(" "),e("li",[s._v("é»˜è®¤ä½¿ç”¨"),e("code",[s._v("conf")]),s._v("ä¸‹çš„"),e("code",[s._v("server.key")])])])]),s._v(" "),e("li",[e("code",[s._v("pprof")]),s._v(" "),e("ul",[e("li",[s._v("æ˜¯å¦æ”¯æŒ"),e("code",[s._v("pprof")]),s._v("ç›‘æ§")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("true")])])])]),s._v(" "),e("li",[e("code",[s._v("session_timeout")]),s._v(" "),e("ul",[e("li",[s._v("ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¯¥æ—¶é—´æ²¡æœ‰å¯¹"),e("code",[s._v("ckman")]),s._v("è¿›è¡Œä»»ä½•æ“ä½œï¼Œåˆ™"),e("code",[s._v("token")]),s._v("å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç™»å½•")]),s._v(" "),e("li",[s._v("é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º"),e("code",[s._v("3600")]),s._v("ç§’")])])]),s._v(" "),e("li",[e("code",[s._v("public_key")]),s._v(" "),e("ul",[e("li",[s._v("ç”¨æ¥æ¥å…¥"),e("code",[s._v("ckman")]),s._v("çš„å…¬é’¥")]),s._v(" "),e("li",[e("code",[s._v("ckman")]),s._v("å¯é€šè¿‡"),e("code",[s._v("RSA")]),s._v("é…ç½®å…¬é’¥çš„æ–¹å¼è·³è¿‡"),e("code",[s._v("token")]),s._v("é‰´æƒï¼Œåªéœ€è¦åœ¨å®¢æˆ·ç«¯å¯¹"),e("code",[s._v("header")]),s._v("é…ç½®"),e("code",[s._v("userToken")]),s._v("ï¼Œå¹¶å¯¹"),e("code",[s._v("userToken")]),s._v("ä½¿ç”¨ç§é’¥åŠ å¯†ï¼Œç„¶ååœ¨"),e("code",[s._v("ckman")]),s._v("æœåŠ¡ç«¯ä½¿ç”¨è¯¥å…¬é’¥è¿›è¡Œè§£å¯†å³å¯ã€‚")])])]),s._v(" "),e("li",[e("code",[s._v("swagger_enable")]),s._v(" "),e("ul",[e("li",[s._v("æ˜¯å¦å¼€å¯"),e("code",[s._v("swagger")]),s._v("æ–‡æ¡£")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸å¼€å¯")])])]),s._v(" "),e("li",[e("code",[s._v("task_interval")]),s._v(" "),e("ul",[e("li",[s._v("æ‰§è¡Œå¼‚æ­¥è¿ç»´åŠ¨ä½œçš„æ‰«ææ—¶é—´é—´éš”")]),s._v(" "),e("li",[s._v("å‰ç«¯è¯·æ±‚éƒ¨ç½²ã€å‡çº§ã€é”€æ¯ä»¥åŠå¢åˆ èŠ‚ç‚¹ç­‰æ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ—¶ï¼Œ"),e("code",[s._v("ckman")]),s._v("å…ˆè®°å½•çŠ¶æ€ï¼Œç„¶åä½¿ç”¨å¦å¤–çš„åç¨‹å¼‚æ­¥æ‰«æå¤„ç†ï¼Œå¼‚æ­¥æ‰«æçš„æ—¶é—´é—´éš”é€šè¿‡è¯¥å‚æ•°å¯é…ï¼Œé»˜è®¤ä¸º"),e("code",[s._v("5")]),s._v("ç§’")])])]),s._v(" "),e("li",[e("code",[s._v("persistant_policy")]),s._v(" "),e("ul",[e("li",[s._v("æŒä¹…åŒ–ç­–ç•¥ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨é›†ç¾¤çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬é›†ç¾¤é…ç½®ã€é€»è¾‘é›†ç¾¤æ˜ å°„å…³ç³» ã€æŸ¥è¯¢è¯­å¥å†å²è®°å½•ã€è¿ç»´æ“ä½œçŠ¶æ€ç­‰ã€‚")]),s._v(" "),e("li",[s._v("æŒä¹…åŒ–ç­–ç•¥æ”¯æŒ"),e("code",[s._v("local")]),s._v("ã€"),e("code",[s._v("mysql")]),s._v("å’Œ"),e("code",[s._v("postgres")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("local")]),s._v("ï¼šå­˜å‚¨åˆ°æœ¬åœ°ï¼Œåœ¨"),e("code",[s._v("conf")]),s._v("ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª"),e("code",[s._v("clusters.json")]),s._v("æ–‡ä»¶ï¼Œä¸æ”¯æŒé›†ç¾¤ï¼Œä¸ºé»˜è®¤é…ç½®")]),s._v(" "),e("li",[e("code",[s._v("mysql")]),s._v("ï¼šæŒä¹…åŒ–åˆ°"),e("code",[s._v("mysql")]),s._v("ï¼Œæ”¯æŒ"),e("code",[s._v("ckman")]),s._v("é›†ç¾¤ï¼Œæ”¯æŒ"),e("code",[s._v("HA")]),s._v("ï¼Œéœ€è¦æå‰åˆ›å»ºæ•°æ®åº“ï¼Œæ•°æ®åº“ç¼–ç ä¸º"),e("code",[s._v("UTF-8")]),s._v("ï¼Œä¸éœ€è¦åˆ›å»ºè¡¨ï¼Œ"),e("code",[s._v("ckman")]),s._v("ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨")]),s._v(" "),e("li",[e("code",[s._v("postgres")]),s._v("ï¼šæŒä¹…åŒ–åˆ°"),e("code",[s._v("postgres")]),s._v("ï¼Œæ”¯æŒ"),e("code",[s._v("ckman")]),s._v("é›†ç¾¤ï¼Œæ”¯æŒ"),e("code",[s._v("HA")]),s._v("ï¼Œéœ€è¦æå‰åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶ä¸”éœ€è¦æå‰åˆ›å»ºæ•°æ®åº“è¡¨ã€‚å»ºè¡¨è¯­å¥å†…ç½®åœ¨"),e("code",[s._v("dbscript/postgres.sql")]),s._v("ä¸­ã€‚")]),s._v(" "),e("li",[s._v("é™¤"),e("code",[s._v("local")]),s._v("ç­–ç•¥å¤–ï¼Œå…¶ä»–æŒä¹…åŒ–ç­–ç•¥éƒ½ä¾èµ–"),e("code",[s._v("persistent_config")]),s._v("ä¸­çš„é…ç½®é¡¹ï¼Œå½“ç„¶"),e("code",[s._v("local")]),s._v("ä¹Ÿå¯ä»¥é…ç½®è¯¥é¡¹ã€‚")])])])])])]),s._v(" "),e("p",[s._v("ç¤ºä¾‹å¦‚ä¸‹ï¼š")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8808")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("https")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#certfile:")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#keyfile:")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pprof")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("swagger_enable")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("session_timeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# support local, mysql, postgres")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("persistent_policy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" local\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("task_interval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#public_key:")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h3",{attrs:{id:"log"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[s._v("#")]),s._v(" log")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("level")]),s._v(" "),e("ul",[e("li",[s._v("æ—¥å¿—æ‰“å°çº§åˆ«")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("INFO")])]),s._v(" "),e("li",[s._v("æ”¯æŒ "),e("code",[s._v("DEBUG")]),s._v("ã€"),e("code",[s._v("INFO")]),s._v("ã€"),e("code",[s._v("WARN")]),s._v("ã€"),e("code",[s._v("ERROR")]),s._v("ã€"),e("code",[s._v("PANIC")]),s._v("ã€"),e("code",[s._v("FATAL")])])])]),s._v(" "),e("li",[e("code",[s._v("max_count")]),s._v(" "),e("ul",[e("li",[s._v("æ»šåŠ¨æ—¥å¿—æ•°é‡")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("5")]),s._v("ä¸ª")])])]),s._v(" "),e("li",[e("code",[s._v("max_age")]),s._v(" "),e("ul",[e("li",[s._v("æ—¥å¿—ç”Ÿå‘½æœ‰æ•ˆæœŸ")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("10")]),s._v("å¤©")])])])]),s._v(" "),e("p",[s._v("ç¤ºä¾‹å¦‚ä¸‹ï¼š")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("level")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" INFO\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max_count")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# megabyte")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max_size")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# day")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max_age")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"persistent-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#persistent-config"}},[s._v("#")]),s._v(" persistent_config")]),s._v(" "),e("h4",{attrs:{id:"mysql-postgres"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-postgres"}},[s._v("#")]),s._v(" mysql & postgres")]),s._v(" "),e("p",[e("code",[s._v("mysql")]),s._v("å’Œ"),e("code",[s._v("postgres")]),s._v("é…ç½®é¡¹åŸºæœ¬ä¸€è‡´ï¼Œä¸»è¦æ¶‰åŠä»¥ä¸‹é…ç½®é¡¹ï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[e("code",[s._v("host")])]),s._v(" "),e("ul",[e("li",[s._v("è¿æ¥æ•°æ®åº“çš„ipåœ°å€")])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("port")])]),s._v(" "),e("ul",[e("li",[s._v("è¿æ¥æ•°æ®åº“çš„ç«¯å£å·ï¼Œå¦‚"),e("code",[s._v("mysql")]),s._v("é»˜è®¤ä¸º"),e("code",[s._v("3306")]),s._v("ï¼Œ"),e("code",[s._v("postgres")]),s._v("é»˜è®¤ä¸º"),e("code",[s._v("5432")])])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("user")])]),s._v(" "),e("ul",[e("li",[s._v("è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·")])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("password")])]),s._v(" "),e("ul",[e("li",[s._v("è¿æ¥æ•°æ®åº“çš„å¯†ç ï¼Œéœ€è¦åŠ å¯†ï¼Œå¯ä½¿ç”¨ä¸‹é¢å‘½ä»¤è·å¾—å¯†ç çš„å¯†æ–‡")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("ckman --encrypt "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \nE310E892E56801CED9ED98AA177F18E6\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("database")])]),s._v(" "),e("ul",[e("li",[s._v("éœ€è¦è¿æ¥çš„æ•°æ®åº“ï¼Œéœ€æå‰åˆ›å»ºï¼Œå¹¶ä¸”ä¿è¯ç¼–ç ä¸º"),e("code",[s._v("UTF-8")])])])])]),s._v(" "),e("h4",{attrs:{id:"local"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#local"}},[s._v("#")]),s._v(" local")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("format")]),s._v(" "),e("ul",[e("li",[s._v("æœ¬åœ°æ–‡ä»¶æ ¼å¼ï¼Œæ”¯æŒ"),e("code",[s._v("JSON")]),s._v("å’Œ"),e("code",[s._v("yaml")]),s._v("ï¼Œé»˜è®¤ä¸º"),e("code",[s._v("json")])])])]),s._v(" "),e("li",[e("code",[s._v("config_dir")]),s._v(" "),e("ul",[e("li",[s._v("æœ¬åœ°æ–‡ä»¶çš„ç›®å½•ï¼Œéœ€è¦å¡«å†™è·¯å¾„ï¼Œé»˜è®¤ä¸º"),e("code",[s._v("ckman")]),s._v("å·¥ä½œè·¯å¾„çš„"),e("code",[s._v("conf")]),s._v("ç›®å½•ä¸‹")])])]),s._v(" "),e("li",[e("code",[s._v("config_file")]),s._v(" "),e("ul",[e("li",[s._v("æœ¬åœ°æ–‡ä»¶çš„æ–‡ä»¶åï¼Œé»˜è®¤ä¸º"),e("code",[s._v("clusters")])])])])]),s._v(" "),e("h3",{attrs:{id:"nacos"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nacos"}},[s._v("#")]),s._v(" nacos")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("enabled")]),s._v(" "),e("ul",[e("li",[s._v("æ˜¯å¦å¼€å¯"),e("code",[s._v("nacos")])]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸ºä¸å¼€å¯")])])]),s._v(" "),e("li",[e("code",[s._v("hosts")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("nacos")]),s._v("æœåŠ¡çš„"),e("code",[s._v("ip")]),s._v("åœ°å€")]),s._v(" "),e("li",[s._v("å¯ä»¥é…ç½®å¤šç»„")])])]),s._v(" "),e("li",[e("code",[s._v("port")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("nacos")]),s._v("æœåŠ¡çš„ç«¯å£")])])]),s._v(" "),e("li",[e("code",[s._v("user_name")]),s._v(" "),e("ul",[e("li",[s._v("ç™»å½•"),e("code",[s._v("nacos")]),s._v("çš„ç”¨æˆ·å")])])]),s._v(" "),e("li",[e("code",[s._v("password")]),s._v(" "),e("ul",[e("li",[s._v("ç™»å½•"),e("code",[s._v("nacos")]),s._v("çš„å¯†ç ï¼Œéœ€è¦åŠ å¯†ï¼ŒåŠ å¯†è§„åˆ™åŒæŒä¹…åŒ–ç­–ç•¥æ•°æ®åº“å¯†ç åŠ å¯†è§„åˆ™")])])]),s._v(" "),e("li",[e("code",[s._v("namespace")]),s._v(" "),e("ul",[e("li",[s._v("æŒ‡å®š"),e("code",[s._v("nacos")]),s._v("çš„"),e("code",[s._v("namespace")]),s._v("ï¼Œé»˜è®¤ä¸º"),e("code",[s._v("DEFAULT")])])])]),s._v(" "),e("li",[e("code",[s._v("group")]),s._v(" "),e("ul",[e("li",[s._v("å‘"),e("code",[s._v("nacos")]),s._v("æ³¨å†Œçš„æœåŠ¡æ‰€åœ¨çš„ç»„")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("DEFAULT_GROUP")])])])]),s._v(" "),e("li",[e("code",[s._v("data_id")]),s._v(" "),e("ul",[e("li",[s._v("å‘"),e("code",[s._v("nacos")]),s._v("æ³¨å†ŒæœåŠ¡åç§°ã€æ•°æ®é¡¹åç§°")]),s._v(" "),e("li",[s._v("é»˜è®¤ä¸º"),e("code",[s._v("ckman")])])])])]),s._v(" "),e("p",[s._v("ç¤ºä¾‹å¦‚ä¸‹ï¼š")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nacos")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hosts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 127.0.0.1\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8848")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nacos\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0192023A7BBD73250516F069DF18B500\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#namespace:")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#group:")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#data_id:")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h2",{attrs:{id:"å‚è€ƒæ–‡æ¡£"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒæ–‡æ¡£"}},[s._v("#")]),s._v(" å‚è€ƒæ–‡æ¡£")]),s._v(" "),e("ul",[e("li",[s._v("https://github.com/housepower/ckman/blob/main/docs/ckman_v2.0.0.md")]),s._v(" "),e("li",[s._v("https://github.com/housepower/ckman/blob/main/docs/guide/deploy.md")]),s._v(" "),e("li",[s._v("å®˜æ–¹æ•™å­¦è§†é¢‘ "),e("a",{attrs:{href:"https://www.bilibili.com/video/BV1gR4y1t75Q/",target:"_blank",rel:"noopener noreferrer"}},[s._v("clickhouseå¯è§†åŒ–ç®¡ç†å·¥å…·ckmanä½¿ç”¨æ•™ç¨‹_å“”å“©å“”å“©_bilibili"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);